!function(t){function e(n){if(o[n])return o[n].exports;var i=o[n]={i:n,l:!1,exports:{}};return t[n].call(i.exports,i,i.exports,e),i.l=!0,i.exports}var o={};e.m=t,e.c=o,e.i=function(t){return t},e.d=function(t,o,n){e.o(t,o)||Object.defineProperty(t,o,{configurable:!1,enumerable:!0,get:n})},e.n=function(t){var o=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(o,"a",o),o},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="./",e(e.s=55)}([function(t,e,o){(function(t){var e=t.nk=t.Nenkraft={};o(7)(e),o(54)(e),o(53)(e),o(35)(e),o(36)(e),o(37)(e),o(39)(e),o(38)(e),o(18)(e),o(17)(e),o(51)(e),o(52)(e),o(30)(e),o(29)(e),o(27)(e),o(28)(e),o(26)(e),o(21)(e),o(19)(e),o(22)(e),o(20)(e),o(24)(e),o(23)(e),o(11)(e),o(33)(e),o(31)(e),o(34)(e),o(32)(e),o(12)(e),o(15)(e),o(13)(e),o(16)(e),o(14)(e),o(6)(e),o(4)(e),o(5)(e),o(9)(e),o(8)(e),o(10)(e),o(25)(e)}).call(e,o(3))},,,function(t,e){var o;o=function(){return this}();try{o=o||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(o=window)}t.exports=o},function(t,e){t.exports=function(t){"use strict";function e(o,n,i){if(!(this instanceof e))return new e(o,n);this.frames=[],this.controller=o,this.id=n,this.onEnd=new t.Event.LocalEvent,this.onStop=new t.Event.LocalEvent,this.onStart=new t.Event.LocalEvent,void 0!==i&&(this.rate=i)}e.prototype=Object.create(null),e.prototype.constructor=e,e.prototype.currentFrame=0,e.prototype.currentFrameIndex=0,e.prototype.playing=!1,e.prototype.id=null,e.prototype.rate=60,e.prototype.reverse=!1,e.prototype.AddFrame=function(e,o,n,i,r){r=void 0===r?this.rate:r,this.frames.push(new t.Animator.Frame(e,o,n,i,r,this.controller.sprite))},e.prototype.GenerateFrames=function(t,e,o,n,i,r){for(var s,a,p,c=0,h=o/n;c<i;++c)s=c%h*t,a=Math.floor(c/h)*e,p=r[c],this.AddFrame(s,a,t,e,p)},e.prototype.SetFrame=function(t){t=void 0===t?0:t;var e=this.frames[t];void 0!==e&&(this.currentFrame=e,this.currentFrameIndex=t,this.currentFrame.Apply())},e.prototype.Start=function(){this.playing=!0,this.onStart.Dispatch()},e.prototype.Stop=function(){this.playing=!1,this.onStop.Dispatch()},e.prototype.Process=function(){if(!0===this.playing){var t=this.currentFrame,e=this.frames,o=!1;if(!0===t.Process()){var n;n=!1===this.reverse?++this.currentFrameIndex:--this.currentFrameIndex,n>=e.length?(n=this.currentFrameIndex=0,o=!0):n<0&&(n=this.currentFrameIndex=this.frames.length-1,o=!0),this.currentFrame=e[n],this.currentFrame.Apply(),!0===o&&this.onEnd.Dispatch()}}},e.prototype.Clear=function(){this.frames=[],delete this.currentFrame,delete this.playing,delete this.currentFrameIndex},e.prototype.Restart=function(t){this.SetFrame(t),this.ResetAllFrames(),this.Start()},e.prototype.ResetAllFrames=function(){for(var t,e=0,o=this.frames,n=o.length;e<n;++e)t=o[e],t.Reset()},t.Animator.Animation=e}},function(t,e){t.exports=function(t){"use strict";function e(t){if(!(this instanceof e))return new e(t);this.animations=[],void 0!==t&&(this.sprite=t)}e.prototype=Object.create(null),e.prototype.constructor=e,e.prototype.currentAnimation=null,e.prototype.sprite=null,e.prototype.AddAnimation=function(e,o){var n=new t.Animator.Animation(this,e,o);return this.animations.push(n),n},e.prototype.GetAnimation=function(t){for(var e,o=0,n=this.animations,i=n.length;o<i;++o)if((e=n[o])&&e.id===t)return e;return null},e.prototype.PlayAnimation=function(t,e){var o=this.GetAnimation(t);null!==o&&(this.currentAnimation=o,o.Restart(e))},e.prototype.StopCurrentAnimation=function(){null!==this.currentAnimation&&this.currentAnimation.Stop()},e.prototype.Process=function(){var t=this.currentAnimation;null!==t&&t.Process()},t.Animator.Controller=e}},function(t,e){t.exports=function(t){"use strict";function e(t,o,n,i,r,s){if(!(this instanceof e))return new e(t,o,n,i,r,s);this.sprite=s,this.rate=r,this.x=t,this.y=o,this.w=n,this.h=i}e.prototype=Object.create(null),e.prototype.constructor=e,e.prototype.x=0,e.prototype.y=0,e.prototype.w=0,e.prototype.h=0,e.prototype.sprite=null,e.prototype.rate=0,e.prototype.timer=0,e.prototype.Process=function(){return this.timer--<=0&&(this.Reset(),!0)},e.prototype.Apply=function(){this.sprite.clip.Set(this.x,this.y,this.w,this.h),this.sprite.w=this.w,this.sprite.h=this.h},e.prototype.Reset=function(){this.timer=this.rate},t.Animator.Frame=e}},function(t,e){t.exports=function(t){t.Geom={},t.Style={},t.Debug={},t.Math={},t.Utils={},t.Entity={},t.Path={},t.Event={},t.Time={},t.Input={},t.CP={},t.Load={},t.Animator={},t.VERSION="0.0.71 (Omega)",console.log("%cnenkraft %cversion %c"+t.VERSION,"color:cyan;background-color:black;font-family:Arial;font-size:16px;font-weight:900;","color:magenta;background-color:black;font-family:Arial;font-size:16px;","color:yellow;background-color:black;font-family:Arial;font-size:18px;")}},function(t,e){t.exports=function(){"use strict";function t(e,o,n,i,r){if(!(this instanceof t))return new t(e,o,n,i,r);this.id=e.split(" "),this.handle=o,this.info=n,this.data={},void 0!==r&&(this.optionPrefix=r),void 0!==i&&(this.continueToPrime=i)}t.prototype=Object.create(null),t.prototype.constructor=t,t.prototype.dataSeparator="=",t.prototype.options=null,t.prototype.allOptionIds=null,t.prototype.fullInfo=null,t.prototype.optionPrefix=null,t.prototype.continueToPrime=!0,t.prototype.Execute=function(t,e){this.HandleData(t,e),!0===this.HandleOptions(t,e)&&this.handle(t,e)},t.prototype.AddOption=function(t,e,o,n,i,r){r=void 0===r?this.optionPrefix:r,null!==r&&(t=t.replace(/\S+/g,r+"$&")),null===this.options&&(this.options=[]),n=void 0===n?0:n;var s=new nk.CP.Option(t,e,o,n,i);s.command=this;for(var a,p=0,c=this.options,h=c.length;p<h;++p)if(a=c[p],a.priority<=n)return nk.Utils.ArrayInsert(c,s,p),this.allOptionIds=this.GetAllOptionIds(),this;return this.options.push(s),this.allOptionIds=this.GetAllOptionIds(),this},t.prototype.HandleData=function(t,e){for(var o,n,i=t.slice(),r=0,s=i.length,a=this.dataSeparator;r<s;++r)o=i[r],n=o.split(a),2===n.length&&(t.splice(r,1),e[n[0]]=n[1])},t.prototype.HandleOptions=function(t,e){if(0===t.length)return this.continueToPrime;var o=this.GetAndRemoveMatchingOptionIds(t);if(null===o)return this.continueToPrime;for(var n,i=0,r=o.length;i<r;++i)if(n=this.GetOptionById(o[i]),!0===n.Execute(t,e))return!1;return this.continueToPrime},t.prototype.GetOptionById=function(t){for(var e,o=0,n=this.options,i=n.length;o<i;++o)if(e=n[o],-1!==e.id.indexOf(t))return e;return null},t.prototype.GetAllOptionIds=function(){for(var t=[],e=0,o=this.options,n=o.length;e<n;++e)t=t.concat(o[e].id);return t},t.prototype.GetAndRemoveMatchingOptionIds=function(t){var e=this.allOptionIds;if(null===e)return null;for(var o=[],n=0,i=e.length;n<i;++n){var r=t.indexOf(e[n]);-1!==r&&o.push(t.splice(r,1)[0])}return o},t.prototype.GenerateInfoString=function(){for(var t,e="COMMAND: "+this.id.join(", ")+" -> "+this.info+"\n",o=0,n=this.options,i=n.length;o<i;++o)t=n[o],e+="OPTION: "+t.id.join(", ")+" -> "+t.info+"\n";return e},nk.CP.Command=t}},function(t,e){t.exports=function(){"use strict";function t(e,o,n,i,r){if(!(this instanceof t))return new t(e,o,n,i,r);this.id=e.split(" "),this.handle=o,this.info=n,void 0!==i&&(this.priority=i),void 0!==r&&(this.breakIfExecuted=r),this.data={}}t.prototype=Object.create(null),t.prototype.constructor=t,t.prototype.command=null,t.prototype.priority=0,t.prototype.breakIfExecuted=!1,t.prototype.Execute=function(t,e){return this.handle(t,e),this.breakIfExecuted},nk.CP.Option=t}},function(t,e){t.exports=function(){"use strict";function t(e){if(!(this instanceof t))return new t(e);this.commands=[]}t.prototype=Object.create(null),t.prototype.constructor=t,t.prototype.splitter=" ",t.prototype.Add=function(t){this.commands.push(t)},t.prototype.Get=function(t){for(var e,o=0,n=this.commands,i=n.length;o<i;++o)if(e=this.commands[o])for(var r=0,s=e.id.length;r<s;++r)if(e.id[r]===t)return e;return null},t.prototype.Parse=function(t){var e=String(t).split(this.splitter),o=e.shift(),n=this.Get(o);return n?(n.Execute(e,{}),null):o},nk.CP.Register=t}},function(t,e){t.exports=function(t){"use strict";t.Math.PII;t.Debug.Draw={},t.Debug.BOUNDS_STYLE=null,t.Debug.Draw.Polygon2D=function(){},t.Debug.Draw.AABB2D=function(){},t.Debug.Draw.Circle=function(){},t.Debug.Draw.Text=function(){}}},function(t,e){t.exports=function(t){"use strict";function e(o,n){if(!(this instanceof e))return new Container(o,n);this.position=new t.Vector2D(o,n),this.transform=new t.Math.TransformationMatrix2D,this.scale=new t.Vector2D(1,1),this.skew=new t.Vector2D(0,0),this.anchor=new t.Vector2D,this.children=[],this.data={}}e.prototype=Object.create(null),e.prototype.constructor=e,e.SimpleTransformation=function(t){var e,o,n=this.position,i=this.anchor,r=this.transform,s=this.parent;if(null!==s){var a=s.transform;e=r.SetAndGetX(n.x+a.GetX()-i.x*this.w),o=r.SetAndGetY(n.y+a.GetY()-i.y*this.h)}else e=r.SetAndGetX(n.x-i.x*this.w),o=r.SetAndGetY(n.y-i.y*this.h);t.setTransform(1,0,0,1,e,o)},e.ComplexTransformation=function(t){var e,o,n,i,r,s=this.scale,a=this.skew,p=this.position,c=this.anchor,h=this.transform,u=this.parent,l=0,y=0;if(null!==u){var f=u.transform;e=h.SetAndGetX(p.x+f.GetX()-c.x*this.w),o=h.SetAndGetY(p.y+f.GetY()-c.y*this.h),n=h.SetAndGetScaleX(s.x*f.GetScaleX()),i=h.SetAndGetScaleY(s.y*f.GetScaleY()),l=h.SetAndGetSkewX(a.x+f.GetSkewX()),y=h.SetAndGetSkewY(a.y+f.GetSkewY()),r=h.SetAndGetRotation(this.rotation+f.GetRotation())}else e=h.SetAndGetX(p.x-c.x*this.w),o=h.SetAndGetY(p.y-c.y*this.h),n=h.SetAndGetScaleX(s.x),i=h.SetAndGetScaleY(s.y),l=h.SetAndGetSkewX(a.x),y=h.SetAndGetSkewY(a.y),r=h.SetAndGetRotation(this.rotation);t.setTransform(n,l,y,i,e,o),t.rotate(r)},e.prototype.w=0,e.prototype.h=0,e.prototype.render=!0,e.prototype.rotation=0,e.prototype.parent=null,e.prototype.Draw=function(t){!0===this.render&&(this.ApplyTransformation(t),this.DrawChildren(t))},e.prototype.ApplyTransformation=e.ComplexTransformation,e.prototype.DrawChildren=function(t){for(var e,o=0,n=this.children,i=n.length;o<i;++o)e=n[o],e.Draw&&e.Draw(t)},e.prototype.AddChild=function(t){var e=t.parent;null!==e&&e.RemoveChild(t),this.children.push(t),t.parent=this},e.prototype.AddChildren=function(){for(var t,e,o=0,n=arguments.length;o<n;++o)t=arguments[o],e=t.parent,null!==e&&e.RemoveChild(t),this.children.push(t),t.parent=this},e.prototype.RemoveChild=function(t){var e=this.children,o=e.indexOf(t);-1!==o&&(e.splice(o,1),t.parent=null)},e.prototype.RemoveChildren=function(){for(var t,e,o=this.children,n=0,i=arguments.length;n<i;++n)t=arguments[n],t.parent,-1!==(e=o.indexOf(t))&&(o.splice(e,1),t.parent=this)},e.prototype.SendToFront=function(){if(null!==this.parent){var t=this.parent.children,e=t.indexOf(this);-1!==e&&t.push(t.splice(e,1)[0])}},e.prototype.SendToBack=function(){if(null!==this.parent){var t=this.parent.children,e=t.indexOf(this);-1!==e&&t.splice(0,0,t.splice(e,1)[0])}},e.prototype.Dump=function(){this.children.length=0},e.prototype.Destroy=function(){this.Dump(),null!==this.parent&&this.parent.RemoveChild(this)},t.Entity.Container2D=e,t.Container2D=e,Object.defineProperty(e.prototype,"x",{set:function(t){this.position.x=t},get:function(){return this.position.x}}),Object.defineProperty(e.prototype,"y",{set:function(t){this.position.y=t},get:function(){return this.position.y}})}},function(t,e){t.exports=function(t){"use strict";function e(t,n,i){if(!(this instanceof e))return new e(t,n,i);o.call(this,t,n),void 0!==i&&(void 0!==i.w&&void 0!==i.h?(this.w=i.w,this.h=i.h):void 0!==i.diameter?this.w=this.h=i.diameter:void 0!==i.aabb&&(this.w=i.aabb.w,this.h=i.aabb.h),this.path=i)}var o=t.Entity.Container2D;e.prototype=Object.create(o.prototype),e.prototype.constructor=e,e.prototype.path=null,e.prototype.visible=!0,e.prototype.Draw=function(t){if(!0===this.render){var e=this.path;this.ApplyTransformation(t),e&&e.Draw&&!0===this.visible&&e.Draw(t),this.DrawChildren(t)}},e.prototype.IntersectsPoint=function(t){var e=t.SubtractVC(this.position);return this.path.IntersectsPoint(e,this.anchor,this.w,this.h)},t.Entity.Graphic2D=e,t.Graphic2D=e}},function(t,e){t.exports=function(t){"use strict";function e(t,n,i){if(!(this instanceof e))return new e(t,n,i);o.call(this,t,n),void 0===i&&(i=e.DEFAULT_TEXTURE),this.SetTexture(i)}var o=t.Entity.Container2D;e.prototype=Object.create(o.prototype),e.prototype.constructor=e,e.DEFAULT_TEXTURE=t.Utils.GenerateTexture(function(){var e=new t.Path.Polygon2D;return e.AddPoint(new t.Vector2D(0,0)),e.AddPoint(new t.Vector2D(100,0)),e.AddPoint(new t.Vector2D(100,100)),e.AddPoint(new t.Vector2D(0,100)),e.AddPoint(new t.Vector2D(0,0)),e.AddPoint(new t.Vector2D(50,50)),e.AddPoint(new t.Vector2D(100,0)),e.AddPoint(new t.Vector2D(50,50)),e.AddPoint(new t.Vector2D(100,100)),e.AddPoint(new t.Vector2D(50,50)),e.AddPoint(new t.Vector2D(0,100)),e.ComputeBounds(),e.style.fill.fillStyle="rgba(66,00,66,0.5)",e.style.stroke.strokeStyle="#F00",e.style.stroke.lineWidth=3,new t.Graphic2D(0,0,e)}),e.prototype.shape=null,e.prototype.clip=null,e.prototype.texture=null,e.prototype.visible=!0,e.prototype.Draw=function(t){if(!0===this.render){this.ApplyTransformation(t);var e=this.clip,o=e.tl,n=e.br,i=this.w,r=this.h;t.drawImage(this.texture,o.x,o.y,n.x,n.y,0,0,i,r),this.DrawChildren(t)}},e.prototype.IntersectsPoint=function(t){var e=t.SubtractVC(this.position);return this.shape.IntersectsPoint(e,this.anchor,this.w,this.h)},e.prototype.SetTexture=function(e){this.texture=e,this.w=e.naturalWidth,this.h=e.naturalHeight,this.clip=new t.Geom.AABB2D(0,0,this.w,this.h),this.shape=new t.Geom.AABB2D(0,0,this.w,this.h)},t.Entity.Sprite=e,t.Sprite=e}},function(t,e){t.exports=function(){"use strict";function t(o,n,i,r){if(!(this instanceof t))return new t(o,n,i,r);e.call(this,n,i),this.canvas=o,this.rc=o.getContext("2d"),this.w=o.width,this.h=o.height,this.ticker=new nk.Time.Ticker(this.Process.bind(this),60,r),this.onProcess=new nk.Event.LocalEvent,this.mouse=new nk.Input.Mouse(o,n,i)}var e=nk.Entity.Container2D;t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.prototype.backgroundColor="rgba(0,0,0,1)",t.prototype.clear=!0,t.prototype.PreDraw=function(t){t.setTransform(1,0,0,1,0,0),!0===this.clear?t.clearRect(0,0,this.w,this.h):(t.fillStyle=this.backgroundColor,t.fillRect(0,0,this.w,this.h))},t.prototype.Process=function(t){var e=this.rc;this.PreDraw(e),this.Draw(e),this.onProcess.Dispatch(this,t)},nk.Entity.Stage2D=t,nk.Stage2D=t}},function(t,e){t.exports=function(t){"use strict";function e(n,i,r){if(!(this instanceof e))return new e(n,i);o.call(this,n,i),void 0!==r&&(this.text=r),this.style=t.Style.CreateSaT()}var o=t.Entity.Container2D;e.prototype=Object.create(o.prototype),e.prototype.constructor=e,e.prototype.text="",e.prototype.visible=!0,e.prototype.maxWidth=void 0,e.prototype.Draw=function(t){if(!0===this.render){this.ApplyTransformation(t);var e=this.style;!0===this.visible&&(!0===e.shadow.applied&&e.shadow.Apply(t),!0===e.text.applied&&(e.text.Apply(t),t.fillText(this.text,0,0,this.maxWidth),t.strokeText(this.text,0,0,this.maxWidth))),this.DrawChildren(t)}},e.prototype.IntersectsPoint=function(t){return!1},t.Entity.Text=e,t.Text=e}},function(t,e){t.exports=function(){"use strict";function t(){if(!(this instanceof t))return new t;this.listeners=[]}t.prototype=Object.create(null),t.prototype.constructor=t,t.prototype.stopPropagation=!1,t.prototype.target=null,t.prototype.data=null,t.prototype.GetListenerIndex=function(t,e){var o=this.listeners;if(0===o.length)return-1;for(var n,i=0,r=o.length;i<r;++i)if(n=o[i],n.context===e&&n.handle===t)return i;return-1},t.prototype.Add=function(t,e,o){var n=new nk.LocalListener(this,e,t,o);this.listeners.push(n)},t.prototype.Remove=function(t,e){var o=this.GetListenerIndex(t,e);-1!==o&&this.listeners.splice(o,1)},t.prototype.Dump=function(t){var e=this.listeners;if(0===e.length)return-1;if(void 0!==t)for(var o,n=0,i=e.length;n<i;++n)o=e[n],o.context===t&&this.listeners.splice(n,1);else this.listeners.length=0},t.prototype.Dispatch=function(t,e){var o=this.listeners;if(0!==o.length){o=o.slice(),this.stopPropagation=!1,this.target=t,this.data=e;for(var n,i=0,r=o.length;i<r&&(n=o[i],n.Execute(this),!0!==this.stopPropagation);++i);delete this.target,delete this.data}},nk.Event.LocalEvent=t,nk.LocalEvent=t}},function(t,e){t.exports=function(){"use strict";function t(e,o,n,i){if(!(this instanceof t))return new t(e,_listenerContex,n,i);this.context=o,this.holderContext=e,this.handle=n,this.removeOnNextCall=i}t.prototype=Object.create(null),t.prototype.constructor=t,t.prototype.Execute=function(){this.handle.apply(this.context,arguments),!0===this.removeOnNextCall&&this.Remove()},t.prototype.Remove=function(){this.holderContext.Remove(this.handle,this.context)},nk.Event.LocalListener=t,nk.LocalListener=t}},function(t,e){t.exports=function(t){"use strict";function e(o,n,i,r){if(!(this instanceof e))return new e(o,n,i,r);o instanceof t.Vector2D&&n instanceof t.Vector2D?(this.tl=o,this.br=n):void 0!==o&&void 0!==n&&void 0!==o.x&&void 0!==o.y&&void 0!==n.x&&void 0!==n.y?(this.tl=new t.Vector2D(o.x,o.y),this.br=new t.Vector2D(n.x,n.y)):void 0!==o&&void 0!==n&&void 0!==i&&void 0!==r?(this.tl=new t.Vector2D(o,n),this.br=new t.Vector2D(i,r)):(this.tl=new t.Vector2D,this.br=new t.Vector2D),this.CalculateWH()}e.prototype=Object.create(null),e.prototype.constructor=e,e.TYPE=1,e.prototype.TYPE=e.TYPE,e.prototype.w=0,e.prototype.h=0,e.prototype.Set=function(t,e,o,n){this.tl.x=t,this.tl.y=e,this.br.x=o,this.br.y=n,this.CalculateWH()},e.prototype.CalculateWH=function(){this.w=this.br.x-this.tl.x,this.h=this.br.y-this.tl.y},e.prototype.IntersectsPoint=function(t,e,o,n){return void 0!==e&&(0!==e.x&&(t.x+=e.x*o),0!==e.y&&(t.y+=e.y*n)),!(t.x<this.tl.x||t.x>this.br.x||t.y<this.tl.y||t.y>this.br.y)},e.prototype.ContainsPoint=function(t,e,o,n){return void 0!==e&&(0!==e.x&&(t.x+=e.x*o),0!==e.y&&(t.y+=e.y*n)),t.x>this.tl.x&&t.x<this.br.x&&t.y>this.tl.y&&t.y<this.br.y},t.Geom.AABB2D=e}},function(t,e){t.exports=function(t){"use strict";function e(o,n,i){if(!(this instanceof e))return new e(o,n,i);this.center=new t.Vector2D(o,n),this.radius=void 0===i?32:i}e.prototype=Object.create(null),e.prototype.constructor=e,e.TYPE=2,e.prototype.TYPE=e.TYPE,e.prototype.diameter=0,e.prototype.radiusSquared=0,e.prototype.radiusUnsquared=0,e.prototype.IntersectsPoint=function(t,e,o,n){return void 0!==e&&(0!==e.x&&(t.x+=e.x*o),0!==e.y&&(t.y+=e.y*n)),this.radiusSquared>=this.center.GetDistanceSquaredV(t)},t.Geom.Circle=e,Object.defineProperty(e.prototype,"x",{set:function(t){this.center.x=t},get:function(){return this.center.x}}),Object.defineProperty(e.prototype,"y",{set:function(t){this.center.y=t},get:function(){return this.center.y}}),Object.defineProperty(e.prototype,"radius",{set:function(t){this.radiusUnsquared=t,this.radiusSquared=t*t,this.diameter=2*t},get:function(){return this.radiusUnsquared}})}},function(t,e){t.exports=function(t){"use strict";function e(o,n,i,r){if(!(this instanceof e))return new e(o,n,i,r);void 0!==o&&o.x&&o.y&&void 0!==n&&n.x&&n.y?(this.s=o,this.e=n):void 0!==o&&void 0!==n&&void 0!==i&&void 0!==r?(this.s=new t.Vector2D(o,n),this.e=new t.Vector2D(i,r)):(this.s=new t.Vector2D,this.e=new t.Vector2D)}e.prototype=Object.create(null),e.prototype.constructor=e,e.TYPE=0,e.prototype.TYPE=e.TYPE,e.prototype.Stretch=function(t){var e=.5*t;this.s.PushFromV(this.e,e),this.e.PushFromV(this.s,e)},e.prototype.Rotate=function(t,e,o){var n=this.s.Copy();n.AddV(this.e),n.Multiply(e,void 0===o?e:o),this.s.RotateAroundV(n,t),this.e.RotateAroundV(n,t)},e.prototype.IntersectsPoint=function(){return!1},t.Geom.Line2D=e}},function(t,e){t.exports=function(t){"use strict";function e(){if(!(this instanceof e))return new e;this.vertices=[]}e.prototype=Object.create(null),e.prototype.constructor=e,e.TYPE=3,e.Construct={},e.Construct.Rectangular=function(e,o,n,i,r){var s=new t.Vector2D(o,n),a=new t.Vector2D(o+i,n),p=new t.Vector2D(o+i,n+r),c=new t.Vector2D(o,n+r);e.Recreate([s,a,p,c]),e.ComputeBounds()},e.Construct.Triangular=function(e,o,n,i,r){var s=new t.Vector2D(o,n),a=new t.Vector2D(o+.5*i,n+r),p=new t.Vector2D(o-.5*i,n+r);e.Recreate([s,a,p]),e.ComputeBounds()},e.Construct.Cyclic=function(e,o,n,i,r){e.Recreate([]);var s,a,p,c=0,h=r,u=2*Math.PI/h;for(c;c<h;++c)p=u*c,s=Math.cos(p)*i,a=Math.sin(p)*i,e.AddPoint(new t.Vector2D(o+s,n+a));e.ComputeBounds()},e.Construct.Star=function(e,o,n,i,r,s){e.Recreate([]);var a,p,c,h,u=0,l=2*s,y=2*Math.PI/l;for(u;u<l;++u)h=0==(1&u)?i:r,c=y*u,a=Math.cos(c)*h,p=Math.sin(c)*h,e.AddPoint(new t.Vector2D(o+a,n+p));e.ComputeBounds()},e.Construct.Butterfly=function(o,n,i,r,s){o.Recreate([]);var a,p,c,h=0,u=e.Construct.Butterfly.C;for(h;h<r;++h)c=h*u._1*Math.PI/r,a=Math.cos(c)*(Math.exp(Math.cos(c))-u._2*Math.cos(u._3*c)-Math.pow(Math.sin(c/u._4),u._5))*s,p=Math.sin(c)*(Math.exp(Math.cos(c))-u._2*Math.cos(u._3*c)-Math.pow(Math.sin(c/u._4),u._5))*s,o.AddPoint(new t.Vector2D(n+a,i+p));o.ComputeBounds()},e.Construct.Butterfly.C={_1:24,_2:2,_3:4,_4:12,_5:5,Reset:function(){this._1=24,this._2=2,this._3=4,this._4=12,this._5=5}},e.Construct.Supershape=function(o,n,i,r,s,a,p,c,h){p=void 0===p?1:p,c=void 0===c?1:c,h=void 0===h?1:h,o.Recreate([]);var u,l,y,f,d,v,x=0,m=s,S=e.Construct.Supershape.C;for(x;x<m;++x)y=x*Math.PI*2/s,d=Math.cos(a*y/4)/S._A,d=Math.abs(d),d=Math.pow(d,c),v=Math.sin(a*y/4)/S._B,v=Math.abs(v),v=Math.pow(v,h),f=Math.pow(d+v,1/p),0===Math.abs(f)?(u=0,l=0):(f=1/f,u=Math.cos(y)*f*r,l=Math.sin(y)*f*r),o.AddPoint(new t.Vector2D(n+u,i+l));o.ComputeBounds()},e.Construct.Supershape.C={_A:1,_B:1},e.prototype.TYPE=e.TYPE,e.prototype.aabb=null,e.prototype.dirtyBounds=!0,e.prototype.AddPoint=function(t){this.vertices.push(t)},e.prototype.AddPoints=function(t){this.vertices=this.vertices.concat(t)},e.prototype.Recreate=function(t){this.vertices=t},e.prototype.ComputeBounds=function(){null===this.aabb&&(this.aabb=new t.Geom.AABB2D);for(var e,o=1/0,n=-1/0,i=1/0,r=-1/0,s=0,a=this.vertices,p=a.length;s<p;++s)e=a[s],e.x<o&&(o=e.x),e.x>n&&(n=e.x),e.y<i&&(i=e.y),e.y>r&&(r=e.y);this.aabb.Set(o,i,n,r),this.dirtyBounds=!1},e.prototype.Rotate=function(t,e,o,n){!0===this.dirtyBounds&&!0===n?this.ComputeBounds():null===this.aabb&&this.ComputeBounds();var i=this.aabb,r=i.tl.Copy();r.AddV(i.br),r.Multiply(e,void 0===o?e:o);var s,a=0,p=this.vertices,c=p.length;for(t=t,a;a<c;++a)s=p[a],s.RotateAroundV(r,t);this.dirtyBounds=!0},e.prototype.IntersectsPoint=function(t){return!0===this.dirtyBounds&&this.ComputeBounds(),!1!==this.aabb.IntersectsPoint(t)},t.Geom.Polygon2D=e}},function(t,e){t.exports=function(){"use strict";function t(e){if(!(this instanceof t))return new t(e);this.element=e}t.prototype=Object.create(null),t.prototype.constructor=t,nk.Input.Keyboard=t}},function(t,e){t.exports=function(){"use strict";function t(e,o,n){if(!(this instanceof t))return new t(e,o,n);this.element=e,this.position=new nk.Vector2D,this.scale=new nk.Vector2D(1,1),this.anchor=new nk.Vector2D,this.offset=new nk.Vector2D(o,n),this.element.addEventListener("mousemove",this.OnMove.bind(this)),this.element.addEventListener("mousedown",this.OnDown.bind(this)),this.element.addEventListener("mouseup",this.OnUp.bind(this)),this.element.addEventListener("mouseleave",this.OnLeave.bind(this)),this.onMove=new nk.Event.LocalEvent,this.onDown=new nk.Event.LocalEvent,this.onUp=new nk.Event.LocalEvent,this.onLeave=new nk.Event.LocalEvent}t.prototype=Object.create(null),t.prototype.constructor=t,t.prototype.OnMove=function(t){t.preventDefault(),t.stopPropagation();var e=this.element,o=this.position;o.Set(t.pageX,t.pageY),o.Subtract(e.offsetLeft,e.offsetTop),o.SubtractV(this.offset),o.DivideV(this.scale),this.onMove.Dispatch(this,o)},t.prototype.OnDown=function(t){t.preventDefault(),t.stopPropagation(),this.onDown.Dispatch(this,this.position)},t.prototype.OnUp=function(t){t.preventDefault(),t.stopPropagation(),this.onUp.Dispatch(this,this.position)},t.prototype.OnLeave=function(t){t.preventDefault(),t.stopPropagation(),this.onLeave.Dispatch(this,this.position)},nk.Input.Mouse=t,Object.defineProperty(t.prototype,"x",{get:function(){return this.position.x}}),Object.defineProperty(t.prototype,"y",{get:function(){return this.position.y}})}},function(t,e){t.exports=function(t){"use strict";function e(o){if(!(this instanceof e))return new e(o);this.cache=[],this.onTextureLoaded=new t.Event.LocalEvent,this.onComplete=new t.Event.LocalEvent,this.OnLoad=this.OnLoad.bind(this),void 0!==o&&this.Load(o)}e.prototype=Object.create(null),e.prototype.constructor=e,e.prototype.count=0,e.prototype.loading=!1,e.prototype.toLoad=null,e.prototype.Load=function(t){null===this.toLoad&&(this.toLoad=[]),this.toLoad=this.toLoad.concat(t),!1===this.loading&&(this.count=0,this.loading=!0,this.Haul(this.count))},e.prototype.Haul=function(t){var e=this.toLoad[t];if(void 0!==e){if(null!==this.Get(e.id))throw new Error("Invalid identifier");var o=new Image;o.onload=this.OnLoad,o.src=e.src,o.data={id:e.id}}else this.onComplete.Dispatch(this,{cache:this.cache}),this.count=0,this.loading=!1,this.toLoad=null},e.prototype.OnLoad=function(t){var e={id:t.target.data.id,image:t.target};this.cache.push(e),delete t.target.data,this.onTextureLoaded.Dispatch(e,{count:this.count}),this.Haul(++this.count)},e.prototype.Get=function(t){for(var e,o=0,n=this.cache.length;o<n;++o)if((e=this.cache[o])&&e.id===t)return e.image;return null},t.Load.TextureLoader=e}},function(t,e){t.exports=function(t){"use strict";var e={AABB2DvsAABB2D:{Relative:{}},CirclevsCircle:{Relative:{}}};e.VectorSortMinMag=function(t,e){return t.GetMagnitude()-e.GetMagnitude()},e.AABB2DvsAABB2D.Intersect=function(t,e){var o=t.tl,n=e.tl;return o.x<n.x+t.w&&n.x<o.x+e.w&&o.y<n.y+t.h&&n.y<o.y+e.h},e.AABB2DvsAABB2D.Collide=function(o,n){var i=o.tl,r=n.tl,s=(o.br,n.br,r.x+o.w),a=i.x+n.w,p=r.y+o.h,c=i.y+n.h;if(i.x<s&&r.x<a&&i.y<p&&r.y<c){var h=[new t.Vector2D(i.x-s,0),new t.Vector2D(a-r.x,0),new t.Vector2D(0,i.y-p),new t.Vector2D(0,c-r.y)];return h.sort(e.VectorSortMinMag),h[0]}return null},e.CirclevsCircle.Intersect=function(t,e){var o=t.radius+e.radius;return o*o>=t.center.GetDistanceSquaredV(e.center)},e.CirclevsCircle.Collide=function(e,o){var n=e.radius,i=e.radius,r=n+i,s=e.center.Copy(),a=o.center.Copy(),p=a.SubtractVC(s),c=Math.abs(p.GetMagnitudeSquared());if(r*r>c){var h=Math.sqrt(c),u=(e.radiusSquared-o.radiusSquared+c)/(h+h),l=new t.Vector2D(s.x+p.x*u/h,s.y+p.y*u/h),y=Math.sqrt(o.radiusSquared-u*u)/h,f=-p.y*y,d=p.x*y,v=new t.Vector2D(l.x+f,l.y+d),x=new t.Vector2D(l.x-f,l.y-d),m=s.SubtractVC(a);return m.Divide(r,r),{poc:[l,v,x],mtv:m,delta:p}}return null},e.AABB2DvsAABB2D.Relative.Intersect=function(t,e){var o=t.shape,n=o.w,i=o.h,r=t.anchor,s=e.shape,a=s.w,p=s.h,c=e.anchor,h=o.tl.SubtractVC(t.relative),u=s.tl.SubtractVC(e.relative);return void 0!==r&&(0!==r.x&&(h.x+=r.x*n),0!==r.y&&(h.y+=r.y*i)),void 0!==c&&(0!==c.x&&(u.x+=c.x*a),0!==c.y&&(u.y+=c.y*p)),h.x<u.x+n&&u.x<h.x+a&&h.y<u.y+i&&u.y<h.y+p},e.AABB2DvsAABB2D.Relative.Collide=function(o,n){var i=o.shape,r=i.w,s=i.h,a=o.anchor,p=n.shape,c=p.w,h=p.h,u=n.anchor,l=i.tl.SubtractVC(o.relative),y=p.tl.SubtractVC(n.relative);void 0!==a&&(0!==a.x&&(l.x+=a.x*r),0!==a.y&&(l.y+=a.y*s)),void 0!==u&&(0!==u.x&&(y.x+=u.x*c),0!==u.y&&(y.y+=u.y*h));var f=y.x+r,d=l.x+c,v=y.y+s,x=l.y+h;if(l.x<f&&y.x<d&&l.y<v&&y.y<x){var m=[new t.Vector2D(l.x-f,0),new t.Vector2D(d-y.x,0),new t.Vector2D(0,l.y-v),new t.Vector2D(0,x-y.y)];return m.sort(e.VectorSortMinMag),m[0]}return null},e.CirclevsCircle.Relative.Intersect=function(t,e){var o=t.shape,n=e.shape,i=o.radius+n.radius,r=t.anchor,s=e.anchor,a=t.relative.Copy(),p=e.relative.Copy();return void 0!==r&&(0!==r.x&&(a.x-=r.x*o.diameter),0!==r.y&&(a.y-=r.y*o.diameter)),void 0!==s&&(0!==s.x&&(p.x-=s.x*n.diameter),0!==s.y&&(p.y-=s.y*n.diameter)),i*i>=a.GetDistanceSquaredV(p)},e.CirclevsCircle.Relative.Collide=function(e,o){var n=e.shape,i=o.shape,r=n.radius,s=i.radius,a=r+s,p=e.anchor,c=o.anchor,h=e.relative.Copy(),u=o.relative.Copy();void 0!==p&&(0!==p.x&&(h.x+=p.x*n.diameter),0!==p.y&&(h.y+=p.y*n.diameter)),void 0!==c&&(0!==c.x&&(u.x+=c.x*i.diameter),0!==c.y&&(u.y+=c.y*i.diameter));var l=u.SubtractVC(h),y=Math.abs(l.GetMagnitudeSquared());if(a*a>y){var f=Math.sqrt(y),d=(n.radiusSquared-i.radiusSquared+y)/(f+f),v=new t.Vector2D(h.x+l.x*d/f,h.y+l.y*d/f),x=Math.sqrt(n.radiusSquared-d*d)/f,m=-l.y*x,S=l.x*x,w=new t.Vector2D(v.x+m,v.y+S),A=new t.Vector2D(v.x-m,v.y-S),D=h.SubtractVC(u);return D.Divide(a,a),{poc:[v,w,A],mtv:D,delta:l}}return null},e.CirclevsCircle.Relative.ElasticResponse=function(t,e,o){var n=o.delta.Copy();n.Normalize();var i=t.mass,r=e.mass,s=t.velocity,a=e.velocity,p=s.GetDotV(n),c=a.GetDotV(n),h=2*(p-c)/(i+r);s.Set(s.x-h*r*n.x,s.y-h*r*n.y),a.Set(a.x+h*i*n.x,a.y+h*i*n.y),t.relative.AddV(s),e.relative.AddV(a)},t.Math.Collision2D=e}},function(t,e){t.exports=function(t){"use strict";t.Math.PII=2*Math.PI,t.Math.DEGREES_TO_RADIANS=Math.PI/180,t.Math.RADIANS_TO_DEGREES=180/Math.PI,t.Math.DegreesToRadians=function(e){return e*t.Math.DEGREES_TO_RADIANS},t.Math.DTR=t.Math.DegreesToRadians,t.Math.RadiansToDegrees=function(e){return e*t.Math.RADIANS_TO_DEGREES},t.Math.RTD=t.Math.RadiansToDegrees,t.Math.PrecisionRound=function(t,e){var o=Math.pow(10,e);return Math.round(o*t)/o},t.Math.PR=t.Math.PrecisionRound,t.Math.Spread=function(t,e,o,n){return t-o*(e-1)*.5+n*o},Object.defineProperty(t.Math,"PII",{writable:!1}),Object.defineProperty(t.Math,"DEGREES_TO_RADIANS",{writable:!1}),Object.defineProperty(t.Math,"RADIANS_TO_DEGREES",{writable:!1})}},function(t,e){t.exports=function(t){"use strict";function e(){if(!(this instanceof e))return new e;this.matrix=new Float32Array(7),this.matrix[0]=this.matrix[1]=1}e.prototype=Object.create(null),e.prototype.constructor=e,e.prototype.GetScaleX=function(){return this.matrix[0]},e.prototype.GetScaleY=function(){return this.matrix[1]},e.prototype.GetSkewX=function(){return this.matrix[2]},e.prototype.GetSkewY=function(){return this.matrix[3]},e.prototype.GetX=function(){return this.matrix[4]},e.prototype.GetY=function(){return this.matrix[5]},e.prototype.GetRotation=function(){return this.matrix[6]},e.prototype.SetAndGetScaleX=function(t){return this.matrix[0]=t,t},e.prototype.SetAndGetScaleY=function(t){return this.matrix[1]=t,t},e.prototype.SetAndGetSkewX=function(t){return this.matrix[2]=t,t},e.prototype.SetAndGetSkewY=function(t){return this.matrix[3]=t,t},e.prototype.SetAndGetX=function(t){return this.matrix[4]=t,t},e.prototype.SetAndGetY=function(t){return this.matrix[5]=t,t},e.prototype.SetAndGetRotation=function(t){return this.matrix[6]=t,t},t.Math.TransformationMatrix2D=e}},function(t,e){t.exports=function(){"use strict";function t(o,n,i,r,s,a){if(!(this instanceof t))return new t(o,n,i,r,s,a);e.call(this,o,n),this.floor=new nk.Vector2D(i,r),this.ceil=new nk.Vector2D(s,a)}var e=nk.Vector2D;t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.prototype.invert=!1,t.prototype.Copy=function(){var e=new t(this.x,this.y,this.floor.x,this.floor.y,this.ceil.x,this.ceil.y);return e.invert=this.invert,e},t.prototype.Limit=function(){var t=!1===this.invert?nk.Utils.Clamp:nk.Utils.InverseClamp,e=this.floor,o=this.ceil;this.x=t(this.x,e.x,o.x),this.y=t(this.y,e.y,o.y)},nk.Math.LimitVector2D=t,nk.LimitVector2D=t}},function(t,e){t.exports=function(t){"use strict";function e(t,o){if(!(this instanceof e))return new e(t,o);void 0!==t&&void 0!==t.x&&void 0!==t.y?(this.x=t.x,this.y=t.y):void 0!==t&&(void 0===o?(this.x=t,this.y=t):(this.x=t,this.y=o))}e.prototype=Object.create(null),e.prototype.constructor=e,e.prototype.x=0,e.prototype.y=0,e.prototype.Copy=function(){return new e(this)},e.prototype.SetV=function(t){this.x=t.x,this.y=t.y},e.prototype.Set=function(t,e){void 0!==t&&void 0===e?(this.x=t,this.y=t):(this.x=t,this.y=e)},e.prototype.Is0=function(){return 0===this.x&&0===this.y},e.prototype.AddV=function(t){this.x+=t.x,this.y+=t.y},e.prototype.AddVC=function(t){var e=this.Copy();return e.AddV(t),e},e.prototype.Add=function(t,e){this.x+=t,this.y+=e},e.prototype.SubtractV=function(t){this.x-=t.x,this.y-=t.y},e.prototype.SubtractVC=function(t){var e=this.Copy();return e.SubtractV(t),e},e.prototype.Subtract=function(t,e){this.x-=t,this.y-=e},e.prototype.MultiplyV=function(t){this.x*=t.x,this.y*=t.y},e.prototype.MultiplyVC=function(t){var e=this.Copy();return e.MultiplyV(t),e},e.prototype.Multiply=function(t,e){this.x*=t,this.y*=e},e.prototype.DivideV=function(t){this.x/=t.x,this.y/=t.y},e.prototype.DivideVC=function(t){var e=this.Copy();return e.DivideV(t),e},e.prototype.Divide=function(t,e){this.x/=t,this.y/=e},e.prototype.Normalize=function(){var t=this.GetMagnitude();this.Divide(t,t)},e.prototype.Positive=function(){this.x=Math.abs(this.x),this.y=Math.abs(this.y)},e.prototype.Negative=function(){this.x=-Math.abs(this.x),this.y=-Math.abs(this.y)},e.prototype.Invert=function(){this.x=-1*this.x,this.y=-1*this.y},e.prototype.Rotate=function(t){var e=Math.sin(t),o=Math.cos(t),n=this.x,i=this.y;this.x=n*o-i*e,this.y=n*e+i*o},e.prototype.RotateAroundV=function(t,e){this.SubtractV(t),this.Rotate(e),this.AddV(t)},e.prototype.RotateAround=function(t,e,o){this.Subtract(t,e),this.Rotate(o),this.Add(t,e)},e.prototype.PushFromV=function(t,e){var o=this.Copy();o.SubtractV(t),o.Normalize(),o.Multiply(e,e),this.AddV(o)},e.prototype.PushFrom=function(t,e,o){var n=this.Copy();n.Subtract(t,e),n.Normalize(),n.Multiply(o,o),this.AddV(n)},e.prototype.GetAngle=function(){return Math.atan2(this.y,this.x)},e.prototype.GetAngleBetween=function(t,e){return Math.atan2(this.y-e,this.x-t)},e.prototype.GetAngleBetweenV=function(t){return Math.atan2(this.y-t.y,this.x-t.x)},e.prototype.GetDotV=function(t){return this.x*t.x+this.y*t.y},e.prototype.GetDot=function(t,e){return this.x*t+this.y*e},e.prototype.GetCrossV=function(t){return this.x*t.y+this.y*t.x},e.prototype.GetCross=function(t,e){return this.x*e+this.y*t},e.prototype.GetMagnitudeSquared=function(){return this.x*this.x+this.y*this.y},e.prototype.GetMagnitude=function(){return Math.sqrt(this.GetMagnitudeSquared())},e.prototype.GetDistanceV=function(t){var e=this.Copy();return e.SubtractV(t),e.GetMagnitude()},e.prototype.GetDistance=function(t,e){var o=this.Copy();return o.Subtract(t,e),o.GetMagnitude()},e.prototype.GetDistanceSquaredV=function(t){var e=this.Copy();return e.SubtractV(t),e.GetMagnitudeSquared()},e.prototype.GetDistanceSquared=function(t,e){var o=this.Copy();return o.Subtract(t,e),o.GetMagnitudeSquared()},e.prototype.IsEqualTo=function(t,e){return this.x===t&&this.y===e},e.prototype.IsEqualToV=function(t){return this.x===t.x&&this.y===t.y},e.prototype.GetLength=e.prototype.GetMagnitude,e.prototype.GetLengthSquared=e.prototype.GetMagnitudeSquared,t.Math.Vector2D=e,t.Vector2D=e}},function(t,e){t.exports=function(t){"use strict";function e(n,i,r,s){if(!(this instanceof e))return new e(n,i,r,s);o.call(this,n,i,r,s),this.style=t.Style.CreateFSSa()}var o=t.Geom.AABB2D;e.prototype=Object.create(o.prototype),e.prototype.constructor=e,e.prototype.Draw=function(t){var e=this.tl,o=this.br,n=this.style,i=n.fill,r=n.stroke,s=n.shadow;t.beginPath(),t.moveTo(e.x,e.y),t.lineTo(o.x,e.y),t.lineTo(o.x,o.y),t.lineTo(e.x,o.y),t.closePath(),!0===s.applied&&s.Apply(t),!0===i.applied&&(i.Apply(t),t.fill()),!0===r.applied&&(r.Apply(t),t.stroke())},t.Path.AABB2D=e}},function(t,e){t.exports=function(t){"use strict";function e(n,i,r){if(!(this instanceof e))return new e(n,i,r);o.call(this,n,i,r),this.style=t.Style.CreateFSSa()}var o=t.Geom.Circle;e.prototype=Object.create(o.prototype),e.prototype.constructor=e,e.prototype.Draw=function(e){var o=this.center,n=this.style,i=n.fill,r=n.stroke,s=n.shadow;e.beginPath(),e.arc(o.x,o.y,this.radius,0,t.Math.PII,!1),e.closePath(),!0===s.applied&&s.Apply(e),!0===i.applied&&(i.Apply(e),e.fill()),!0===r.applied&&(r.Apply(e),e.stroke())},t.Path.Circle=e}},function(t,e){t.exports=function(t){"use strict";function e(n,i,r,s){if(!(this instanceof e))return new e(n,i,r,s);o.call(this,n,i,r,s),this.style=t.Style.CreateSSa()}var o=t.Geom.Line2D;e.prototype=Object.create(o.prototype),e.prototype.constructor=e,e.prototype.Draw=function(t){var e=this.s,o=this.e,n=this.style,i=(n.fill,n.stroke),r=n.shadow;t.beginPath(),t.moveTo(e.x,e.y),t.lineTo(o.x,o.y),t.closePath(),!0===r.applied&&r.Apply(t),!0===i.applied&&(i.Apply(t),t.stroke())},t.Path.Line2D=e}},function(t,e){t.exports=function(t){"use strict";function e(){if(!(this instanceof e))return new e;o.call(this),this.style=t.Style.CreateFSSa()}var o=t.Geom.Polygon2D;e.prototype=Object.create(o.prototype),e.prototype.constructor=e,e.prototype.Draw=function(t){var e=this.style,o=e.fill,n=e.stroke,i=e.shadow,r=this.vertices,s=r[0];t.beginPath(),t.moveTo(s.x,s.y);for(var a=1,p=r.length;a<p;++a)s=r[a],t.lineTo(s.x,s.y);t.closePath(),!0===i.applied&&i.Apply(t),!0===o.applied&&(o.Apply(t),t.fill()),!0===n.applied&&(n.Apply(t),t.stroke())},t.Path.Polygon2D=e}},function(t,e){t.exports=function(t){"use strict";function e(o){if(!(this instanceof e))return new e(o);t.Utils.ApplyProperties(this,o)}e.prototype=Object.create(null),e.prototype.constructor=e,e.prototype.fillStyle="#440066",e.prototype.applied=!0,e.prototype.Apply=function(t){t.fillStyle=this.fillStyle},t.Style.Fill=e}},function(t,e){t.exports=function(t){"use strict";function e(o){if(!(this instanceof e))return new e(o);t.Utils.ApplyProperties(this,o)}e.prototype=Object.create(null),e.prototype.constructor=e,e.prototype.shadowColor="#000000",e.prototype.shadowBlur=5,e.prototype.shadowOffsetX=5,e.prototype.shadowOffsetY=5,e.prototype.applied=!1,e.prototype.Apply=function(t){t.shadowColor=this.shadowColor,t.shadowBlur=this.shadowBlur,t.shadowOffsetX=this.shadowOffsetX,t.shadowOffsetY=this.shadowOffsetY},t.Style.Shadow=e}},function(t,e){t.exports=function(t){"use strict";function e(o){if(!(this instanceof e))return new e(o);t.Utils.ApplyProperties(this,o)}e.prototype=Object.create(null),e.prototype.constructor=e,t.Style.LINE_CAP={ROUND:"round",BUTT:"butt",SQUARE:"square"},t.Style.LINE_JOIN={BEVEL:"bevel",ROUND:"round",MITER:"miter"},e.prototype.strokeStyle="#00FF00",e.prototype.lineCap=t.Style.LINE_CAP.ROUND,e.prototype.lineJoin=t.Style.LINE_JOIN.ROUND,e.prototype.lineWidth=1,e.prototype.miterLimit=10,e.prototype.applied=!0,e.prototype.Apply=function(t){t.strokeStyle=this.strokeStyle,t.lineCap=this.lineCap,t.lineJoin=this.lineJoin,t.lineWidth=this.lineWidth,t.miterLimit=this.miterLimit},t.Style.Stroke=e}},function(t,e){t.exports=function(t){"use strict";t.Style.CreateAll=function(){return{fill:new t.Style.Fill,stroke:new t.Style.Stroke,shadow:new t.Style.Shadow,text:new t.Style.Text}},t.Style.CreateFSSa=function(){return{fill:new t.Style.Fill,stroke:new t.Style.Stroke,shadow:new t.Style.Shadow}},t.Style.CreateSSa=function(){return{stroke:new t.Style.Stroke,shadow:new t.Style.Shadow}},t.Style.CreateFSa=function(){return{fill:new t.Style.Fill,shadow:new t.Style.Shadow}},t.Style.CreateSaT=function(){return{shadow:new t.Style.Shadow,text:new t.Style.Text}}}},function(t,e){t.exports=function(t){"use strict";function e(o){if(!(this instanceof e))return new e(o);t.Utils.ApplyProperties(this,o)}e.prototype=Object.create(null),e.prototype.constructor=e,t.Style.TEXT_ALIGN={START:"start",END:"end",CENTER:"center",LEFT:"left",RIGHT:"right"},t.Style.TEXT_BASELINE={ALPHABETIC:"alphabetic",TOP:"top",HANGING:"hanging",MIDDLE:"middle",IDEOGRAPHIC:"ideographic",BOTTOM:"bottom"},e.prototype.fillStyle="#000000",e.prototype.strokeStyle="#FFFFFF",e.prototype.font="22px Arial",e.prototype.textAlign=t.Style.TEXT_ALIGN.LEFT,e.prototype.textBaseline=t.Style.TEXT_BASELINE.TOP,e.prototype.applied=!0,e.prototype.Apply=function(t){t.fillStyle=this.fillStyle,t.strokeStyle=this.strokeStyle,t.font=this.font,t.textAlign=this.textAlign,t.textBaseline=this.textBaseline},t.Style.Text=e}},,,,,,,,,,,,function(t,e){t.exports=function(){"use strict";function t(e,o,n){if(!(this instanceof t))return new t(e,o,n);if("function"!=typeof e)throw new Error("Ticker: An onProcess function is required!");this.SetDesiredRate(o),this.onProcess=e,void 0!==n&&!1!==n||this.Start()}t.prototype=Object.create(null),t.prototype.constructor=t,t.LOG=!0,t.GLOBAL_CSS="background-color:black;font-family:Arial;font-size:18px;",t.Log=function(){!1!==t.LOG&&console.log.apply(null,arguments)},t.prototype.intervalId=null,t.prototype.afId=null,t.prototype.delta=0,t.prototype.then=0,t.prototype.now=0,t.prototype.desiredRate=0,t.prototype.supplyDelta=!0,t.prototype.Process=function(){this.ComputeDelta(),this.onProcess(this.delta)},t.prototype.ProcessAF=function(){this.ComputeDelta(),this.onProcess(this.delta),null!==this.afId&&(this.afId=requestAnimationFrame(this.ProcessAF))},t.prototype.ComputeDelta=function(){this.now=(new Date).getTime(),this.delta=this.now-this.then,this.then=this.now},t.prototype.GetTPS=function(){return nk.Math.PR(1/this.delta*1e3,2)},t.prototype.SetDesiredRate=function(t){this.desiredRate=void 0===t?16.66:1e3/t},t.prototype.Start=function(e){if(null!==this.afId)return t.Log("%cTicker: RAF is running!","color:red;".concat(t.GLOBAL_CSS)),null;null!==this.intervalId?!0===e?(this.Stop(),this.intervalId=setInterval(this.Process,this.desiredRate),t.Log("%cTicker: Starting interval!","color:#0F0;".concat(t.GLOBAL_CSS))):t.Log("%cTicker: Interval already running!","color:#F00;".concat(t.GLOBAL_CSS)):(this.intervalId=setInterval(this.Process.bind(this),this.desiredRate),t.Log("%cTicker: Starting interval!","color:#0F0;".concat(t.GLOBAL_CSS)))},t.prototype.StartAF=function(e){if(null!==this.intervalId)return t.Log("%cTicker: Interval is running!","color:#F00;".concat(t.GLOBAL_CSS)),null;null!==this.afId?!0===e?(this.Stop(),this.ProcessAF=this.ProcessAF.bind(this),this.afId=requestAnimationFrame(this.ProcessAF),t.Log("%cTicker: Starting RAF!","color:#0F0;".concat(t.GLOBAL_CSS))):t.Log("%cTicker: RAF already running!","color:#F00;".concat(t.GLOBAL_CSS)):(this.ProcessAF=this.ProcessAF.bind(this),this.afId=requestAnimationFrame(this.ProcessAF),t.Log("%cTicker: Starting RAF!","color:#0F0;".concat(t.GLOBAL_CSS)))},t.prototype.Stop=function(){null!==this.intervalId&&(clearInterval(this.intervalId),this.intervalId=null,t.Log("%cTicker: Stopping interval!","color:cyan;".concat(t.GLOBAL_CSS))),null!==this.afId&&(cancelAnimationFrame(this.afId),this.afId=null,t.Log("%cTicker: Stopping RAF!","color:cyan;".concat(t.GLOBAL_CSS)))},nk.Time.Ticker=t,nk.Ticker=t}},function(t,e){t.exports=function(){"use strict";function t(e){if(!(this instanceof t))return new t(e);this.stopTime=Math.round(void 0===e?null:e),this.onStop=new nk.LocalEvent,this.onStart=new nk.LocalEvent,this.onReset=new nk.LocalEvent}t.prototype=Object.create(null),t.prototype.constructor=t,t.prototype.time=0,t.prototype.isRunning=!1,t.prototype.count=0,t.prototype.Reset=function(t){this.onReset.Dispatch(this,null),this.count=0},t.prototype.Start=function(t){this.stopTime=Math.round(void 0===t?this.stopTime:t),this.stopTime<=0||(this.time=0,this.isRunning=!0,this.onStart.Dispatch(this,{stopTime:this.stopTime}))},t.prototype.Process=function(){this.time<this.stopTime&&!0===this.isRunning&&++this.time>=this.stopTime&&(this.isRunning=!1,this.count++,this.onStop.Dispatch(this,null))},nk.Time.Timer=t,nk.Timer=t}},function(t,e){t.exports=function(t){"use strict";function e(t,o,n,i){if(!(this instanceof e))return new e(t,o,n,i);this.channel=[void 0===t?0:t,void 0===o?0:o,void 0===n?0:n,void 0===i?1:i],this.ComputeValueRGBA()}var o=t.Utils.B16ToB10;e.prototype=Object.create(null),e.prototype.constructor=e,e.prototype.value="",e.prototype.currentConversion="",e.prototype.Copy=function(){var t=new e(this.channel[0],this.channel[1],this.channel[2],this.channel[3]);return t.value=this.value,t.currentConversion=this.currentConversion,t},e.prototype.ComputeValueRGBA=function(){this.value="rgba(".concat(this.channel.join(",").concat(")"))},e.prototype.ComputeValueHSLA=function(){this.value="hsla("+this.channel[0]+","+this.channel[1]+"%,"+this.channel[2]+"%,"+this.channel[3]+")"},e.prototype.ConvertToHSLA=function(t){var e=this.channel[0]/255,o=this.channel[1]/255,n=this.channel[2]/255,i=Math.max(e,o,n),r=Math.min(e,o,n),s=i-r,a=i+r,p=0,c=0,h=.5*a;i!==r&&(c=h>.5?s/(2-i-r):s/(i+r),p=i===e?(o-n)/s+(o<n?6:0):i===o?(n-e)/s+2:(e-o)/s+4,p/=6),this.channel[0]=360*p,this.channel[1]=100*c,this.channel[2]=100*h,!0===t&&(this.channel[0]=Math.round(this.channel[0]),this.channel[1]=Math.round(this.channel[1]),this.channel[2]=Math.round(this.channel[2])),this.currentConversion="hsl",this.ComputeValueHSLA()},e.prototype.SetRGB=function(e,o,n){var i=t.Utils.Clamp;this.channel[0]=i(e,0,255),this.channel[1]=i(o,0,255),this.channel[2]=i(n,0,255),this.currentConversion="rgb",this.ComputeValueRGBA()},e.prototype.SetHex=function(t){t=t.replace(/#/g,"");var e=t.match(/.{2}/g);e=e.map(o),this.SetRGB(e[0],e[1],e[2])},e.prototype.IncreaseChannel=function(t,e){this.channel[t]+=e,"rgb"===this.currentConversion?this.ComputeValueRGBA():"hsl"===this.currentConversion&&this.ComputeValueHSLA()},t.Color=e}},function(t,e){t.exports=function(t){"use strict";t.Utils.RandomInteger=function(t,e){return Math.floor(Math.random()*(e-t+1)+t)},t.Utils.RandomFloat=function(t,e){return Math.random()*(e-t)+t},t.Utils.IsInteger=function(t){return Number(t)===t&&t%1==0},t.Utils.IsFloat=function(t){return Number(t)===t&&t%1!=0},t.Utils.Clamp=function(t,e,o){return t<e?e:t>o?o:t},t.Utils.InverseClamp=function(t,e,o){return t<e?o:t>o?e:t},t.Utils.IntegerNotation=function(t,e,o){var n=t%e,i=t/e;return Math.ceil(0===n?i+1:i)+o+(1+n)},t.Utils.UUID=function(e,o,n,i){e=void 0===e?32:e,o=void 0===o?4:o,n=void 0===n?0:n,i=void 0===i?"-":i;for(var r,s,a="",p=0,c=Math.floor(e/o),h=t.Utils.CharacterSets[n];p<e;++p)r=p/c,0!==r&&Number.isInteger(r)?a+=i:(s=t.Utils.RandomInteger(1,h.length-1),a+=h.charAt(s));return a},t.Utils.CharacterSets=["0123456789ABCDEFGHJIKLMNOPQRSTUWVXYZabcdefghijklmnopqrstuwvxyz","0123456789ABCDEFGHJIKLMNOPQRSTUWVXYZabcdefghijklmnopqrstuwvxyz!?#$%@","0123456789","ABCDEFGHJIKLMNOPQRSTUWVXYZabcdefghijklmnopqrstuwvxyz","ABCDEFGHJIKLMNOPQRSTUWVXYZ","abcdefghijklmnopqrstuwvxyz"],t.Utils.ApplyProperties=function(t,e){if(void 0!==e){var o;for(o in e)void 0!==t[o]&&(t[o]=e[o])}},t.Utils.NestedStringAccess=function(e,o,n,i){"string"==typeof o&&(o=o.split("."));var r;if(o.length>1)r=o.shift(),void 0!==e[r]&&t.Utils.NestedStringAccess(e[r],o,n,i);else if(r=o.shift(),void 0!==e[r]){if(!0!==n)return e[r];e[r]=i}},t.Utils.ArrayGetRandom=function(t,e){for(var o=[],n={},i=t.length,r=0,s=e;r<s;++r){var a=Math.floor(Math.random()*i);void 0===n[a]?(n[a]=null,o.push(t[a])):r--}return o},t.Utils.ArrayRemove=function(t,e){var o=t.indexOf(e);return-1!==o?t.splice(o,1)[0]:null},t.Utils.ArrayInsert=function(t,e,o){t.splice(o,0,e)},t.Utils.Cipher={},t.Utils.Decipher={},t.Utils.Cipher.CCH1=function(e,o){var n=[];o=void 0===o?1:o;for(var i,r,s=0,a=e.split(""),p=a.length;s<p;++s)i=a[s],i=(i.charCodeAt(0)+o).toString(2),r=t.Utils.RandomInteger(1,9),n.push(r+"x"+i.replace(/1/g,r));return n.join(" ")},t.Utils.Decipher.CCH1=function(t,e){var o=[];e=void 0===e?1:e;for(var n,i=0,r=t.split(" "),s=r.length;i<s;++i)n=r[i],n=n.slice(2-n.length),o.push(String.fromCharCode(parseInt(n.replace(/[2-9]/g,"1"),2)-e));return o.join("")},t.Utils.GenerateTexture=function(t){var e=t(),o=document.createElement("canvas");o.width=e.w,o.height=e.h,e.Draw(o.getContext("2d"));var n=new Image;return n.src=o.toDataURL("image/png"),n},t.Utils.TextureFromDataURL=function(t){var e=new Image;return e.src=t,e}}},function(t,e,o){t.exports=o(0)}]);