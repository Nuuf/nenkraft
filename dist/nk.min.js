!function(t){function e(i){if(o[i])return o[i].exports;var n=o[i]={i:i,l:!1,exports:{}};return t[i].call(n.exports,n,n.exports,e),n.l=!0,n.exports}var o={};e.m=t,e.c=o,e.i=function(t){return t},e.d=function(t,o,i){e.o(t,o)||Object.defineProperty(t,o,{configurable:!1,enumerable:!0,get:i})},e.n=function(t){var o=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(o,"a",o),o},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="./",e(e.s=83)}([function(t,e,o){(function(t){var e=Object.create(null);o(12)(e),o(38)(e),o(60)(e),o(61)(e),o(57)(e),o(59)(e),o(58)(e),o(50)(e),o(51)(e),o(52)(e),o(54)(e),o(53)(e),o(28)(e),o(27)(e),o(55)(e),o(56)(e),o(43)(e),o(42)(e),o(39)(e),o(40)(e),o(41)(e),o(36)(e),o(37)(e),o(45)(e),o(44)(e),o(31)(e),o(29)(e),o(32)(e),o(30)(e),o(34)(e),o(33)(e),o(16)(e),o(48)(e),o(46)(e),o(49)(e),o(47)(e),o(19)(e),o(18)(e),o(17)(e),o(25)(e),o(20)(e),o(21)(e),o(22)(e),o(23)(e),o(26)(e),o(24)(e),o(11)(e),o(9)(e),o(10)(e),o(14)(e),o(13)(e),o(15)(e),o(35)(e),t.Nenkraft=t.nk=e}).call(e,o(8))},,,,,,,,function(t,e){var o;o=function(){return this}();try{o=o||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(o=window)}t.exports=o},function(t,e){t.exports=function(t){"use strict";function e(o,i,n){if(!(this instanceof e))return new e(o,i);this.frames=[],this.controller=o,this.id=i,this.onEnd=new t.Event.LocalEvent,this.onStop=new t.Event.LocalEvent,this.onStart=new t.Event.LocalEvent,void 0!==n&&(this.rate=n)}e.prototype=Object.create(null),e.prototype.constructor=e,e.prototype.currentFrame=0,e.prototype.currentFrameIndex=0,e.prototype.playing=!1,e.prototype.id=null,e.prototype.rate=60,e.prototype.reverse=!1,e.prototype.AddFrame=function(e,o,i,n,r){r=void 0===r?this.rate:r,this.frames.push(new t.Animator.Frame(e,o,i,n,r,this.controller.sprite))},e.prototype.GenerateFrames=function(t,e,o,i,n,r){for(var s,p=0,a=o/i;p<n;++p)s=r[p],this.AddFrame(p%a*t,(p/a|0)*e,t,e,s)},e.prototype.SetFrame=function(t){t=void 0===t?0:t;var e=this.frames[t];void 0!==e&&(this.currentFrame=e,this.currentFrameIndex=t,this.currentFrame.Apply())},e.prototype.Start=function(){this.playing=!0,this.onStart.Dispatch()},e.prototype.Stop=function(){this.playing=!1,this.onStop.Dispatch()},e.prototype.Process=function(){if(!0===this.playing){var t=this.currentFrame,e=this.frames,o=!1;if(!0===t.Process()){var i;i=!1===this.reverse?++this.currentFrameIndex:--this.currentFrameIndex,i>=e.length?(i=this.currentFrameIndex=0,o=!0):i<0&&(i=this.currentFrameIndex=this.frames.length-1,o=!0),this.currentFrame=e[i],this.currentFrame.Apply(),!0===o&&this.onEnd.Dispatch()}}},e.prototype.Clear=function(){this.frames=[],delete this.currentFrame,delete this.playing,delete this.currentFrameIndex},e.prototype.Restart=function(t){this.SetFrame(t),this.ResetAllFrames(),this.Start()},e.prototype.ResetAllFrames=function(){for(var t,e=0,o=this.frames,i=o.length;e<i;++e)t=o[e],t.Reset()},t.Animator.Animation=e}},function(t,e){t.exports=function(t){"use strict";function e(t){if(!(this instanceof e))return new e(t);this.animations=[],void 0!==t&&(this.sprite=t)}e.prototype=Object.create(null),e.prototype.constructor=e,e.prototype.currentAnimation=null,e.prototype.sprite=null,e.prototype.AddAnimation=function(e,o){var i=new t.Animator.Animation(this,e,o);return this.animations.push(i),i},e.prototype.GetAnimation=function(t){for(var e,o=0,i=this.animations,n=i.length;o<n;++o)if((e=i[o])&&e.id===t)return e;return null},e.prototype.PlayAnimation=function(t,e){var o=this.GetAnimation(t);null!==o&&(this.currentAnimation=o,o.Restart(e))},e.prototype.StopCurrentAnimation=function(){null!==this.currentAnimation&&this.currentAnimation.Stop()},e.prototype.Process=function(){var t=this.currentAnimation;null!==t&&t.Process()},t.Animator.Controller=e}},function(t,e){t.exports=function(t){"use strict";function e(t,o,i,n,r,s){if(!(this instanceof e))return new e(t,o,i,n,r,s);this.sprite=s,this.rate=r,this.x=t,this.y=o,this.w=i,this.h=n}e.prototype=Object.create(null),e.prototype.constructor=e,e.prototype.x=0,e.prototype.y=0,e.prototype.w=0,e.prototype.h=0,e.prototype.sprite=null,e.prototype.rate=0,e.prototype.timer=0,e.prototype.Process=function(){return this.timer--<=0&&(this.Reset(),!0)},e.prototype.Apply=function(){this.sprite.clip.Set(this.x,this.y,this.w,this.h),this.sprite.w=this.w,this.sprite.h=this.h},e.prototype.Reset=function(){this.timer=this.rate},t.Animator.Frame=e}},function(t,e){t.exports=function(t){t.Geom=Object.create(null),t.Style=Object.create(null),t.Debug=Object.create(null),t.Math=Object.create(null),t.Utils=Object.create(null),t.Entity=Object.create(null),t.Path=Object.create(null),t.Event=Object.create(null),t.Time=Object.create(null),t.Input=Object.create(null),t.CP=Object.create(null),t.Load=Object.create(null),t.Animator=Object.create(null),t.VERSION="0.1.51 (Alpha)",console.log("%cnenkraft %cversion %c"+t.VERSION,"color:cyan;background-color:black;font-family:Arial;font-size:16px;font-weight:900;","color:magenta;background-color:black;font-family:Arial;font-size:16px;","color:yellow;background-color:black;font-family:Arial;font-size:18px;")}},function(t,e){t.exports=function(t){"use strict";function e(t,o,i,n,r){if(!(this instanceof e))return new e(t,o,i,n,r);this.id=t.split(" "),this.handle=o,this.info=i,this.data={},void 0!==r&&(this.optionPrefix=r),void 0!==n&&(this.continueToPrime=n)}e.prototype=Object.create(null),e.prototype.constructor=e,e.prototype.dataSeparator="=",e.prototype.options=null,e.prototype.allOptionIds=null,e.prototype.fullInfo=null,e.prototype.optionPrefix=null,e.prototype.continueToPrime=!0,e.prototype.Execute=function(t,e){this.HandleData(t,e),!0===this.HandleOptions(t,e)&&this.handle(t,e)},e.prototype.AddOption=function(e,o,i,n,r,s){s=void 0===s?this.optionPrefix:s,null!==s&&(e=e.replace(/\S+/g,s+"$&")),null===this.options&&(this.options=[]),n=void 0===n?0:n;var p=new t.CP.Option(e,o,i,n,r);p.command=this;for(var a,h=0,c=this.options,u=c.length;h<u;++h)if(a=c[h],a.priority<=n)return t.Utils.ArrayInsert(c,p,h),this.allOptionIds=this.GetAllOptionIds(),this;return this.options.push(p),this.allOptionIds=this.GetAllOptionIds(),this},e.prototype.HandleData=function(t,e){for(var o,i,n=t.slice(),r=0,s=n.length,p=this.dataSeparator;r<s;++r)o=n[r],i=o.split(p),2===i.length&&(t.splice(r,1),e[i[0]]=i[1])},e.prototype.HandleOptions=function(t,e){if(0===t.length)return this.continueToPrime;var o=this.GetAndRemoveMatchingOptionIds(t);if(null===o)return this.continueToPrime;for(var i,n=0,r=o.length;n<r;++n)if(i=this.GetOptionById(o[n]),!0===i.Execute(t,e))return!1;return this.continueToPrime},e.prototype.GetOptionById=function(t){for(var e,o=0,i=this.options,n=i.length;o<n;++o)if(e=i[o],-1!==e.id.indexOf(t))return e;return null},e.prototype.GetAllOptionIds=function(){for(var t=[],e=0,o=this.options,i=o.length;e<i;++e)t=t.concat(o[e].id);return t},e.prototype.GetAndRemoveMatchingOptionIds=function(t){var e=this.allOptionIds;if(null===e)return null;for(var o=[],i=0,n=e.length;i<n;++i){var r=t.indexOf(e[i]);-1!==r&&o.push(t.splice(r,1)[0])}return o},e.prototype.GenerateInfoString=function(){for(var t,e="COMMAND: "+this.id.join(", ")+" -> "+this.info+"\n",o=0,i=this.options,n=i.length;o<n;++o)t=i[o],e+="OPTION: "+t.id.join(", ")+" -> "+t.info+"\n";return e},t.CP.Command=e}},function(t,e){t.exports=function(t){"use strict";function e(t,o,i,n,r){if(!(this instanceof e))return new e(t,o,i,n,r);this.id=t.split(" "),this.handle=o,this.info=i,void 0!==n&&(this.priority=n),void 0!==r&&(this.breakIfExecuted=r),this.data={}}e.prototype=Object.create(null),e.prototype.constructor=e,e.prototype.command=null,e.prototype.priority=0,e.prototype.breakIfExecuted=!1,e.prototype.Execute=function(t,e){return this.handle(t,e),this.breakIfExecuted},t.CP.Option=e}},function(t,e){t.exports=function(t){"use strict";function e(t){if(!(this instanceof e))return new e(t);this.commands=[]}e.prototype=Object.create(null),e.prototype.constructor=e,e.prototype.splitter=" ",e.prototype.Add=function(t){this.commands.push(t)},e.prototype.Get=function(t){for(var e,o=0,i=this.commands,n=i.length;o<n;++o)if(e=this.commands[o])for(var r=0,s=e.id.length;r<s;++r)if(e.id[r]===t)return e;return null},e.prototype.Parse=function(t){var e=String(t).split(this.splitter),o=e.shift(),i=this.Get(o);return i?(i.Execute(e,{}),null):o},t.CP.Register=e}},function(t,e){t.exports=function(t){"use strict"}},function(t,e){t.exports=function(t){"use strict";function e(t,i){if(!(this instanceof e))return new e(t,i);o.call(this,t,i)}var o=t.Entity.Container2D;e.prototype=Object.create(o.prototype),e.prototype.constructor=e,delete e.prototype.Draw,delete e.prototype.DrawChildren,e.prototype.Render=function(){!0===this.display&&(!0===this.transformShouldUpdate&&(this.UpdateTransform(),!1===this.transformAutomaticUpdate&&(this.transformShouldUpdate=!1)),this.children.length>0&&this.RenderChildren(_rc))},e.prototype.RenderChildren=function(){for(var t,e=0,o=this.children,i=o.length;e<i;++e)t=o[e],t.Render&&t.Render()},t.Entity.Case2D=e,t.Case2D=e}},function(t,e){t.exports=function(t){"use strict";function e(t,i){if(!(this instanceof e))return new e(t,i);o.call(this,t,i),this.children=[]}var o=t.Entity.CoreEntity2D;e.prototype=Object.create(o.prototype),e.prototype.constructor=e,e.prototype.render=!0,e.prototype.display=!0,e.prototype.alpha=1,e.prototype.transformShouldUpdate=!0,e.prototype.transformAutomaticUpdate=!0,e.prototype.Draw=function(t){!0===this.display&&(!0===this.transformShouldUpdate&&(this.UpdateTransform(),!1===this.transformAutomaticUpdate&&(this.transformShouldUpdate=!1)),this.transform.ApplyWorld(t),this.children.length>0&&this.DrawChildren(t))},e.prototype.RequestTransformUpdate=function(){this.transformShouldUpdate=!0},e.prototype.DrawChildren=function(t){for(var e,o=0,i=this.children,n=i.length;o<n;++o)e=i[o],e.Draw&&e.Draw(t)},e.prototype.AddChild=function(t){var e=t.parent;return null!==e&&e.RemoveChild(t),this.children.push(t),t.parent=this,t},e.prototype.AddChildren=function(){for(var t,e,o=0,i=arguments.length;o<i;++o)t=arguments[o],e=t.parent,null!==e&&e.RemoveChild(t),this.children.push(t),t.parent=this},e.prototype.AddSibling=function(t){var e=this.parent;return null!==e&&e.AddChild(t),t},e.prototype.RemoveChild=function(t){var e=this.children,o=e.indexOf(t);if(-1!==o)return e.splice(o,1)[0]},e.prototype.RemoveChildren=function(){for(var t,e,o=this.children,i=arguments[0].length?arguments[0]:arguments,n=[],r=0,s=i.length;r<s;++r)t=i[r],-1!==(e=o.indexOf(t))&&(rChildren.push(o.splice(e,1)[0]),delete t.parent);return n},e.prototype.SendToFront=function(){if(null!==this.parent){var t=this.parent.children,e=t.indexOf(this);-1!==e&&t.push(t.splice(e,1)[0])}},e.prototype.SendToBack=function(){if(null!==this.parent){var t=this.parent.children,e=t.indexOf(this);-1!==e&&t.splice(0,0,t.splice(e,1)[0])}},e.prototype.Dump=function(){this.children.length=0},e.prototype.Destroy=function(){this.Dump(),null!==this.parent&&this.parent.RemoveChild(this)},e.prototype.AttachTo=function(t){t.AddChild(this)},e.prototype.Detach=function(){return null!==this.parent?this.parent.RemoveChild(this):null},e.prototype.GetChildClosestTo=function(t,e){var o=this.children,i=null;if(0!==o.length){for(var n,r,s=0,p=o.length,a=1/0;s<p;++s)n=o[s],void 0!==e&&!1===e(n)||(r=Math.abs(n.position.GetDistanceSquared(t.x,t.y)))<a&&(a=r,i=n);return i}return null},e.prototype.GetChildFurthestFrom=function(t,e){var o=this.children,i=null;if(0!==o.length){for(var n,r,s=0,p=o.length,a=0;s<p;++s)n=o[s],void 0!==e&&!1===e(n)||(r=Math.abs(n.position.GetDistanceSquared(t.x,t.y)))>a&&(a=r,i=n);return i}return null},t.Entity.Container2D=e,t.Container2D=e}},function(t,e){t.exports=function(t){"use strict";function e(o,i){if(!(this instanceof e))return new e(o,i);this.transform=new t.Math.Transform2D(o,i),this.data=Object.create(null)}e.prototype=Object.create(null),e.prototype.constructor=e,e.NULL_TRANSFORM=new t.Math.Transform2D,e.prototype.parent=null,e.prototype.w=0,e.prototype.h=0,e.prototype.bounds=null,e.prototype.boundsDirty=!0,e.prototype.UpdateTransform=function(){this.parent?this.transform.UpdateWorld(this.parent.transform.worldTransform):this.transform.UpdateWorld(e.NULL_TRANSFORM.worldTransform)},e.prototype.GetWorldPosition=function(){var e=this.transform.worldTransform;return new t.Vector2D(e.e,e.f)},e.prototype.ComputeBounds=function(e){var o=(e&&e.x&&e.x,e&&e.y?e.y:0);return this.bounds=new t.Geom.AABB2D(this.x-this.width*o,this.y-this.height*o,this.x+this.width,this.y+this.height),this.boundsDirty=!1,this.bounds},t.Entity.CoreEntity2D=e,Object.defineProperty(e.prototype,"rotation",{get:function(){return this.transform.rotation},set:function(t){this.transform.rotation=t,this.transform.UpdateSkew()}}),Object.defineProperty(e.prototype,"scale",{get:function(){return this.transform.scale}}),Object.defineProperty(e.prototype,"position",{get:function(){return this.transform.position}}),Object.defineProperty(e.prototype,"pivot",{get:function(){return this.transform.pivot}}),Object.defineProperty(e.prototype,"x",{get:function(){return this.transform.position.x},set:function(t){this.transform.position.x=t}}),Object.defineProperty(e.prototype,"y",{get:function(){return this.transform.position.y},set:function(t){this.transform.position.y=t}}),Object.defineProperty(e.prototype,"width",{get:function(){return this.w*this.scale.x},set:function(t){this.w=t}}),Object.defineProperty(e.prototype,"height",{get:function(){return this.h*this.scale.y},set:function(t){this.h=t}})}},function(t,e){t.exports=function(t){"use strict";function e(t,i,n){if(!(this instanceof e))return new e(t,i,n);o.call(this,t,i),void 0!==n&&(void 0!==n.w&&void 0!==n.h?(this.w=n.w,this.h=n.h):void 0!==n.GetLength?this.w=this.h=n.GetLength():void 0!==n.diameter?this.w=this.h=n.diameter:void 0!==n.aabb&&(this.w=n.aabb.w,this.h=n.aabb.h),this.path=n)}var o=t.Entity.Container2D;e.prototype=Object.create(o.prototype),e.prototype.constructor=e,e.prototype.path=null,e.prototype.anchor=null,e.prototype.Draw=function(t){if(!0===this.display){!0===this.transformShouldUpdate&&(this.UpdateTransform(),!1===this.transformAutomaticUpdate&&(this.transformShouldUpdate=!1)),this.transform.ApplyWorld(t);var e=this.path;e&&e.Draw&&!0===this.render&&e.Draw(t),this.children.length>0&&this.DrawChildren(t)}},e.prototype.IntersectsPoint=function(t){var e=t.SubtractVC(this.position);return e.DivideV(this.scale),this.path.IntersectsPoint(e)},t.Entity.Graphic2D=e,t.Graphic2D=e}},function(t,e){t.exports=function(t){"use strict";function e(o,i){if(!(this instanceof e))return new e(o,i);this.transform=new t.Math.Basetransform2D(o,i),this.data=Object.create(null)}e.prototype=Object.create(null),e.prototype.constructor=e,e.NULL_TRANSFORM=new t.Math.Basetransform2D,e.prototype.parent=null,e.prototype.w=0,e.prototype.h=0,e.prototype.bounds=null,e.prototype.boundsDirty=!0,e.prototype.render=!0,e.prototype.display=!0,e.prototype.transformShouldUpdate=!0,e.prototype.transformAutomaticUpdate=!0,e.prototype.UpdateTransform=function(){this.parent?this.transform.UpdateWorld(this.parent.transform.worldTransform):this.transform.UpdateWorld(e.NULL_TRANSFORM.worldTransform)},e.prototype.GetWorldPosition=function(){return this.transform.worldTransform.Copy()},e.prototype.ComputeBounds=function(e){var o=(e&&e.x&&e.x,e&&e.y?e.y:0);return this.bounds=new t.Geom.AABB2D(this.x-this.width*o,this.y-this.height*o,this.x+this.width,this.y+this.height),this.boundsDirty=!1,this.bounds},e.prototype.Destroy=function(){null!==this.parent&&this.parent.RemoveChild(this)},e.prototype.AttachTo=function(t){t.AddChild(this)},e.prototype.Detach=function(){return null!==this.parent?this.parent.RemoveChild(this):null},e.prototype.SendToFront=function(){if(null!==this.parent){var t=this.parent.children,e=t.indexOf(this);-1!==e&&t.push(t.splice(e,1)[0])}},e.prototype.SendToBack=function(){if(null!==this.parent){var t=this.parent.children,e=t.indexOf(this);-1!==e&&t.splice(0,0,t.splice(e,1)[0])}},Object.defineProperty(e.prototype,"scale",{get:function(){return this.transform.scale}}),Object.defineProperty(e.prototype,"position",{get:function(){return this.transform.position}}),Object.defineProperty(e.prototype,"x",{get:function(t){return this.transform.position.x},set:function(t){this.transform.position.x=t}}),Object.defineProperty(e.prototype,"y",{get:function(t){return this.transform.position.y},set:function(t){this.transform.position.y=t}}),Object.defineProperty(e.prototype,"width",{get:function(){return this.w},set:function(t){this.w=t}}),Object.defineProperty(e.prototype,"height",{get:function(){return this.h},set:function(t){this.h=t}}),t.Entity.Plain2D=e,t.Plain2D=e}},function(t,e){t.exports=function(t){"use strict";function e(i,n,r){if(!(this instanceof e))return new e(i,n,r);o.call(this,i,n),void 0!==r&&(void 0!==r.w&&void 0!==r.h?(this.w=r.w,this.h=r.h):void 0!==r.GetLength?this.w=this.h=r.GetLength():void 0!==r.diameter?this.w=this.h=r.diameter:void 0!==r.aabb&&(this.w=r.aabb.w,this.h=r.aabb.h),this.path=r),this.anchor=new t.Vector2D}var o=t.Entity.Plain2D;e.prototype=Object.create(o.prototype),e.prototype.constructor=e,e.prototype.path=null,e.prototype.anchor=null,e.prototype.Draw=function(t){if(!0===this.display){!0===this.transformShouldUpdate&&(this.UpdateTransform(),!1===this.transformAutomaticUpdate&&(this.transformShouldUpdate=!1)),this.transform.ApplyWorld(t);var e=this.path;e&&e.Draw&&!0===this.render&&e.Draw(t)}},e.prototype.IntersectsPoint=function(t){var e=t.SubtractVC(this.position);return e.DivideV(this.scale),this.path.IntersectsPoint(e)},t.Entity.Plaingraphic2D=e,t.Plaingraphic2D=e}},function(t,e){t.exports=function(t){"use strict";function e(i,n,r){if(!(this instanceof e))return new e(i,n,r);o.call(this,i,n),this.anchor=new t.Vector2D(0,0),this.clip=new t.Geom.AABB2D,this.shape=new t.Geom.AABB2D,void 0===r&&(r=e.DEFAULT_TEXTURE),this.SetTexture(r)}var o=t.Entity.Plain2D;e.prototype=Object.create(o.prototype),e.prototype.constructor=e,e.DEFAULT_TEXTURE=t.Utils.TextureFromDataURL(t.Utils.GenerateSimpleBase64Png(function(){var e=new t.Path.Polygon2D;return e.AddPoint(new t.Vector2D(0,0)),e.AddPoint(new t.Vector2D(64,0)),e.AddPoint(new t.Vector2D(64,64)),e.AddPoint(new t.Vector2D(0,64)),e.AddPoint(new t.Vector2D(0,0)),e.AddPoint(new t.Vector2D(32,32)),e.AddPoint(new t.Vector2D(64,0)),e.AddPoint(new t.Vector2D(32,32)),e.AddPoint(new t.Vector2D(64,64)),e.AddPoint(new t.Vector2D(32,32)),e.AddPoint(new t.Vector2D(0,64)),e.ComputeBounds(),e.style.fill.color="rgba(66,66,66,0.5)",e.style.stroke.color="#3399FF",e.style.stroke.lineWidth=3,new t.Graphic2D(0,0,e)})),e.prototype.shape=null,e.prototype.clip=null,e.prototype.texture=null,e.prototype.anchor=null,e.prototype.Draw=function(t){if(!0===this.display&&(!0===this.transformShouldUpdate&&(this.UpdateTransform(),!1===this.transformAutomaticUpdate&&(this.transformShouldUpdate=!1)),this.transform.ApplyWorld(t),!0===this.render)){var e=this.clip,o=e.tl,i=e.br,n=this.w,r=this.h,s=this.anchor;t.drawImage(this.texture,o.x,o.y,i.x,i.y,-n*s.x,-r*s.y,n,r)}},e.prototype.IntersectsPoint=function(t){var e=t.SubtractVC(this.position);return e.Add(this.w*this.anchor.x,this.h*this.anchor.y),this.shape.IntersectsPoint(e)},e.prototype.SetTexture=function(t){this.texture=t,this.w=t.naturalWidth,this.h=t.naturalHeight,this.clip.Set(0,0,this.w,this.h),this.shape.SetC(this.clip)},t.Entity.Plainsprite=e,t.Plainsprite=e}},function(t,e){t.exports=function(t){"use strict";function e(i,n,r){if(!(this instanceof e))return new e(i,n,r);o.call(this,i,n),this.anchor=new t.Vector2D(0,0),this.clip=new t.Geom.AABB2D,this.shape=new t.Geom.AABB2D,void 0===r&&(r=e.DEFAULT_TEXTURE),this.SetTexture(r)}var o=t.Entity.Container2D;e.prototype=Object.create(o.prototype),e.prototype.constructor=e,e.DEFAULT_TEXTURE=t.Utils.TextureFromDataURL(t.Utils.GenerateSimpleBase64Png(function(){var e=new t.Path.Polygon2D;return e.AddPoint(new t.Vector2D(0,0)),e.AddPoint(new t.Vector2D(64,0)),e.AddPoint(new t.Vector2D(64,64)),e.AddPoint(new t.Vector2D(0,64)),e.AddPoint(new t.Vector2D(0,0)),e.AddPoint(new t.Vector2D(32,32)),e.AddPoint(new t.Vector2D(64,0)),e.AddPoint(new t.Vector2D(32,32)),e.AddPoint(new t.Vector2D(64,64)),e.AddPoint(new t.Vector2D(32,32)),e.AddPoint(new t.Vector2D(0,64)),e.ComputeBounds(),e.style.fill.color="rgba(66,66,66,0.5)",e.style.stroke.color="#00FFFF",e.style.stroke.lineWidth=3,new t.Graphic2D(0,0,e)})),e.prototype.shape=null,e.prototype.clip=null,e.prototype.texture=null,e.prototype.anchor=null,e.prototype.Draw=function(t){if(!0===this.display){if(!0===this.transformShouldUpdate&&(this.UpdateTransform(),!1===this.transformAutomaticUpdate&&(this.transformShouldUpdate=!1)),this.transform.ApplyWorld(t),!0===this.render){var e=this.clip,o=e.tl,i=e.br,n=this.w,r=this.h,s=this.anchor;t.drawImage(this.texture,o.x,o.y,i.x,i.y,-n*s.x,-r*s.y,n,r)}this.children.length>0&&this.DrawChildren(t)}},e.prototype.IntersectsPoint=function(t){var e=t.SubtractVC(this.position);return e.Add(this.w*this.anchor.x,this.h*this.anchor.y),e.DivideV(this.scale),this.shape.IntersectsPoint(e)},e.prototype.SetTexture=function(t){this.texture=t,this.w=t.naturalWidth,this.h=t.naturalHeight,this.clip.Set(0,0,this.w,this.h),this.shape.SetC(this.clip)},t.Entity.Sprite=e,t.Sprite=e}},function(t,e){t.exports=function(t){"use strict";function e(i,n,r,s){if(!(this instanceof e))return new e(i,n,r,s);o.call(this,n,r),this.canvas=i,this.rc=i.getContext("2d"),this.w=i.width,this.h=i.height,this.ticker=new t.Time.Ticker(this.Process.bind(this),60,s),this.onProcess=new t.Event.LocalEvent,this.mouse=new t.Input.Mouse(i,n,r),this.keyboard=new t.Input.Keyboard(i)}var o=t.Entity.Container2D;e.prototype=Object.create(o.prototype),e.prototype.constructor=e,e.prototype.backgroundColor="rgba(0,0,0,1)",e.prototype.clear=!0,e.prototype.fill=!0,e.prototype.PreDraw=function(t){t.setTransform(1,0,0,1,0,0),!0===this.clear?t.clearRect(0,0,this.w,this.h):!0===this.fill&&(t.fillStyle=this.backgroundColor,t.fillRect(0,0,this.w,this.h))},e.prototype.Process=function(t){var e=this.rc;this.PreDraw(e),this.Draw(e),this.onProcess.Dispatch(this,t)},t.Entity.Stage2D=e,t.Stage2D=e}},function(t,e){t.exports=function(t){"use strict";function e(i,n,r){if(!(this instanceof e))return new e(i,n);o.call(this,i,n),void 0!==r&&(this.text=r),this.style=t.Style.CreateSaT()}var o=t.Entity.Container2D;e.prototype=Object.create(o.prototype),e.prototype.constructor=e,e.prototype.text="",e.prototype.visible=!0,e.prototype.maxWidth=void 0,e.prototype.Draw=function(t){if(!0===this.display){if(!0===this.transformShouldUpdate&&(this.UpdateTransform(),!1===this.transformAutomaticUpdate&&(this.transformShouldUpdate=!1)),this.transform.ApplyWorld(t),!0===this.render){var e=this.style;!0===e.shadow.applied&&e.shadow.Apply(t),!0===e.text.applied&&(e.text.Apply(t),t.fillText(this.text,0,0,this.maxWidth),t.strokeText(this.text,0,0,this.maxWidth))}this.children.length>0&&this.DrawChildren(t)}},e.prototype.IntersectsPoint=function(t){return!1},t.Entity.Text=e,t.Text=e}},function(t,e){t.exports=function(t){"use strict";function e(){if(!(this instanceof e))return new e;this.listeners=[]}e.prototype=Object.create(null),e.prototype.constructor=e,e.prototype.stopPropagation=!1,e.prototype.target=null,e.prototype.data=null,e.prototype.GetListenerIndex=function(t,e){var o=this.listeners;if(0===o.length)return-1;for(var i,n=0,r=o.length;n<r;++n)if(i=o[n],i.context===e&&i.handle===t)return n;return-1},e.prototype.Add=function(e,o,i){var n=new t.LocalListener(this,o,e,i);this.listeners.push(n)},e.prototype.Remove=function(t,e){var o=this.GetListenerIndex(t,e);-1!==o&&this.listeners.splice(o,1)},e.prototype.Dump=function(t){var e=this.listeners;if(0!==e.length)if(void 0!==t)for(var o,i=0,n=e.length;i<n;++i)o=e[i],o.context===t&&this.listeners.splice(i,1);else this.listeners.length=0},e.prototype.Dispatch=function(t,e){var o=this.listeners;if(0!==o.length){o=o.slice(),this.stopPropagation=!1,this.target=t,this.data=e;for(var i,n=0,r=o.length;n<r&&(i=o[n],i.Execute(this),!0!==this.stopPropagation);++n);delete this.target,delete this.data}},t.Event.LocalEvent=e,t.LocalEvent=e}},function(t,e){t.exports=function(t){"use strict";function e(t,o,i,n){if(!(this instanceof e))return new e(t,_listenerContex,i,n);this.context=o,this.holderContext=t,this.handle=i,this.removeOnNextCall=n}e.prototype=Object.create(null),e.prototype.constructor=e,e.prototype.Execute=function(){this.handle.apply(this.context,arguments),!0===this.removeOnNextCall&&this.Remove()},e.prototype.Remove=function(){this.holderContext.Remove(this.handle,this.context)},t.Event.LocalListener=e,t.LocalListener=e}},function(t,e){t.exports=function(t){"use strict";function e(o,i,n,r){if(!(this instanceof e))return new e(o,i,n,r);o instanceof t.Vector2D&&i instanceof t.Vector2D?(this.tl=o,this.br=i):void 0!==o&&void 0!==i&&void 0!==o.x&&void 0!==o.y&&void 0!==i.x&&void 0!==i.y?(this.tl=new t.Vector2D(o.x,o.y),this.br=new t.Vector2D(i.x,i.y)):void 0!==o&&void 0!==i&&void 0!==n&&void 0!==r?(this.tl=new t.Vector2D(o,i),this.br=new t.Vector2D(n,r)):(this.tl=new t.Vector2D,this.br=new t.Vector2D),this.ComputeWH()}e.prototype=Object.create(null),e.prototype.constructor=e,e.TYPE=1,e.prototype.TYPE=e.TYPE,e.prototype.w=0,e.prototype.h=0,e.prototype.area=0,e.prototype.Set=function(t,e,o,i){this.tl.x=t,this.tl.y=e,this.br.x=o,this.br.y=i,this.ComputeWH()},e.prototype.SetC=function(t){this.Set(t.tl.x,t.tl.y,t.br.x,t.br.y)},e.prototype.ComputeWH=function(){this.w=this.br.x-this.tl.x,this.h=this.br.y-this.tl.y,this.area=this.w*this.h},e.prototype.IntersectsPoint=function(t){return!(t.x<this.tl.x||t.x>this.br.x||t.y<this.tl.y||t.y>this.br.y)},e.prototype.ContainsPoint=function(t){return t.x>this.tl.x&&t.x<this.br.x&&t.y>this.tl.y&&t.y<this.br.y},e.prototype.IntersectsAABB2D=function(t){var e=this.tl,o=this.br,i=t.tl,n=t.br;return!(i.x>=o.x||i.y>=o.y||n.x<=e.x||n.y<=e.y)},e.prototype.ContainsAABB2D=function(t){if(t.area>this.area)return!1;var e=this.tl,o=this.br,i=t.tl,n=t.br;return i.x>=e.x&&i.y>=e.y&&n.x<=o.x&&n.y<=o.y},t.Geom.AABB2D=e}},function(t,e){t.exports=function(t){"use strict";function e(o,i,n){if(!(this instanceof e))return new e(o,i,n);this.center=new t.Vector2D(o,i),this.radius=void 0===n?32:n}e.prototype=Object.create(null),e.prototype.constructor=e,e.TYPE=2,e.prototype.TYPE=e.TYPE,e.prototype.diameter=0,e.prototype.w=0,e.prototype.h=0,e.prototype.radiusSquared=0,e.prototype.radiusUnsquared=0,e.prototype.area=0,e.prototype.IntersectsCircle=function(t){var e=this.radius+t.radius;return e*e>=this.center.GetDistanceSquaredV(t.center)},e.prototype.IntersectsPoint=function(t){return this.radiusSquared>=this.center.GetDistanceSquaredV(t)},t.Geom.Circle=e,Object.defineProperty(e.prototype,"x",{set:function(t){this.center.x=t},get:function(){return this.center.x}}),Object.defineProperty(e.prototype,"y",{set:function(t){this.center.y=t},get:function(){return this.center.y}}),Object.defineProperty(e.prototype,"radius",{set:function(t){this.radiusUnsquared=t,this.radiusSquared=t*t,this.diameter=this.w=this.h=2*t,this.area=Math.PI*t*t},get:function(){return this.radiusUnsquared}})}},function(t,e){t.exports=function(t){"use strict";function e(o,i,n,r){if(!(this instanceof e))return new e(o,i,n,r);void 0!==o&&null!=o.x&&null!=o.y&&void 0!==i&&null!=i.x&&null!=i.y?(this.s=o,this.e=i):void 0!==o&&void 0!==i&&void 0!==n&&void 0!==r?(this.s=new t.Vector2D(o,i),this.e=new t.Vector2D(n,r)):(this.s=new t.Vector2D,this.e=new t.Vector2D)}e.prototype=Object.create(null),e.prototype.constructor=e,e.TYPE=0,e.prototype.TYPE=e.TYPE,e.prototype.Stretch=function(t){var e=.5*t;this.s.PushFromV(this.e,e),this.e.PushFromV(this.s,e)},e.prototype.Rotate=function(t,e,o){var i=this.s.Copy();i.AddV(this.e),i.Multiply(e,void 0===o?e:o),this.s.RotateAroundV(i,t),this.e.RotateAroundV(i,t)},e.prototype.GetLength=function(){return this.s.GetDistanceV(this.e)},e.prototype.IntersectsPoint=function(){return!1},t.Geom.Line2D=e}},function(t,e){t.exports=function(t){"use strict";function e(){if(!(this instanceof e))return new e;this.vertices=[]}e.prototype=Object.create(null),e.prototype.constructor=e,e.TYPE=3,e.Construct=Object.create(null),e.Construct.Rectangular=function(e,o,i,n,r){var s=new t.Vector2D(o,i),p=new t.Vector2D(o+n,i),a=new t.Vector2D(o+n,i+r),h=new t.Vector2D(o,i+r);return e.Recreate([s,p,a,h]),e.ComputeBounds(),e},e.Construct.Equilateral=function(e,o,i,n,r){var s=new t.Vector2D(o,i),p=new t.Vector2D(o+.5*n,i+r),a=new t.Vector2D(o-.5*n,i+r);return e.Recreate([s,p,a]),e.ComputeBounds(),e},e.Construct.Cyclic=function(e,o,i,n,r){e.Recreate([]);var s,p,a,h=0,c=r,u=2*Math.PI/c;for(h;h<c;++h)a=u*h,s=Math.cos(a)*n,p=Math.sin(a)*n,e.AddPoint(new t.Vector2D(o+s,i+p));return e.ComputeBounds(),e},e.Construct.Star=function(e,o,i,n,r,s){e.Recreate([]);var p,a,h,c,u=0,l=2*s,y=2*Math.PI/l;for(u;u<l;++u)c=0==(1&u)?n:r,h=y*u,p=Math.cos(h)*c,a=Math.sin(h)*c,e.AddPoint(new t.Vector2D(o+p,i+a));return e.ComputeBounds(),e},e.Construct.Butterfly=function(o,i,n,r,s){o.Recreate([]);var p,a,h,c=0,u=e.Construct.Butterfly.C;for(c;c<r;++c)h=c*u._1*Math.PI/r,p=Math.cos(h)*(Math.exp(Math.cos(h))-u._2*Math.cos(u._3*h)-Math.pow(Math.sin(h/u._4),u._5))*s,a=Math.sin(h)*(Math.exp(Math.cos(h))-u._2*Math.cos(u._3*h)-Math.pow(Math.sin(h/u._4),u._5))*s,o.AddPoint(new t.Vector2D(i+p,n+a));return o.ComputeBounds(),o},e.Construct.Butterfly.C={_1:24,_2:2,_3:4,_4:12,_5:5,Reset:function(){this._1=24,this._2=2,this._3=4,this._4=12,this._5=5}},e.Construct.Supershape=function(o,i,n,r,s,p,a,h,c){a=void 0===a?1:a,h=void 0===h?1:h,c=void 0===c?1:c,o.Recreate([]);var u,l,y,f,d,v,m=0,w=s,x=e.Construct.Supershape.C;for(m;m<w;++m)y=m*Math.PI*2/s,d=Math.cos(p*y/4)/x._A,d=Math.abs(d),d=Math.pow(d,h),v=Math.sin(p*y/4)/x._B,v=Math.abs(v),v=Math.pow(v,c),f=Math.pow(d+v,1/a),0===Math.abs(f)?(u=0,l=0):(f=1/f,u=Math.cos(y)*f*r,l=Math.sin(y)*f*r),o.AddPoint(new t.Vector2D(i+u,n+l));return o.ComputeBounds(),o},e.Construct.Supershape.C={_A:1,_B:1},e.prototype.TYPE=e.TYPE,e.prototype.aabb=null,e.prototype.dirtyBounds=!0,e.prototype.AddPoint=function(t){this.vertices.push(t)},e.prototype.AddPoints=function(t){this.vertices=this.vertices.concat(t)},e.prototype.Recreate=function(t){void 0!==t?this.vertices=t:this.vertices.length=0},e.prototype.ComputeBounds=function(){null===this.aabb&&(this.aabb=new t.Geom.AABB2D);for(var e,o=1/0,i=-1/0,n=1/0,r=-1/0,s=0,p=this.vertices,a=p.length;s<a;++s)e=p[s],e.x<o&&(o=e.x),e.x>i&&(i=e.x),e.y<n&&(n=e.y),e.y>r&&(r=e.y);this.aabb.Set(o,n,i,r),this.dirtyBounds=!1},e.prototype.Rotate=function(t,e,o,i){!0===this.dirtyBounds&&!0===i?this.ComputeBounds():null===this.aabb&&this.ComputeBounds();var n=this.aabb,r=n.tl.Copy();r.AddV(n.br),r.Multiply(e,void 0===o?e:o);var s,p=0,a=this.vertices,h=a.length;for(t=t,p;p<h;++p)s=a[p],s.RotateAroundV(r,t);this.dirtyBounds=!0},e.prototype.GetCentroid=function(){for(var e,o=new t.Vector2D,i=0,n=this.vertices,r=n.length;i<r;++i)e=n[i],o.AddV(e);return o.Divide(r,r),o},e.prototype.IntersectsPoint=function(t){return!0===this.dirtyBounds&&this.ComputeBounds(),!1!==this.aabb.IntersectsPoint(t)},t.Geom.Polygon2D=e}},function(t,e){t.exports=function(t){"use strict";function e(o){if(!(this instanceof e))return new e(o);this.element=o,this.element.setAttribute("tabindex","1"),this.element.focus(),this.element.addEventListener("keydown",this.OnKeyDown.bind(this)),this.element.addEventListener("keyup",this.OnKeyUp.bind(this)),this.onDown=new t.Event.LocalEvent,this.onUp=new t.Event.LocalEvent}e.prototype=Object.create(null),e.prototype.constructor=e,e.prototype.OnKeyDown=function(t){t.preventDefault(),t.stopPropagation(),this.onDown.Dispatch(this.element,t)},e.prototype.OnKeyUp=function(t){t.preventDefault(),t.stopPropagation(),this.onUp.Dispatch(this.element,t)},t.Input.Keyboard=e}},function(t,e){t.exports=function(t){"use strict";function e(o,i,n){if(!(this instanceof e))return new e(o,i,n);this.element=o,this.position=new t.Vector2D,this.scale=new t.Vector2D(1,1),this.anchor=new t.Vector2D,this.offset=new t.Vector2D(i,n),this.element.addEventListener("mousemove",this.OnMove.bind(this)),this.element.addEventListener("mousedown",this.OnDown.bind(this)),this.element.addEventListener("mouseup",this.OnUp.bind(this)),this.element.addEventListener("mouseleave",this.OnLeave.bind(this)),this.element.addEventListener("wheel",this.OnWheel.bind(this)),this.onMove=new t.Event.LocalEvent,this.onDown=new t.Event.LocalEvent,this.onUp=new t.Event.LocalEvent,this.onLeave=new t.Event.LocalEvent,this.onWheel=new t.Event.LocalEvent}e.prototype=Object.create(null),e.prototype.constructor=e,e.prototype.OnMove=function(t){t.preventDefault(),t.stopPropagation();var e=this.element,o=this.position;o.Set(t.pageX,t.pageY),o.Subtract(e.offsetLeft,e.offsetTop),o.SubtractV(this.offset),o.DivideV(this.scale),this.onMove.Dispatch(this.element,{position:o,native:t})},e.prototype.OnDown=function(t){t.stopPropagation(),this.onDown.Dispatch(this.element,{position:this.position,native:t})},e.prototype.OnUp=function(t){t.stopPropagation(),this.onUp.Dispatch(this.element,{position:this.position,native:t})},e.prototype.OnLeave=function(t){t.preventDefault(),t.stopPropagation(),this.onLeave.Dispatch(this.element,{position:this.position,native:t})},e.prototype.OnWheel=function(t){this.onWheel.Dispatch(this.element,{position:this.position,native:t})},t.Input.Mouse=e,Object.defineProperty(e.prototype,"x",{get:function(){return this.position.x}}),Object.defineProperty(e.prototype,"y",{get:function(){return this.position.y}})}},function(t,e){t.exports=function(t){"use strict";function e(o){if(!(this instanceof e))return new e(o);this.cache=[],this.onTextureLoaded=new t.Event.LocalEvent,this.onComplete=new t.Event.LocalEvent,this.OnLoad=this.OnLoad.bind(this),void 0!==o&&this.Load(o)}e.prototype=Object.create(null),e.prototype.constructor=e,e.prototype.count=0,e.prototype.loading=!1,e.prototype.toLoad=null,e.prototype.Load=function(t){null===this.toLoad&&(this.toLoad=[]),this.toLoad=this.toLoad.concat(t),!1===this.loading&&(this.count=0,this.loading=!0,this.Haul(this.count))},e.prototype.Haul=function(t){var e=this.toLoad[t];if(void 0!==e){if(null!==this.Get(e.id))throw new Error("Invalid identifier");var o=new Image;o.onload=this.OnLoad,o.src=e.src,o.data={id:e.id}}else this.onComplete.Dispatch(this,{cache:this.cache}),this.count=0,this.loading=!1,this.toLoad=null},e.prototype.OnLoad=function(t){var e={id:t.target.data.id,image:t.target};this.cache.push(e),delete t.target.data,this.onTextureLoaded.Dispatch(e,{count:this.count}),this.Haul(++this.count)},e.prototype.Get=function(t){for(var e,o=0,i=this.cache.length;o<i;++o)if((e=this.cache[o])&&e.id===t)return e.image;return null},t.Load.TextureLoader=e}},function(t,e){t.exports=function(t){"use strict";var e=Object.create(null);e.AABB2DvsAABB2D=Object.create(null),e.AABB2DvsAABB2D.Relative=Object.create(null),e.CirclevsCircle=Object.create(null),e.CirclevsCircle.Relative=Object.create(null),e.VectorSortMinMag=function(t,e){return t.GetMagnitude()-e.GetMagnitude()},e.AABB2DvsAABB2D.Collide=function(o,i){var n=o.tl,r=i.tl,s=(o.br,i.br,r.x+o.w),p=n.x+i.w,a=r.y+o.h,h=n.y+i.h;if(n.x<s&&r.x<p&&n.y<a&&r.y<h){var c=[new t.Vector2D(n.x-s,0),new t.Vector2D(p-r.x,0),new t.Vector2D(0,n.y-a),new t.Vector2D(0,h-r.y)];return c.sort(e.VectorSortMinMag),c[0]}return null},e.CirclevsCircle.Collide=function(e,o){var i=e.radius,n=e.radius,r=i+n,s=e.center.Copy(),p=o.center.Copy(),a=p.SubtractVC(s),h=Math.abs(a.GetMagnitudeSquared());if(r*r>h){var c=Math.sqrt(h),u=(e.radiusSquared-o.radiusSquared+h)/(c+c),l=new t.Vector2D(s.x+a.x*u/c,s.y+a.y*u/c),y=Math.sqrt(o.radiusSquared-u*u)/c,f=-a.y*y,d=a.x*y,v=new t.Vector2D(l.x+f,l.y+d),m=new t.Vector2D(l.x-f,l.y-d),w=s.SubtractVC(p);return w.Divide(r,r),{poc:[l,v,m],mtv:w,delta:a}}return null},e.AABB2DvsAABB2D.Relative.Intersect=function(t,e){var o=t.shape,i=o.w,n=o.h,r=t.anchor,s=e.shape,p=s.w,a=s.h,h=e.anchor,c=o.tl.SubtractVC(t.relative),u=s.tl.SubtractVC(e.relative);return void 0!==r&&(0!==r.x&&(c.x+=r.x*i),0!==r.y&&(c.y+=r.y*n)),void 0!==h&&(0!==h.x&&(u.x+=h.x*p),0!==h.y&&(u.y+=h.y*a)),c.x<u.x+i&&u.x<c.x+p&&c.y<u.y+n&&u.y<c.y+a},e.AABB2DvsAABB2D.Relative.Collide=function(o,i){var n=o.shape,r=n.w,s=n.h,p=o.anchor,a=i.shape,h=a.w,c=a.h,u=i.anchor,l=n.tl.SubtractVC(o.relative),y=a.tl.SubtractVC(i.relative);void 0!==p&&(0!==p.x&&(l.x+=p.x*r),0!==p.y&&(l.y+=p.y*s)),void 0!==u&&(0!==u.x&&(y.x+=u.x*h),0!==u.y&&(y.y+=u.y*c));var f=y.x+r,d=l.x+h,v=y.y+s,m=l.y+c;if(l.x<f&&y.x<d&&l.y<v&&y.y<m){var w=[new t.Vector2D(l.x-f,0),new t.Vector2D(d-y.x,0),new t.Vector2D(0,l.y-v),new t.Vector2D(0,m-y.y)];return w.sort(e.VectorSortMinMag),w[0]}return null},e.CirclevsCircle.Relative.Intersect=function(t,e){var o=t.shape,i=e.shape,n=o.radius+i.radius,r=t.anchor,s=e.anchor,p=t.relative.Copy(),a=e.relative.Copy();return void 0!==r&&(0!==r.x&&(p.x-=r.x*o.diameter),0!==r.y&&(p.y-=r.y*o.diameter)),void 0!==s&&(0!==s.x&&(a.x-=s.x*i.diameter),0!==s.y&&(a.y-=s.y*i.diameter)),n*n>=p.GetDistanceSquaredV(a)},e.CirclevsCircle.Relative.Collide=function(e,o){var i=e.shape,n=o.shape,r=i.radius,s=n.radius,p=r+s,a=e.anchor,h=o.anchor,c=e.relative.Copy(),u=o.relative.Copy();void 0!==a&&(0!==a.x&&(c.x+=a.x*i.diameter),0!==a.y&&(c.y+=a.y*i.diameter)),void 0!==h&&(0!==h.x&&(u.x+=h.x*n.diameter),0!==h.y&&(u.y+=h.y*n.diameter));var l=u.SubtractVC(c),y=Math.abs(l.GetMagnitudeSquared());if(p*p>y){var f=Math.sqrt(y),d=(i.radiusSquared-n.radiusSquared+y)/(f+f),v=new t.Vector2D(c.x+l.x*d/f,c.y+l.y*d/f),m=Math.sqrt(i.radiusSquared-d*d)/f,w=-l.y*m,x=l.x*m,S=new t.Vector2D(v.x+w,v.y+x),b=new t.Vector2D(v.x-w,v.y-x),D=c.SubtractVC(u);return D.Divide(p,p),{poc:[v,S,b],mtv:D,delta:l}}return null},e.CirclevsCircle.Relative.ElasticResponse=function(t,e,o){var i=o.delta.Copy();i.Normalize();var n=t.mass,r=e.mass,s=t.velocity,p=e.velocity,a=s.GetDotV(i),h=p.GetDotV(i),c=2*(a-h)/(n+r);s.Set(s.x-c*r*i.x,s.y-c*r*i.y),p.Set(p.x+c*n*i.x,p.y+c*n*i.y),t.relative.AddV(s),e.relative.AddV(p)},t.Math.Collision2D=e}},function(t,e){t.exports=function(t){"use strict";t.Math.Ease=Object.create(null),t.Math.Ease.Linear=function(t,e,o,i){return o*t/i+e},t.Math.Ease.QuadIn=function(t,e,o,i){return t/=i,o*t*t+e},t.Math.Ease.QuadOut=function(t,e,o,i){return t/=i,-o*t*(t-2)+e},t.Math.Ease.QuadInOut=function(t,e,o,i){return(t/=.5*i)<1?.5*o*t*t+e:(t--,.5*-o*(t*(t-2)-1)+e)},t.Math.Ease.SineIn=function(t,e,o,i){return-o*Math.cos(t/i*(.5*Math.PI))+o+e},t.Math.Ease.SineOut=function(t,e,o,i){return o*Math.sin(t/i*(.5*Math.PI))+e},t.Math.Ease.SineInOut=function(t,e,o,i){return.5*-o*(Math.cos(Math.PI*t/i)-1)+e}}},function(t,e){t.exports=function(t){"use strict";t.Math.PII=2*Math.PI,t.Math.DEGREES_TO_RADIANS=Math.PI/180,t.Math.RADIANS_TO_DEGREES=180/Math.PI,t.Math.RADIAN=t.Math.DEGREES_TO_RADIANS,t.Math.DegreesToRadians=function(e){return e*t.Math.DEGREES_TO_RADIANS},t.Math.DTR=t.Math.DegreesToRadians,t.Math.RadiansToDegrees=function(e){return e*t.Math.RADIANS_TO_DEGREES},t.Math.RTD=t.Math.RadiansToDegrees,t.Math.PrecisionRound=function(t,e){var o=Math.pow(10,e);return Math.round(o*t)/o},t.Math.PR=t.Math.PrecisionRound,t.Math.Spread=function(t,e,o,i){return t-o*(e-1)*.5+i*o},t.Math.Attract=function(t,e,o,i,n){var r=e.SubtractVC(t);if(r.GetMagnitudeSquared()<i*i){var s=r.GetAngle();o.Add(Math.cos(s)*n,Math.sin(s)*n)}},t.Math.Repel=function(t,e,o,i,n){var r=t.SubtractVC(e);if(r.GetMagnitudeSquared()<i*i){var s=r.GetAngle();o.Add(Math.cos(s)*n,Math.sin(s)*n)}},t.Math.LikeASquareGrid=function(t,e,o,i){for(var n=0,r=t.length,s=e/o|0;n<r;++n)t[n].Set(n%s*o,(n/s|0)*i)},t.Math.SquareGrid=function(t,e,o,i,n){for(var r=[],s=0,p=t/o|0,a=e/i|0,h=p*a;s<h;++s)r.push(new n(s%p*o,(s/p|0)*i));return r},Object.defineProperty(t.Math,"PII",{writable:!1}),Object.defineProperty(t.Math,"DEGREES_TO_RADIANS",{writable:!1}),Object.defineProperty(t.Math,"RADIANS_TO_DEGREES",{writable:!1}),Object.defineProperty(t.Math,"RADIAN",{writable:!1})}},function(t,e){t.exports=function(t){"use strict";function e(){if(!(this instanceof e))return new e}e.prototype=Object.create(null),e.prototype.constructor=e,e.prototype.a=1,e.prototype.b=0,e.prototype.c=0,e.prototype.d=1,e.prototype.e=0,e.prototype.f=0,e.prototype.Copy=function(){var t=new e;return t.Set(this.a,this.b,this.c,this.d,this.e,this.f),t},e.prototype.Set=function(t,e,o,i,n,r){this.a=t,this.b=e,this.c=o,this.d=i,this.e=n,this.f=r},e.prototype.Translate=function(t,e){this.e+=t,this.f+=e},e.prototype.TranslateV=function(t){this.e+=t.x,this.f+=t.y},e.prototype.TranslateTo=function(t,e){this.e=t,this.f=e},e.prototype.TranslateToV=function(t){this.e=t.x,this.f=t.y},e.prototype.Scale=function(t,e){this.a*=t,this.b*=e,this.c*=t,this.d*=e,this.e*=t,this.f*=e},e.prototype.ScaleV=function(t){var e=t.x,o=t.y;this.a*=e,this.b*=o,this.c*=e,this.d*=o,this.e*=e,this.f*=o},e.prototype.Rotate=function(t){var e=Math.cos(t),o=Math.sin(t),i=this.a,n=this.c,r=this.e;this.a=i*e-this.b*o,this.b=i*o+this.b*e,this.c=n*e-this.d*o,this.d=n*o+this.d*e,this.e=r*e-this.f*o,this.f=r*o+this.f*e},e.prototype.Identity=function(){this.a=1,this.b=0,this.c=0,this.d=1,this.e=0,this.f=0},e.prototype.Append=function(t){var e=this.a,o=this.b,i=this.c,n=this.d;this.a=t.a*e+t.b*i,this.b=t.a*o+t.b*n,this.c=t.c*e+t.d*i,this.d=t.c*o+t.d*n,this.e=this.e+t.e*e+t.f*i,this.f=this.f+t.e*o+t.f*n},e.prototype.Prepend=function(t){var e=this.e;if(1!==t.a||t.b||t.c||1!==t.d){var o=this.a,i=this.c;this.a=o*t.a+this.b*t.c,this.b=o*t.b+this.b*t.d,this.c=i*t.a+this.d*t.c,this.d=i*t.b+this.d*t.d}this.e=t.e+e*t.a+this.f*t.c,this.f=t.f+e*t.b+this.f*t.d},e.prototype.ApplyToContext=function(t){t.setTransform(this.a,this.b,this.c,this.d,this.e,this.f)},t.Math.Matrix2D=e,t.Matrix2D=e}},function(t,e){t.exports=function(t){"use strict";function e(o,i){if(!(this instanceof e))return new e;this.position=new t.Vector2D(o,i),this.scale=new t.Vector2D(1,1),this.localTransform=new t.Vector2D(0,0),this.worldTransform=new t.Vector2D(0,0)}e.prototype=Object.create(null),e.prototype.constructor=e,e.prototype.UpdateLocal=function(){this.localTransform.SetV(this.position)},e.prototype.UpdateWorld=function(t){var e=this.localTransform;e.SetV(this.position),this.worldTransform.Set(t.e+e.x,t.f+e.y)},e.prototype.ApplyWorld=function(t){t.setTransform(this.scale.x,0,0,this.scale.y,this.worldTransform.x,this.worldTransform.y)},t.Math.Basetransform2D=e}},function(t,e){t.exports=function(t){"use strict";function e(o,i){if(!(this instanceof e))return new e;this.position=t.Vector2D(o,i),this.scale=new t.Vector2D(1,1),this.skew=new t.Vector2D(0,0),this.pivot=new t.Vector2D(0,0),this.localTransform=new t.Matrix2D,this.worldTransform=new t.Matrix2D}e.prototype=Object.create(null),e.prototype.constructor=e,e.prototype.rotation=0,e.prototype.skewCX=1,e.prototype.skewSX=0,e.prototype.skewCY=0,e.prototype.skewSY=1,e.prototype.UpdateLocal=function(){var t=this.localTransform,e=this.position,o=this.scale,i=(this.skew,this.pivot);return t.a=this.skewCX*o.x,t.b=this.skewSX*o.x,t.c=this.skewCY*o.y,t.d=this.skewSY*o.y,t.e=e.x-(i.x*t.a+i.y*t.c),t.f=e.y-(i.y*t.b+i.y*t.d),t},e.prototype.UpdateWorld=function(t){var e=this.localTransform,o=this.worldTransform,i=this.position,n=this.scale,r=(this.skew,this.pivot);e.a=this.skewCX*n.x,e.b=this.skewSX*n.x,e.c=this.skewCY*n.y,e.d=this.skewSY*n.y,e.e=i.x-(r.x*e.a+r.y*e.c),e.f=i.y-(r.y*e.b+r.y*e.d),o.a=e.a*t.a+e.b*t.c,o.b=e.a*t.b+e.b*t.d,o.c=e.c*t.a+e.d*t.c,o.d=e.c*t.b+e.d*t.d,o.e=e.e*t.a+e.f*t.c+t.e,o.f=e.e*t.b+e.f*t.d+t.f},e.prototype.UpdateSkew=function(){var t=this.skew,e=this.rotation;this.skewCX=Math.cos(e+t.y),this.skewSX=Math.sin(e+t.y),this.skewCY=-Math.sin(e-t.x),this.skewSY=Math.cos(e-t.x)},e.prototype.ApplyWorld=function(t){this.worldTransform.ApplyToContext(t)},t.Math.Transform2D=e}},function(t,e){t.exports=function(t){"use strict";function e(i,n,r,s,p,a){if(!(this instanceof e))return new e(i,n,r,s,p,a);o.call(this,i,n),this.floor=new t.Vector2D(r,s),this.ceil=new t.Vector2D(p,a)}var o=t.Vector2D;e.prototype=Object.create(o.prototype),e.prototype.constructor=e,e.prototype.invert=!1,e.prototype.Copy=function(){var t=new e(this.x,this.y,this.floor.x,this.floor.y,this.ceil.x,this.ceil.y);return t.invert=this.invert,t},e.prototype.Limit=function(){var e=!1===this.invert?t.Utils.Clamp:t.Utils.InverseClamp,o=this.floor,i=this.ceil;this.x=e(this.x,o.x,i.x),this.y=e(this.y,o.y,i.y)},t.Math.LimitVector2D=e,t.LimitVector2D=e}},function(t,e){t.exports=function(t){"use strict";function e(t,o){if(!(this instanceof e))return new e(t,o);void 0!==t&&void 0!==t.x&&void 0!==t.y?(this.x=t.x,this.y=t.y):void 0!==t&&(void 0===o?(this.x=t,this.y=t):(this.x=t,this.y=o))}e.prototype=Object.create(null),e.prototype.constructor=e,e.Pool=new t.Utils.Pool(e),e.Pool.Retrieve=function(t,e){0===this.objects.length&&this.Flood();var o=this.objects.pop();return o.Set(t,e),o},e.Pool.Flood(function(){},1e3),e.prototype.x=0,e.prototype.y=0,e.prototype.Copy=function(){return new e(this)},e.prototype.AbsoluteCopy=function(){var t=this.Copy();return t.Positive(),t},e.prototype.SetV=function(t){this.x=t.x,this.y=t.y},e.prototype.Set=function(t,e){void 0!==t&&void 0===e?(this.x=t,this.y=t):(this.x=t,this.y=e)},e.prototype.Is0=function(){return 0===this.x&&0===this.y},e.prototype.AddV=function(t){this.x+=t.x,this.y+=t.y},e.prototype.AddVC=function(t){var e=this.Copy();return e.AddV(t),e},e.prototype.Add=function(t,e){this.x+=t,this.y+=e},e.prototype.SubtractV=function(t){this.x-=t.x,this.y-=t.y},e.prototype.SubtractVC=function(t){var e=this.Copy();return e.SubtractV(t),e},e.prototype.Subtract=function(t,e){this.x-=t,this.y-=e},e.prototype.MultiplyV=function(t){this.x*=t.x,this.y*=t.y},e.prototype.MultiplyVC=function(t){var e=this.Copy();return e.MultiplyV(t),e},e.prototype.Multiply=function(t,e){this.x*=t,this.y*=e},e.prototype.DivideV=function(t){this.x/=t.x,this.y/=t.y},e.prototype.DivideVC=function(t){var e=this.Copy();return e.DivideV(t),e},e.prototype.Divide=function(t,e){this.x/=t,this.y/=e},e.prototype.Normalize=function(){var t=this.GetMagnitude();this.Divide(t,t)},e.prototype.Positive=function(){this.x=Math.abs(this.x),this.y=Math.abs(this.y)},e.prototype.Negative=function(){this.x=-Math.abs(this.x),this.y=-Math.abs(this.y)},e.prototype.Invert=function(){this.x=-1*this.x,this.y=-1*this.y},e.prototype.Rotate=function(t){var e=Math.sin(t),o=Math.cos(t),i=this.x,n=this.y;this.x=i*o-n*e,this.y=i*e+n*o},e.prototype.RotateAroundV=function(t,e){this.SubtractV(t),this.Rotate(e),this.AddV(t)},e.prototype.RotateAround=function(t,e,o){this.Subtract(t,e),this.Rotate(o),this.Add(t,e)},e.prototype.PushFromV=function(t,e){var o=this.Copy();o.SubtractV(t),o.Normalize(),o.Multiply(e,e),this.AddV(o)},e.prototype.PushFrom=function(t,e,o){var i=this.Copy();i.Subtract(t,e),i.Normalize(),i.Multiply(o,o),this.AddV(i)},e.prototype.GetAngle=function(){return Math.atan2(this.y,this.x)},e.prototype.GetAngleBetween=function(t,e){return Math.atan2(this.y-e,this.x-t)},e.prototype.GetAngleBetweenV=function(t){return Math.atan2(this.y-t.y,this.x-t.x)},e.prototype.GetDotV=function(t){return this.x*t.x+this.y*t.y},e.prototype.GetDot=function(t,e){return this.x*t+this.y*e},e.prototype.GetCrossV=function(t){return this.x*t.y+this.y*t.x},e.prototype.GetCross=function(t,e){return this.x*e+this.y*t},e.prototype.GetMagnitudeSquared=function(){return this.x*this.x+this.y*this.y},e.prototype.GetMagnitude=function(){return Math.sqrt(this.GetMagnitudeSquared())},e.prototype.GetDistanceV=function(t){var e=this.Copy();return e.SubtractV(t),e.GetMagnitude()},e.prototype.GetDistance=function(t,e){var o=this.Copy();return o.Subtract(t,e),o.GetMagnitude()},e.prototype.GetDistanceSquaredV=function(t){var e=this.Copy();return e.SubtractV(t),e.GetMagnitudeSquared()},e.prototype.GetDistanceSquared=function(t,e){var o=this.Copy();return o.Subtract(t,e),o.GetMagnitudeSquared()},e.prototype.IsEqualTo=function(t,e){return this.x===t&&this.y===e},e.prototype.IsEqualToV=function(t){return this.x===t.x&&this.y===t.y},e.prototype.ProjectOnto=function(t){var o=this.GetDotV(t);if(0===o)return new e;var i=t.GetMagnitude(),n=o/(i*i),r=t.Copy();return r.Multiply(n,n),r},e.prototype.Store=function(){e.Pool.Store(this)},e.prototype.GetLength=e.prototype.GetMagnitude,e.prototype.GetLengthSquared=e.prototype.GetMagnitudeSquared,t.Math.Vector2D=e,t.Vector2D=e}},function(t,e){t.exports=function(t){"use strict";function e(t){if(!(this instanceof e))return new e(t);this.motions=[],this.target=t}e.prototype=Object.create(null),e.prototype.constructor=e,e.prototype.target=null,e.prototype.motions=null,e.prototype.Create=function(e,o,i,n,r){if(null===this.GetMotion(e)){var s=new t.Motion(e,this.target,o,i,n,r);return this.motions.push(s),s}return null},e.prototype.Add=function(t){null===this.GetMotion(t.id)&&this.motions.push(t)},e.prototype.Start=function(t){var e=this.GetMotion(t);return null!==e&&e.Start(),e},e.prototype.StartMultiple=function(t){t=t.split(" ");for(var e=0,o=t.length;e<o;++e)this.Start(t[e])},e.prototype.Stop=function(t){var e=this.GetMotion(t);return null!==e&&e.Stop(),e},e.prototype.StopMultiple=function(t){t=t.split(" ");for(var e=0,o=t.length;e<o;++e)this.Stop(t[e])},e.prototype.Reset=function(t){var e=this.GetMotion(t);return null!==e&&e.Reset(),e},e.prototype.ResetMultiple=function(t){t=t.split(" ");for(var e=0,o=t.length;e<o;++e)this.Reset(t[e])},e.prototype.Process=function(){for(var t,e=0,o=this.motions,i=o.length;e<i;++e)t=o[e],t.Process()},e.prototype.GetMotion=function(t){for(var e,o=0,i=this.motions,n=i.length;o<n;++o)if(e=i[o],e.id===t)return e;return null},t.MotionManager=e}},function(t,e){t.exports=function(t){"use strict";function e(o,i,n,r,s,p){if(!(this instanceof e))return new e(o,i,n,r,s,p);this.id=o,this.target=i,this.propertyString=n,void 0!==r&&(this.value=r),void 0!==s&&(this.duration=s),this.easing=t.Math.Ease[void 0===p?e.DEFAULT_EASING:p],this.onStart=new t.Event.LocalEvent,this.onEnd=new t.Event.LocalEvent,this.onStop=new t.Event.LocalEvent,this.onReconfigure=new t.Event.LocalEvent,this.onReset=new t.Event.LocalEvent}e.prototype=Object.create(null),e.prototype.constructor=e,e.DEFAULT_EASING="Linear",e.prototype.id=null,e.prototype.target=null,e.prototype.easing=null,e.prototype.duration=1e3,e.prototype.time=0,e.prototype.value=1,e.prototype.startValue=0,e.prototype.propertyString=null,e.prototype.change=0,e.prototype.property=null,e.prototype.propertyObject=null,e.prototype.running=!1,e.prototype.Start=function(){var e=this.propertyString.split(".");this.property=e[e.length-1],this.propertyObject=t.Utils.Nested(this.target,this.propertyString,!0),this.startValue=this.propertyObject[this.property],this.change=this.value-this.startValue,this.time=0,this.running=!0,this.onStart.Dispatch(this,null)},e.prototype.Stop=function(){delete this.property,delete this.propertyObject,delete this.startValue,delete this.change,delete this.time,delete this.running,this.onStop.Dispatch(this,null)},e.prototype.Process=function(){!0===this.running&&(this.propertyObject[this.property]=this.easing(this.time,this.startValue,this.change,this.duration),++this.time>=this.duration&&(this.running=!1,this.propertyObject[this.property]=this.value,this.onEnd.Dispatch(this,null)))},e.prototype.Reconfigure=function(o,i,n,r){void 0!==o&&(this.propertyString=o),this.value=i,this.duration=n,this.easing=t.Math.Ease[void 0===r?e.DEFAULT_EASING:r],this.onReconfigure.Dispatch(this,null)},e.prototype.Reset=function(){if(null===this.propertyObject||null===this.property)return!1;this.propertyObject[this.property]=this.startValue,delete this.property,delete this.propertyObject,delete this.startValue,delete this.change,delete this.time,delete this.running,this.onReset.Dispatch(this,null)},t.Motion=e}},function(t,e){t.exports=function(t){"use strict";function e(i,n,r,s){if(!(this instanceof e))return new e(i,n,r,s);o.call(this,i,n,r,s),this.style=t.Style.CreateFSSa()}var o=t.Geom.AABB2D;e.prototype=Object.create(o.prototype),e.prototype.constructor=e,e.prototype.Draw=function(t){var e=this.tl,o=this.br,i=this.style,n=i.fill,r=i.stroke,s=i.shadow;t.beginPath(),t.moveTo(e.x,e.y),t.lineTo(o.x,e.y),t.lineTo(o.x,o.y),t.lineTo(e.x,o.y),t.closePath(),!0===s.applied&&s.Apply(t),!0===n.applied&&(n.Apply(t),t.fill()),!0===r.applied&&(r.Apply(t),t.stroke())},t.Path.AABB2D=e}},function(t,e){t.exports=function(t){"use strict";function e(i,n,r){if(!(this instanceof e))return new e(i,n,r);o.call(this,i,n,r),this.style=t.Style.CreateFSSa()}var o=t.Geom.Circle;e.prototype=Object.create(o.prototype),e.prototype.constructor=e,e.prototype.Draw=function(e){var o=this.center,i=this.style,n=i.fill,r=i.stroke,s=i.shadow;e.beginPath(),e.arc(o.x,o.y,this.radius,0,t.Math.PII,!1),e.closePath(),!0===s.applied&&s.Apply(e),!0===n.applied&&(n.Apply(e),e.fill()),!0===r.applied&&(r.Apply(e),e.stroke())},t.Path.Circle=e}},function(t,e){t.exports=function(t){"use strict";function e(i,n,r,s){if(!(this instanceof e))return new e(i,n,r,s);o.call(this,i,n,r,s),this.style=t.Style.CreateSSa()}var o=t.Geom.Line2D;e.prototype=Object.create(o.prototype),e.prototype.constructor=e,e.prototype.Draw=function(t){var e=this.s,o=this.e,i=this.style,n=(i.fill,i.stroke),r=i.shadow;t.beginPath(),t.moveTo(e.x,e.y),t.lineTo(o.x,o.y),t.closePath(),!0===r.applied&&r.Apply(t),!0===n.applied&&(n.Apply(t),t.stroke())},t.Path.Line2D=e}},function(t,e){t.exports=function(t){"use strict";function e(){if(!(this instanceof e))return new e;o.call(this),this.style=t.Style.CreateFSSa()}var o=t.Geom.Polygon2D;e.prototype=Object.create(o.prototype),e.prototype.constructor=e,e.prototype.Draw=function(t){var e=this.style,o=e.fill,i=e.stroke,n=e.shadow,r=this.vertices,s=r[0];t.beginPath(),t.moveTo(s.x,s.y);for(var p=1,a=r.length;p<a;++p)s=r[p],t.lineTo(s.x,s.y);t.closePath(),!0===n.applied&&n.Apply(t),!0===o.applied&&(o.Apply(t),t.fill()),!0===i.applied&&(i.Apply(t),t.stroke())},t.Path.Polygon2D=e}},function(t,e){t.exports=function(t){"use strict";function e(o){if(!(this instanceof e))return new e(o);t.Utils.ApplyProperties(this,o)}e.prototype=Object.create(null),e.prototype.constructor=e,e.prototype.color="#444499",e.prototype.applied=!0,e.prototype.Apply=function(t){t.fillStyle=this.color},t.Style.Fill=e}},function(t,e){t.exports=function(t){"use strict";function e(o){if(!(this instanceof e))return new e(o);t.Utils.ApplyProperties(this,o)}e.prototype=Object.create(null),e.prototype.constructor=e,e.prototype.color="#000000",e.prototype.blur=5,e.prototype.offsetX=0,e.prototype.offsetY=0,e.prototype.applied=!1,e.prototype.Apply=function(t){t.shadowColor=this.color,t.shadowBlur=this.blur,t.shadowOffsetX=this.offsetX,t.shadowOffsetY=this.offsetY},t.Style.Shadow=e}},function(t,e){t.exports=function(t){"use strict";function e(o){if(!(this instanceof e))return new e(o);t.Utils.ApplyProperties(this,o)}e.prototype=Object.create(null),e.prototype.constructor=e,t.Style.LINE_CAP={ROUND:"round",BUTT:"butt",SQUARE:"square"},t.Style.LINE_JOIN={BEVEL:"bevel",ROUND:"round",MITER:"miter"},e.prototype.color="#00FFFF",e.prototype.lineCap=t.Style.LINE_CAP.ROUND,e.prototype.lineJoin=t.Style.LINE_JOIN.ROUND,e.prototype.lineWidth=1,e.prototype.miterLimit=10,e.prototype.applied=!0,e.prototype.Apply=function(t){t.strokeStyle=this.color,t.lineCap=this.lineCap,t.lineJoin=this.lineJoin,t.lineWidth=this.lineWidth,t.miterLimit=this.miterLimit},t.Style.Stroke=e}},function(t,e){t.exports=function(t){"use strict";t.Style.CreateAll=function(){return{fill:new t.Style.Fill,stroke:new t.Style.Stroke,shadow:new t.Style.Shadow,text:new t.Style.Text}},t.Style.CreateFSSa=function(){return{fill:new t.Style.Fill,stroke:new t.Style.Stroke,shadow:new t.Style.Shadow}},t.Style.CreateSSa=function(){return{stroke:new t.Style.Stroke,shadow:new t.Style.Shadow}},t.Style.CreateFSa=function(){return{fill:new t.Style.Fill,shadow:new t.Style.Shadow}},t.Style.CreateSaT=function(){return{shadow:new t.Style.Shadow,text:new t.Style.Text}}}},function(t,e){t.exports=function(t){"use strict";function e(o){if(!(this instanceof e))return new e(o);t.Utils.ApplyProperties(this,o),this.ConcatFont()}e.prototype=Object.create(null),e.prototype.constructor=e,t.Style.TEXT_ALIGN={START:"start",END:"end",CENTER:"center",LEFT:"left",RIGHT:"right"},t.Style.TEXT_BASELINE={ALPHABETIC:"alphabetic",TOP:"top",HANGING:"hanging",MIDDLE:"middle",IDEOGRAPHIC:"ideographic",BOTTOM:"bottom"},e.prototype.fillColor="#444499",e.prototype.strokeColor="#00FFFF",e.prototype.fontSize=22,e.prototype.font=null,e.prototype.fontFamily="Arial",e.prototype.align=t.Style.TEXT_ALIGN.LEFT,e.prototype.baseline=t.Style.TEXT_BASELINE.TOP,e.prototype.applied=!0,e.prototype.lineWidth=.5,e.prototype.Apply=function(t){t.fillStyle=this.fillColor,t.strokeStyle=this.strokeColor,t.font=this.font,t.textAlign=this.align,t.textBaseline=this.baseline,t.lineWidth=this.lineWidth},e.prototype.ConcatFont=function(){this.font=this.fontSize+"px "+this.fontFamily},t.Style.Text=e}},function(t,e){t.exports=function(t){"use strict";function e(t,o,i){if(!(this instanceof e))return new e(t,o,i);if("function"!=typeof t)throw new Error("Ticker: An onProcess function is required!");this.SetDesiredRate(o),this.onProcess=t,void 0!==i&&!1!==i||this.StartAF()}e.prototype=Object.create(null),e.prototype.constructor=e,e.LOG=!0,e.GLOBAL_CSS="background-color:black;font-family:Arial;font-size:18px;",e.Log=function(){!1!==e.LOG&&console.log.apply(null,arguments)},e.prototype.intervalId=null,e.prototype.afId=null,e.prototype.delta=0,e.prototype.then=0,e.prototype.now=0,e.prototype.desiredRate=0,e.prototype.supplyDelta=!0,e.prototype.Process=function(){this.ComputeDelta(),this.onProcess(this.delta)},e.prototype.ProcessAF=function(){this.ComputeDelta(),this.onProcess(this.delta),null!==this.afId&&(this.afId=requestAnimationFrame(this.ProcessAF))},e.prototype.ComputeDelta=function(){this.now=(new Date).getTime(),this.delta=this.now-this.then,this.then=this.now},e.prototype.GetTPS=function(){return t.Math.PR(1/this.delta*1e3,2)},e.prototype.SetDesiredRate=function(t){this.desiredRate=void 0===t?16.66:1e3/t},e.prototype.Start=function(t){if(null!==this.afId)return e.Log("%cTicker: RAF is running!","color:red;".concat(e.GLOBAL_CSS)),null;null!==this.intervalId?!0===t?(this.Stop(),this.intervalId=setInterval(this.Process,this.desiredRate),e.Log("%cTicker: Starting interval!","color:#0F0;".concat(e.GLOBAL_CSS))):e.Log("%cTicker: Interval already running!","color:#F00;".concat(e.GLOBAL_CSS)):(this.intervalId=setInterval(this.Process.bind(this),this.desiredRate),e.Log("%cTicker: Starting interval!","color:#0F0;".concat(e.GLOBAL_CSS)))},e.prototype.StartAF=function(t){if(null!==this.intervalId)return e.Log("%cTicker: Interval is running!","color:#F00;".concat(e.GLOBAL_CSS)),null;null!==this.afId?!0===t?(this.Stop(),this.ProcessAF=this.ProcessAF.bind(this),this.afId=requestAnimationFrame(this.ProcessAF),e.Log("%cTicker: Starting RAF!","color:#0F0;".concat(e.GLOBAL_CSS))):e.Log("%cTicker: RAF already running!","color:#F00;".concat(e.GLOBAL_CSS)):(this.ProcessAF=this.ProcessAF.bind(this),this.afId=requestAnimationFrame(this.ProcessAF),e.Log("%cTicker: Starting RAF!","color:#0F0;".concat(e.GLOBAL_CSS)))},e.prototype.Stop=function(){null!==this.intervalId&&(clearInterval(this.intervalId),this.intervalId=null,e.Log("%cTicker: Stopping interval!","color:cyan;".concat(e.GLOBAL_CSS))),null!==this.afId&&(cancelAnimationFrame(this.afId),this.afId=null,e.Log("%cTicker: Stopping RAF!","color:cyan;".concat(e.GLOBAL_CSS)))},t.Time.Ticker=e,t.Ticker=e}},function(t,e){t.exports=function(t){"use strict";function e(o){if(!(this instanceof e))return new e(o);this.stopTime=Math.round(void 0===o?null:o),this.onStop=new t.LocalEvent,this.onStart=new t.LocalEvent,this.onReset=new t.LocalEvent}e.prototype=Object.create(null),e.prototype.constructor=e,e.prototype.time=0,e.prototype.isRunning=!1,e.prototype.count=0,e.prototype.Reset=function(t){this.onReset.Dispatch(this,null),this.count=0},e.prototype.Start=function(t){this.stopTime=Math.round(void 0===t?this.stopTime:t),this.stopTime<=0||(this.time=0,this.isRunning=!0,this.onStart.Dispatch(this,{stopTime:this.stopTime}))},e.prototype.Process=function(){this.time<this.stopTime&&!0===this.isRunning&&++this.time>=this.stopTime&&(this.isRunning=!1,this.count++,this.onStop.Dispatch(this,null))},t.Time.Timer=e,t.Timer=e}},function(t,e){t.exports=function(t){"use strict";function e(t,o,i,n){if(!(this instanceof e))return new e(t,o,i,n);this.channel=[void 0===t?0:t,void 0===o?0:o,void 0===i?0:i,void 0===n?1:n],this.ComputeValueRGBA()}var o=t.Utils.B16ToB10;e.prototype=Object.create(null),e.prototype.constructor=e,e.prototype.value="",e.prototype.currentConversion="",e.prototype.Copy=function(){var t=new e(this.channel[0],this.channel[1],this.channel[2],this.channel[3]);return t.value=this.value,t.currentConversion=this.currentConversion,t},e.prototype.ComputeValueRGBA=function(){this.value="rgba(".concat(this.channel.join(",").concat(")"))},e.prototype.ComputeValueHSLA=function(){this.value="hsla("+this.channel[0]+","+this.channel[1]+"%,"+this.channel[2]+"%,"+this.channel[3]+")"},e.prototype.ConvertToHSLA=function(t){var e=this.channel[0]/255,o=this.channel[1]/255,i=this.channel[2]/255,n=Math.max(e,o,i),r=Math.min(e,o,i),s=n-r,p=n+r,a=0,h=0,c=.5*p;n!==r&&(h=c>.5?s/(2-n-r):s/(n+r),a=n===e?(o-i)/s+(o<i?6:0):n===o?(i-e)/s+2:(e-o)/s+4,a/=6),this.channel[0]=360*a,this.channel[1]=100*h,this.channel[2]=100*c,!0===t&&(this.channel[0]=Math.round(this.channel[0]),this.channel[1]=Math.round(this.channel[1]),this.channel[2]=Math.round(this.channel[2])),this.currentConversion="hsl",this.ComputeValueHSLA()},e.prototype.SetRGB=function(e,o,i){var n=t.Utils.Clamp;this.channel[0]=n(e,0,255),this.channel[1]=n(o,0,255),this.channel[2]=n(i,0,255),this.currentConversion="rgb",this.ComputeValueRGBA()},e.prototype.SetHex=function(t){t=t.replace(/#/g,"");var e=t.match(/.{2}/g);e=e.map(o),this.SetRGB(e[0],e[1],e[2])},e.prototype.IncreaseChannel=function(t,e){this.channel[t]+=e,"rgb"===this.currentConversion?this.ComputeValueRGBA():"hsl"===this.currentConversion&&this.ComputeValueHSLA()},t.Color=e}},function(t,e){t.exports=function(t){"use strict";function e(){if(!(this instanceof e))return new e}e.prototype=Object.create(null),e.prototype.constructor=e,e.prototype.NONE=0,e.prototype.next=1,e.prototype.Add=function(t){t=t.toUpperCase(),void 0===this[t]&&(this[t]=this.next,this.next=this.next<<1)},t.Utils.FlagEnum=e}},function(t,e){t.exports=function(t){"use strict";function e(){if(!(this instanceof e))return new e}e.prototype=Object.create(null),e.prototype.constructor=e,e.prototype.value=0,e.prototype.Add=function(t){this.value|=t},e.prototype.Remove=function(t){this.value=this.value&~t},e.prototype.Compare=function(t){return 0!=(this.value&t)},e.prototype.Holds=function(t){return(this.value&t)===t},e.prototype.Toggle=function(t){this.value^=t},t.Utils.FlagList=e}},function(t,e){t.exports=function(t){"use strict";function e(t){if(!(this instanceof e))return new e(t);this.class=t,this.objects=[]}e.prototype=Object.create(null),e.prototype.constructor=e,e.prototype.class=null,e.prototype.objects=null,e.prototype.floodFunction=null,e.prototype.floodAmount=0,e.prototype.context=null,e.prototype.Store=function(t){this.objects.push(t)},e.prototype.Retrieve=function(){return 0===this.objects.length&&this.Flood(),this.objects.pop()},e.prototype.Flood=function(t,e,o){t&&(this.floodFunction=t),e&&(this.floodAmount=e),o&&(this.context=o);for(var i=0;i<this.floodAmount;++i){var n=new this.class;this.Store(n),this.floodFunction.call(this.context,n)}},e.prototype.Flush=function(){this.objects.length=0},e.prototype.Clean=function(){var t=this.objects.length;this.Flush(),this.Flood(void 0,t)},t.Utils.Pool=e,t.Pool=e}},function(t,e){t.exports=function(t){"use strict";t.Utils.RandomInteger=function(t,e){return Math.random()*(e-t+1)+t|0},t.Utils.RandomFloat=function(t,e){return Math.random()*(e-t)+t},t.Utils.IsInteger=function(t){return Number(t)===t&&t%1==0},t.Utils.IsFloat=function(t){return Number(t)===t&&t%1!=0},t.Utils.Clamp=function(t,e,o){return t<e?e:t>o?o:t},t.Utils.InverseClamp=function(t,e,o){return t<e?o:t>o?e:t},t.Utils.IntegerNotation=function(t,e,o){var i=t%e,n=t/e;return Math.ceil(0===i?n+1:n)+o+(1+i)},t.Utils.UUID=function(e,o,i,n){e=void 0===e?32:e,o=void 0===o?4:o,i=void 0===i?0:i,n=void 0===n?"-":n;for(var r,s,p="",a=0,h=e/o|0,c=t.Utils.CharacterSets[i];a<e;++a)r=a/h,0!==r&&Number.isInteger(r)?p+=n:(s=t.Utils.RandomInteger(1,c.length-1),p+=c.charAt(s));return p},t.Utils.CharacterSets=["0123456789ABCDEFGHJIKLMNOPQRSTUWVXYZabcdefghijklmnopqrstuwvxyz","0123456789ABCDEFGHJIKLMNOPQRSTUWVXYZabcdefghijklmnopqrstuwvxyz!?#$%@","0123456789","ABCDEFGHJIKLMNOPQRSTUWVXYZabcdefghijklmnopqrstuwvxyz","ABCDEFGHJIKLMNOPQRSTUWVXYZ","abcdefghijklmnopqrstuwvxyz"],t.Utils.ApplyProperties=function(t,e){if(void 0!==e){var o;for(o in e)void 0!==t[o]&&(t[o]=e[o])}},t.Utils.Nested=function(e,o,i,n,r,s){"string"==typeof o&&(s=void 0===s?".":s,o=o.split(s));var p;if(o.length>1){if(p=o.shift(),void 0!==e[p])return t.Utils.Nested(e[p],o,i,n,r,s)}else if(p=o.shift(),void 0!==e[p])return!0===n?void(e[p]=r):!0===i?e:e[p]},t.Utils.ArrayGetRandom=function(t,e){for(var o=[],i={},n=t.length,r=0,s=e;r<s;++r){var p=Math.random()*n|0;void 0===i[p]?(i[p]=null,o.push(t[p])):r--}return o},t.Utils.Cipher={},t.Utils.Decipher={},t.Utils.Cipher.CCH1=function(e,o){var i=[];o=void 0===o?1:o;for(var n,r,s=0,p=e.split(""),a=p.length;s<a;++s)n=p[s],n=(n.charCodeAt(0)+o).toString(2),r=t.Utils.RandomInteger(1,9),i.push(r+"x"+n.replace(/1/g,r));return i.join(" ")},t.Utils.Decipher.CCH1=function(t,e){var o=[];e=void 0===e?1:e;for(var i,n=0,r=t.split(" "),s=r.length;n<s;++n)i=r[n],i=i.slice(2-i.length),o.push(String.fromCharCode(parseInt(i.replace(/[2-9]/g,"1"),2)-e));return o.join("")},t.Utils.GenerateSimpleBase64Png=function(t){var e=t(),o=document.createElement("canvas");return o.width=e.w,o.height=e.h,e.Draw(o.getContext("2d")),o.toDataURL("image/png")},t.Utils.TextureFromDataURL=function(t){var e=new Image;return e.src=t,e}}},,,,,,,,,,,,,,,,,,,,,,function(t,e,o){t.exports=o(0)}]);