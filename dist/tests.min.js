/**
* @package     Nenkraft
* @author      Gustav 'Nuuf' Åberg <gustavrein@gmail.com>
* @version     0.7.5 (Beta)
* @copyright   (C) 2017-2018 Gustav 'Nuuf' Åberg
* @license     {@link https://github.com/Nuuf/nenkraft/blob/master/LICENSE}
*/
!function(t){function e(i){if(n[i])return n[i].exports;var o=n[i]={i:i,l:!1,exports:{}};return t[i].call(o.exports,o,o.exports,e),o.l=!0,o.exports}var n={};e.m=t,e.c=n,e.d=function(t,n,i){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:i})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="./",e(e.s=84)}(Array(84).concat([function(t,e,n){t.exports=n(85)},function(t,e,n){n(86),n(87),n(88),n(89),n(90),n(91),n(92),n(93),n(94),n(95),n(96),n(97),n(98);var i=[],o=n(99);o.keys().forEach(function(t){i.push(o(t))});for(var a=0,r=i.length;a<r;++a)i[a]()},function(t,e){},function(t,e,n){t.exports=n.p+"assets/images/1to8.png"},function(t,e,n){t.exports=n.p+"assets/images/4dots.png"},function(t,e,n){t.exports=n.p+"assets/images/glass-of-blueberryjuice.png"},function(t,e,n){t.exports=n.p+"assets/images/raindrop.png"},function(t,e,n){t.exports=n.p+"assets/images/smudge.png"},function(t,e,n){t.exports=n.p+"assets/images/colors.png"},function(t,e,n){t.exports=n.p+"assets/images/font.png"},function(t,e,n){t.exports=n.p+"assets/images/invaders/invaders.png"},function(t,e,n){t.exports=n.p+"assets/images/invaders/invaders-sheet.png"},function(t,e,n){t.exports=n.p+"assets/images/invaders/invaders-sheet-red.png"},function(t,e,n){t.exports=n.p+"assets/images/invaders/invaders-sheet-blue.png"},function(t,e,n){t.exports=n.p+"assets/images/invaders/invaders-sheet-green.png"},function(t,e,n){function i(t){return n(o(t))}function o(t){var e=a[t];if(!(e+1))throw new Error("Cannot find module '"+t+"'.");return e}var a={"./aabbcollision.test":100,"./animation.test":101,"./bitmapfont.test":102,"./butterflyish.test":103,"./camera.test":104,"./cli.test":105,"./clock.test":106,"./editor.test":107,"./elasticcollision.test":108,"./field.test":109,"./fractree.test":110,"./grabndrag.test":111,"./grid.test":112,"./invaders.test":113,"./magnet.test":114,"./motion.test":115,"./nightsky.test":116,"./particles.test":117,"./platformer.test":118,"./playground.test":119,"./polygoncollision.test":120,"./quadtree.test":121,"./rain.test":122,"./raycasting.test":123,"./reflectivecollision.test":124,"./sprite.test":125,"./stresstest.test":126,"./text.test":127,"./themask.test":128,"./tilesprite.test":129,"./webglanimation.test":130,"./webglbitmapfont.test":131,"./webglcircle.test":132,"./webglline2d.test":133,"./webglpixelbatch.test":134,"./webglrectangle.test":135,"./webglstresstest.test":136,"./webgltexturebatch.test":137,"./webgltilesprite.test":138};i.keys=function(){return Object.keys(a)},i.resolve=o,t.exports=i,i.id=99},function(t,e){t.exports=function(){function t(){var t=document.getElementsByTagName("canvas")[0];t.setAttribute("width",window.innerWidth),t.setAttribute("height",window.innerHeight),t.style.display="initial",t.style.position="absolute",t.style.top="100px",t.style.left="100px";var n=new nk.Stage2D(t,0,0);n.scale.Set(1,1),n.mouse.scale.SetV(n.scale);var i=new nk.Text(0,0,"Collide them!"),o=new nk.Graphic2D(300,100,new nk.Path.AABB2D(0,0,50,50)),a=new nk.Graphic2D(400,400,new nk.Path.AABB2D(0,0,400,100)),r=new nk.Graphic2D(0,0,new nk.Path.Line2D);r.interactive=!1,n.AddChild(o),n.AddChild(a),n.AddChild(i),n.AddChild(r);var s=null,d={shape:o.path,relative:o.position,anchor:new nk.Vector2D},l={shape:a.path,relative:a.position,anchor:new nk.Vector2D},c=new nk.Math.Collision2D.AABB2DvsAABB2D.Result;r.path.s.SetV(o.position),r.path.e.SetV(a.position),n.mouse.onMove.Add(function(t){null!==s&&(s.x=t.data.position.x,s.y=t.data.position.y,c.occured=!1,nk.Math.Collision2D.AABB2DvsAABB2D.Relative.Collide(d,l,c),r.path.s.SetV(o.position),r.path.e.SetV(a.position),r.SendToFront(),!0===c.occured?(i.text="Well done!",o.position.AddV(c.mtv)):i.text="Collide them!")},n),n.mouse.onDown.Add(function(t){for(var e=t.data.position,i=n.children.length;i--;)if(n.children[i].IntersectsPoint(e)){s=n.children[i],t.stopPropagation=!0,s.SendToFront();break}},n),n.mouse.onUp.Add(function(){s&&(s=null)}),n.mouse.onLeave.Add(function(){s&&(s=null)}),document.body.removeChild(e)}var e=document.getElementById("buttons"),n=document.createElement("input");n.setAttribute("value","AABBCollision"),n.setAttribute("type","button"),n.addEventListener("click",t),e.appendChild(n)}},function(t,e){t.exports=function(){function t(){var t=document.getElementsByTagName("canvas")[0];t.setAttribute("width",window.innerWidth),t.setAttribute("height",window.innerHeight),t.style.display="initial",t.style.position="absolute",t.style.top="0",t.style.left="0";var n=t.width,i=.5*n,o=t.height,a=.5*o,r=new nk.Stage2D(t,i,a,!0);r.ticker.StartAF();var s=null,d=null,l=new nk.Time.Timer,c=new nk.ImageLoader;c.onComplete.Add(function(t){d=new nk.Sprite(0,-200,c.GetBasicTexture("1to8")),d.anchor.Set(.5),s=new nk.Sprite(0,0,t.data.basicTextureCache.GetById("1to8")),s.anchor.Set(.5),s.width=320,s.height=320;var e=s.animationController=new nk.Animator.Controller(s),n=e.CreateAnimation("test",20);n.GenerateFrames(64,64,512,64,8,{5:120}),n.reverse=!0,n.onEnd.Add(function(){r.ticker.Stop()},n),e.PlayAnimation("test",7),r.AddChildren(s,d),l.onFinish.Add(function(){s.animationController.StopCurrentAnimation()}),r.onProcess.Add(function(){s.animationController.Process(),l.Process()},r)}),c.Load([{id:"1to8",src:"./assets/images/1to8.png"}],!0),document.body.removeChild(e)}var e=document.getElementById("buttons"),n=document.createElement("input");n.setAttribute("value","Animation"),n.setAttribute("type","button"),n.addEventListener("click",t),e.appendChild(n)}},function(t,e){t.exports=function(){function t(){function t(){r>1&&(s=new nk.BitmapText(0,0,a.GetBasicTexture("fontimg"),o.GetData("fontdataxml"),"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum."),console.log(s),s.maxWidth=window.innerWidth,i.AddChild(s),s.ComputeText())}var n=document.getElementsByTagName("canvas")[0];n.setAttribute("width",window.innerWidth),n.setAttribute("height",window.innerHeight),n.style.display="initial",n.style.position="absolute",n.style.top="0",n.style.left="0";var i=new nk.Stage2D(n,0,0);i.backgroundColor="#FFF";var o=new nk.XHRLoader,a=new nk.ImageLoader,r=0;o.Load([{id:"fontdataxml",src:"./assets/xhr/font.fnt",type:"xml"},{id:"fontdatajson",src:"./assets/xhr/font.json",type:"json"}]),a.Load([{id:"fontimg",src:"./assets/images/font.png"}],!0),o.onComplete.Add(function(e){console.log(e.data),console.log(JSON.stringify(e.data.dataCache.items[0].data)===JSON.stringify(e.data.dataCache.items[1].data)),r++,t()}),a.onComplete.Add(function(e){console.log(e.data),r++,t()});var s=null;document.body.removeChild(e)}var e=document.getElementById("buttons"),n=document.createElement("input");n.setAttribute("value","BitmapFont"),n.setAttribute("type","button"),n.addEventListener("click",t),e.appendChild(n)}},function(t,e){t.exports=function(){function t(){function t(){l.IncreaseChannel(0,.1),u.style.stroke.color=l.value,v.style.text.fillColor=l.value;var t=nk.Math.DTR(m);h.x+=Math.cos(t)*y,h.y+=Math.sin(t)*y,v.y+=Math.sin(t)*y,h.rotation=t,m++,i.setTransform(1,0,0,1,0,0),i.fillStyle="rgba(255, 255, 255, 0.5)",i.fillRect(0,0,o,r),d.Draw(i)}var n=document.getElementsByTagName("canvas")[0];n.setAttribute("width",window.innerWidth),n.setAttribute("height",window.innerHeight),n.style.display="initial",n.style.position="absolute",n.style.top=0,n.style.left=0;var i=n.getContext("2d"),o=n.width,a=.5*o,r=n.height,s=.5*r,d=new nk.Container2D(a,s),l=new nk.Color(0,255,0);l.ConvertToHSLA();var c=new nk.Path.Polygon2D;nk.Geom.Polygon2D.Construct.Star(c,0,0,100,50,8);var u=new nk.Path.Polygon2D;u.style.stroke.lineWidth=.5,u.style.fill.applied=!1,nk.Geom.Polygon2D.Construct.Butterfly(u,0,0,150,40);var h=new nk.Graphic2D(0,.5*-s,c),p=new nk.Graphic2D(0,0,u);h.AddChild(p),h.visible=!1,d.AddChild(h);var m=0,y=3,v=new nk.Text(0,0,"Stop trying to hit me and hit me!");v.style.text.align=nk.Style.TEXT_ALIGN.CENTER,v.style.text.baseline=nk.Style.TEXT_BASELINE.MIDDLE,v.style.text.font="56px Arial",v.style.text.strokeColor="#000",d.AddChild(v),setInterval(t,1);var g={b:{c:{d:{e:{f:void 0}}}}};console.log(nk.Utils.Nested(g,"b.c.d.e.f")),console.log(nk.Utils.Nested(g,"b.c.d.e.f",!0)),nk.Utils.Nested(g,"b.c.d.e.f",!1,!0,20),console.log(nk.Utils.Nested(g,"b.c.d.e.f")),nk.Utils.Nested(g,"b|c|d|e|f",!1,!0,30,"|"),console.log(nk.Utils.Nested(g,"b.c.d.e.f")),console.log(g),document.body.removeChild(e)}var e=document.getElementById("buttons"),n=document.createElement("input");n.setAttribute("value","Butterflyish"),n.setAttribute("type","button"),n.addEventListener("click",t),e.appendChild(n)}},function(t,e){t.exports=function(){function t(){function t(){var t=new nk.Stage2D(n,.5*window.innerWidth,.5*window.innerHeight),e=t.AddChild(new nk.Camera2D(new nk.Vector2D(0,0),null)),i=e.AddChild(new nk.Container2D);window.stage=t;var o=new nk.Plainsprite(0,0);i.AddChild(new nk.Plainsprite(200,200)),i.AddChild(new nk.Plainsprite(-200,-200)),i.AddChild(new nk.Plainsprite(-200,200)),i.AddChild(new nk.Plainsprite(200,-200)),i.AddChild(o),e.SetTarget(o),t.onProcess.Add(function(){e.Process()}),t.mouse.onDown.Add(function(t){o.position.SetV(t.data.position.SubtractVC(e.position))})}var n=document.getElementsByTagName("canvas")[0];n.setAttribute("width",window.innerWidth),n.setAttribute("height",window.innerHeight),n.style.display="initial",n.style.position="absolute",n.style.top="0",n.style.left="0",window.c=n,nk.Plainsprite.BUILD_DEFAULT_TEXTURE(t),document.body.removeChild(e)}var e=document.getElementById("buttons"),n=document.createElement("input");n.setAttribute("value","Camera"),n.setAttribute("type","button"),n.addEventListener("click",t),e.appendChild(n)}},function(t,e){t.exports=function(){function t(){function t(t){var e=document.createElement("p");e.className="paragraph",e.innerHTML=t,r.insertBefore(e,s)}function n(e){var n=!1;if(13===e.keyCode){if(n=!0,""!==s.value){var i=k.Parse(s.value);m.push(s.value),p=m.length-1,null!==i&&t(o.UNKNOWN_COMMAND.replace(/DATA/g,i))}s.value="",r.scrollTop=r.scrollHeight}else 38===e.keyCode?p>-1&&(n=!0,s.value=m[p--]):40===e.keyCode&&p<m.length-1&&(n=!0,s.value=m[++p]);!0===n&&(e.preventDefault(),e.stopPropagation())}function i(){s.focus()}var o={UNKNOWN_COMMAND:'<span style="color: red;">Unknown command: DATA</span>',OPTION_REQUIRED:'<span style="color: lightblue;">Option required for command: DATA</span>',DATA_MISSING:'<span style="color: pink;">Data required: DATA</span>'},a=document.createElement("style");a.innerHTML=["commandbox {"," width: 500px;"," height: auto;"," min-height: 50%;"," max-height: 100%;"," position: absolute;"," top: 0;"," left: 0;"," overflow-y: scroll;"," background-color: black;"," cursor: default;","","}","#input {"," width: 98%;"," height: 18px;"," border: none;"," outline: none;"," position: relative;"," border-bottom: 1px solid black;"," font-family: Arial;"," padding-left: 2%;"," font-size: 13px;"," font-weight: 300;"," background-color: black;"," color: white;"," cursor: default;","","}",".paragraph {"," margin: 0;"," padding: 0;"," font-family: Arial;"," color: white;"," padding-left: 2%;"," font-size: 13px;"," font-weight: 300;","","}",""].join(""),document.head.appendChild(a);var r=document.createElement("commandbox"),s=document.createElement("input");s.setAttribute("type","text"),s.setAttribute("id","input"),r.appendChild(s),document.body.appendChild(r),r.addEventListener("click",i),s.addEventListener("keydown",n);var d=document.getElementsByTagName("canvas")[0];d.setAttribute("width",window.innerWidth-500),d.setAttribute("height",window.innerHeight),d.style.display="initial",d.style.position="absolute",d.style.top=0,d.style.left="500px";var l=d.width,c=.5*l,u=d.height,h=.5*u,p=-1,m=[],y=new nk.Stage2D(d,c,h,!1),v=new nk.Graphic2D(0,0,new nk.Path.Circle(0,0,50));y.AddChild(v);var g=new nk.MotionManager(v),f=g.Create("x","x",0,60),w=g.Create("y","y",0,60),k=new nk.CP.Register;nk.CP.Command.OPTION_PREFIX="--",k.AddCommand(new nk.CP.Command("commands",function(){k.commands.forEach(function(e){t(e.id[0])})})),k.AddCommand(new nk.CP.Command("clear",function(){r.innerHTML="",r.appendChild(s),s.focus()},"clear the screen")),k.AddCommand(new nk.CP.Command("moveto",function(){var t=arguments[1],e=Number(t.x),n=Number(t.y);isNaN(e)||isNaN(n)||(f.value=e,w.value=n,g.StartMultiple("x y"))},"move to x y")),y.onProcess.Add(function(){g.Process()}),document.body.removeChild(e)}var e=document.getElementById("buttons"),n=document.createElement("input");n.setAttribute("value","Playground CLI"),n.setAttribute("type","button"),n.addEventListener("click",t),e.appendChild(n)}},function(t,e){t.exports=function(){function t(){var t=document.getElementsByTagName("canvas")[0];t.setAttribute("width",window.innerWidth),t.setAttribute("height",window.innerHeight),t.style.display="initial",t.style.position="absolute",t.style.top="0",t.style.left="0";var n=t.width,i=.5*n,o=t.height,a=.5*o,r=new nk.Stage2D(t,i,a),s=new nk.Geom.Polygon2D;nk.Geom.Polygon2D.Construct.Cyclic(s,0,0,300,12),s.Rotate(-90*nk.Math.RADIAN,.5,.5,!0),r.AddChild(new nk.Graphic2D(0,0,new nk.Path.Circle(0,0,300)));for(var d=r.AddChild(new nk.Graphic2D(0,0,new nk.Path.Line2D(0,0,50,0))),l=r.AddChild(new nk.Graphic2D(0,0,new nk.Path.Line2D(0,0,300,0))),c=r.AddChild(new nk.Graphic2D(0,0,new nk.Path.Line2D(0,0,250,0))),u=r.AddChild(new nk.Graphic2D(0,0,new nk.Path.Line2D(0,0,150,0))),h=s.vertices.length;h--;){var p=r.AddChild(new nk.Text(s.vertices[h].x,s.vertices[h].y,0===h?12:h));p.style.text.baseline=nk.Style.TEXT_BASELINE.MIDDLE,p.style.text.align=nk.Style.TEXT_ALIGN.CENTER,p.style.text.fontSize=59,p.style.text.fontFamily="Comic Sans MS, Comic Sans MS5, cursive",p.style.text.strokeColor="#0F0",p.style.text.fillColor="#000",p.style.text.lineWidth=2,p.style.text.ConcatFont()}r.onProcess.Add(function(){var t=new Date,e=t.getMilliseconds(),n=t.getSeconds(),i=t.getMinutes(),o=t.getHours();d.path.e.RotateAroundV(d.path.s,nk.Math.DTR(e/1e3*360-90)-d.path.e.GetAngle()),l.path.e.RotateAroundV(l.path.s,nk.Math.DTR(6*n-90)-l.path.e.GetAngle()),c.path.e.RotateAroundV(c.path.s,nk.Math.DTR(6*i-90)-c.path.e.GetAngle()),u.path.e.RotateAroundV(u.path.s,nk.Math.DTR(.5*(60*o+i)-90)-u.path.e.GetAngle())}),document.body.removeChild(e)}var e=document.getElementById("buttons"),n=document.createElement("input");n.setAttribute("value","Clock"),n.setAttribute("type","button"),n.addEventListener("click",t),e.appendChild(n)}},function(t,e){t.exports=function(){function t(){var t=nk.Editor(),n=t.stage.canvas;n.setAttribute("width",window.innerWidth),n.setAttribute("height",window.innerHeight),n.style.display="initial",n.style.position="absolute",n.style.top="0",n.style.left="0",t.MountTo(document.body),t.stage.w=n.width,t.stage.h=n.height,console.log(t),document.body.removeChild(e)}var e=document.getElementById("buttons"),n=document.createElement("input");n.setAttribute("value","Editor"),n.setAttribute("type","button"),n.addEventListener("click",t),e.appendChild(n)}},function(t,e){t.exports=function(){function t(){function t(){var t,e,n,l,v,g,f=0,w=d.length;for(c.Dump(),u.forEach(function(t){c.Add(t)}),h=c.ConcatNodes(),f;f<w;++f){e=d[f],e.data.timer.Process(),l=e.data.body,g=l.velocity,e.position.AddV(g),e.x+e.path.radius>=o?g.x=-Math.abs(g.x):e.x-e.path.radius<=0&&(g.x=Math.abs(g.x)),e.y+e.path.radius>=a?g.y=-Math.abs(g.y):e.y-e.path.radius<=0&&(g.y=Math.abs(g.y));var k=c.Converge(e.bounds);for(t=0;t<k.length;++t)n=k[t].belongsTo,v=n.data.body,n!==e&&(y.occured=!1,p(l,v,y),!0===y.occured&&(e.data.timer.Start(10),n.data.timer.Start(10),m(l,v,y)));e.ComputeBounds()}h.forEach(function(t){nk.Debug.Draw.AABB2D(i,t.aabb,{noFill:!0})}),s.text=Math.round(r.ticker.GetTPS())}var n=document.getElementsByTagName("canvas")[0];n.setAttribute("width",window.innerWidth),n.setAttribute("height",window.innerHeight),n.style.backgroundColor="#FFF",n.style.display="initial",n.style.position="absolute",n.style.top="0",n.style.left="0";var i=n.getContext("2d"),o=n.width,a=n.height,r=new nk.Stage2D(n,0,0,!0);r.ComputeBounds(),r.backgroundColor="rgba(255,255,255,1)",r.ticker.StartAF();var s=new nk.Text(0,0,"");s.style.text.fillColor="#000",s.style.text.strokeColor="#000",s.style.text.font="60px Arial";var d=[],l=new nk.AABB2D;l.SetC(r.bounds);var c=new nk.QuadtreeNode(l,0,5,5),u=[],h=[],p=nk.Math.Collision2D.CirclevsCircle.Relative.Collide,m=nk.Math.Collision2D.CirclevsCircle.Relative.ElasticResponse,y=new nk.Math.Collision2D.CirclevsCircle.Result;r.onProcess.Add(t,window);for(var v=50;v--;)!function(){var t=nk.Utils.RandomInteger(10,30),e=new nk.Path.Circle(0,0,t);e.style.fill.applied=!1,e.style.stroke.color=new nk.Color(nk.Utils.RandomInteger(100,255),0,nk.Utils.RandomInteger(100,255),1).value,e.style.stroke.lineWidth=t/5;var n=new nk.Graphic2D(nk.Utils.RandomInteger(0,o),nk.Utils.RandomInteger(0,a),e);n.data.mass=t,n.data.body={relative:n.position,anchor:new nk.Vector2D,shape:n.path,mass:t,velocity:new nk.Vector2D(nk.Utils.RandomInteger(-4,4),nk.Utils.RandomInteger(-4,4))},n.ComputeBounds(),n.data.timer=new nk.Timer,n.data.timer.onFinish.Add(function(){e.style.fill.applied=!1,n.alpha=1}),n.data.timer.onStart.Add(function(){e.style.fill.applied=!0,n.alpha=.8}),d.push(n),r.AddChild(n),u.push(n.bounds)}();r.AddChild(s),document.body.removeChild(e)}var e=document.getElementById("buttons"),n=document.createElement("input");n.setAttribute("value","ElasticCollision"),n.setAttribute("type","button"),n.addEventListener("click",t),e.appendChild(n)}},function(t,e){t.exports=function(){function t(){function t(t,e){var n=new nk.Path.Polygon2D;nk.Geom.Polygon2D.Construct.Supershape(n,0,0,nk.Utils.RandomInteger(5,30),20,nk.Utils.RandomFloat(0,20),nk.Utils.RandomFloat(0,3),nk.Utils.RandomFloat(0,3),nk.Utils.RandomFloat(0,3)),n.Rotate(nk.Utils.RandomFloat(-nk.Math.PII,nk.Math.PII),.5,.5,!0);var i=new nk.Plaingraphic2D(t,e,n);i.data.vel=new nk.Vector2D(nk.Utils.RandomFloat(-4,4),nk.Utils.RandomFloat(-4,4)),i.data.lifeSpan=600,s.AddChild(i),l.push(i)}var n=document.getElementsByTagName("canvas")[0];n.setAttribute("width",window.innerWidth),n.setAttribute("height",window.innerHeight),n.style.display="initial",n.style.position="absolute",n.style.top="0",n.style.left="0";var i=n.width,o=.5*i,a=n.height,r=.5*a,s=new nk.Stage2D(n,o,r);s.clear=!1,s.backgroundColor="rgba(0,0,0,0.1)";var d=new nk.Plaingraphic2D(0,0,new nk.Path.Circle(0,0,200));d.path.style.fill.applied=!1,s.AddChild(d);var l=[],c=!1;s.onProcess.Add(function(){for(var e=0,n=l.length;e<n&&l[e];++e)nk.Math.AttractRepel(l[e].position,d.position,l[e].data.vel,2*d.path.radius,.1),l[e].position.AddV(l[e].data.vel),--l[e].data.lifeSpan||(l[e].Destroy(),l.splice(e,1));if(c)for(e=2;--e;)t(s.mouse.position.x,s.mouse.position.y)},s),s.mouse.onDown.Add(function(){c=!0}),s.mouse.onUp.Add(function(){c=!1}),document.body.removeChild(e)}var e=document.getElementById("buttons"),n=document.createElement("input");n.setAttribute("value","Field"),n.setAttribute("type","button"),n.addEventListener("click",t),e.appendChild(n)}},function(t,e){t.exports=function(){function t(){function t(e,n){if(!(this instanceof t))return new t(e,n);nk.Graphic2D.call(this,0,0,new nk.Path.Line2D(e,n)),this.path.style.stroke.color=new nk.Color(nk.Utils.RandomInteger(this.w,200),nk.Utils.RandomInteger(this.w,255),nk.Utils.RandomInteger(0,20),1).value,this.path.style.stroke.lineWidth=this.w/12,r.AddChild(this),this.x=nk.Utils.RandomFloat(-o,o),this.y=nk.Utils.RandomFloat(0,a),this.rotation=nk.Utils.RandomInteger(0,nk.Math.PII),nk.Utils.ThisOrThat()&&(this.rotation=-this.rotation);var i=this.data.motionManager=new nk.MotionManager(this);i.Create("moveX","x",0,120,"SineInOut"),i.Create("moveY","y",0,120,"SineInOut"),i.Create("rotate","rotation",0,120,"SineInOut"),i.StartMultiple("moveX moveY rotate"),this.w>12&&this.Grow()}var n=document.getElementsByTagName("canvas")[0];n.setAttribute("width",window.innerWidth),n.setAttribute("height",window.innerHeight),n.style.display="initial",n.style.position="absolute",n.style.top="0",n.style.left="0";var i=n.width,o=.5*i,a=n.height,r=new nk.Stage2D(n,o,a);r.scale.Set(1,-1),t.prototype=Object.create(nk.Graphic2D.prototype),t.prototype.constructor=t,t.prototype.Grow=function(){var e=this.path.e.SubtractVC(this.path.s),n=e.Copy();e.Rotate(20*nk.Math.RADIAN+nk.Utils.RandomFloat(20*-nk.Math.RADIAN,20*nk.Math.RADIAN)),n.Rotate(20*-nk.Math.RADIAN+nk.Utils.RandomFloat(20*-nk.Math.RADIAN,20*nk.Math.RADIAN)),e.Multiply(.67,.67),n.Multiply(.67,.67),e.AddV(this.path.e),n.AddV(this.path.e),t(this.path.e,e),t(this.path.e,n)},t(new nk.Vector2D(0,0),new nk.Vector2D(0,200));var s=new nk.Timer(130);s.onFinish.Add(function(){r.ticker.Stop()}),s.Start(),r.onProcess.Add(function(){r.children.forEach(function(t){t.data.motionManager.Process()}),s.Process()}),document.body.removeChild(e)}var e=document.getElementById("buttons"),n=document.createElement("input");n.setAttribute("value","Fractree"),n.setAttribute("type","button"),n.addEventListener("click",t),e.appendChild(n)}},function(t,e){t.exports=function(){function t(){var t=document.getElementsByTagName("canvas")[0];t.setAttribute("width",window.innerWidth),t.setAttribute("height",window.innerHeight),t.style.display="initial",t.style.position="absolute",t.style.top=0,t.style.left=0;var n=t.width,i=.5*n,o=t.height,a=.5*o,r=new nk.Stage2D(t),s=new nk.Text(100,100,"Grab and drag"),d=new nk.Graphic2D(350,150,new nk.Path.Circle(0,0,100)),l=new nk.Graphic2D(450,200,new nk.Path.AABB2D(-100,-100,100,100)),c=null,u=new nk.Vector2D,h=new nk.Vector2D;r.AddChild(s),r.AddChild(d),r.AddChild(l);for(var p=10;--p;)r.AddChild(new nk.Graphic2D(i,a,new nk.Path.AABB2D(-100,-100,100,100)));r.mouse.onMove.Add(function(t){null!==c&&(c.x=t.data.position.x+h.x-u.x,c.y=t.data.position.y+h.y-u.y)},r),r.mouse.onDown.Add(function(t){for(var e=t.data.position,n=r.children.length;n--;)if(r.children[n].IntersectsPoint(e)){u.SetV(e),c=r.children[n],c.gco=nk.Style.GCO.MULTIPLY,c.scale.Set(2,2),h.SetV(c),t.stopPropagation=!0,c.SendToBack();break}},r),r.mouse.onUp.Add(function(){c&&(c.gco=nk.Style.GCO.DEFAULT,c.scale.Set(1,1),c=null)}),document.body.removeChild(e)}var e=document.getElementById("buttons"),n=document.createElement("input");n.setAttribute("value","GrabnDrag"),n.setAttribute("type","button"),n.addEventListener("click",t),e.appendChild(n)}},function(t,e){t.exports=function(){function t(){var t=document.getElementsByTagName("canvas")[0];t.setAttribute("width",window.innerWidth),t.setAttribute("height",window.innerHeight),t.style.backgroundColor="#000",t.style.display="initial",t.style.position="absolute",t.style.top="0",t.style.left="0";var n=t.width,i=t.height,o=new nk.Stage2D(t,0,0),a=new nk.Container2D;o.AddChild(a);var r=0,s=n/30,d=i/30,l=nk.Math.SquareGrid(n,i,s,d,nk.Vector2D);for(console.log(l),r=l.length;r--;)a.AddChild(new nk.Graphic2D(l[r].x,l[r].y,new nk.Path.AABB2D(0,0,s,d)));o.mouse.onDown.Add(function(t){for(var e=t.data.position.DivideVC(a.scale),n=a.children.length;n--;)if(a.children[n].IntersectsPoint(e)){a.children[n].Destroy();break}},o),o.mouse.onWheel.Add(function(t){t.data.native.deltaY<0?a.scale.Add(.1,.1):a.scale.Subtract(.1,.1)}),document.body.removeChild(e)}var e=document.getElementById("buttons"),n=document.createElement("input");n.setAttribute("value","Grid"),n.setAttribute("type","button"),n.addEventListener("click",t),e.appendChild(n)}},function(t,e){t.exports=function(){function t(){function t(){function t(){this.animationController.currentAnimation.Reset(),this.Detach(),T.fickleSplice(T.indexOf(this)),D.Store(this)}f.ticker.StartAF(),w.BindBasicTexture(U.basicTexture,0),w.BindBasicTexture(M.basicTexture,1),w.BindBasicTexture(V.basicTexture,2),w.BindBasicTexture(F.basicTexture,3),b.Flood(function(){var t=new nk.Sprite(0,0,w,0);return G.GetFrameById("Bullet").Apply(t),t.scale.SetV(x),t.UpdateShape(new nk.AABB2D(0,0,8,8)),t.rotation=y(0,2*Math.PI),t.anchor.Set(.5),t.data.velocity=new nk.Vector2D,t.data.body={relative:t.position,shape:t.shape,anchor:t.anchor},t.UpdateTextureTransform(),t},5e3),A.Flood(function(){var t=new nk.Sprite(0,0,w,3);return G.GetFrameById("Enemy"+m(1,2)).Apply(t),t.scale.SetV(x),t.UpdateShape(new nk.AABB2D(0,0,16,16)),t.anchor.Set(.5),t.data.velocity=new nk.Vector2D,t.data.body={relative:t.position,shape:t.shape,anchor:t.anchor},t.UpdateTextureTransform(),t},1e3),C.Flood(function(){var t=new nk.Sprite(0,0,w,1);return G.GetFrameById("Particle").Apply(t),t.scale.SetV(x),t.UpdateShape(new nk.AABB2D(0,0,4,4)),t.anchor.Set(.5),t.data.velocity=new nk.Vector2D,t.data.acceleration=new nk.Vector2D,t.UpdateTextureTransform(),t},5e3),D.Flood(function(){var e=new nk.Sprite(0,0,w,2);G.GetFrameById("Explo-f1").Apply(e);var n=e.CreateAnimation({spritesheet:G,id:"explode",frames:["Explo-f1","Explo-f2","Explo-f3","Explo-f4"],rate:6});return n.onEnd.Add(t,e),n.overrideFrameRate=!0,e.scale.SetV(x),e.rotation=y(0,2*Math.PI),e.UpdateShape(new nk.AABB2D(0,0,16,16)),e.anchor.Set(.5),e.UpdateTextureTransform(),e},200),n(),a(),d(),l()}function n(){S||(S=new nk.Sprite(0,0,w),G.GetFrameById("Ship").Apply(S),S.scale.SetV(x),S.UpdateShape(new nk.AABB2D(0,0,16,16)),S.anchor.Set(.5),S.x=h,S.y=p-.5*S.height,S.data.velocity=new nk.Vector2D,S.data.moveSpeed=8,S.data.fire=!1,S.data.fireRate=4,S.data.fireTimer=0,S.data.bulletsPerBlast=15,f.AddChild(S),S.UpdateTextureTransform())}function i(){var t=S.data.bulletsPerBlast;for(s(S.x+y(-100,100),S.y+y(-100,-10));t--;){var e=b.Retrieve();e.x=g(S.x,S.data.bulletsPerBlast,3,t),e.y=S.y-.5*S.height,e.data.velocity.x=0,e.data.velocity.y=y(-25,-5),e.data.velocity.y>0&&(e.data.velocity.y=-e.data.velocity.y),e.data.lifeSpan=150,B.push(e),f.AddChild(e)}}function o(){var t=A.Retrieve();t.x=y(0,u),t.y=0-.5*t.height,t.data.velocity.x=0,t.data.velocity.y=H,t.data.health=_,P.push(t),f.AddChild(t)}function a(){for(var t=0;t<R;++t){var e=new nk.Sprite(0,0,w);G.GetFrameById("Shield-f1").Apply(e),e.transformAutomaticUpdate=!1,e.scale.SetV(x),e.UpdateShape(new nk.AABB2D(0,0,16,16)),e.anchor.Set(.5),e.data.health=L,e.data.body={relative:e.position,shape:e.shape,anchor:e.anchor},e.x=nk.Math.Spread(h,R,1.2*e.width,t),e.y=N,I.push(e),f.AddChild(e),e.UpdateTextureTransform()}}function r(t,e,n){for(var i=0;i<n;++i){var o=C.Retrieve();o.scale.Set(y(2,3)),o.position.Set(t,e),o.data.velocity.Set(y(-10,10),y(-10,10)),o.data.acceleration.Set(y(.9,.95),y(1,1)),o.data.lifeSpan=m(30,100),E.push(o),f.AddChild(o)}}function s(t,e){var n=D.Retrieve();n.position.Set(t,e),n.animationController.PlayAnimation("explode"),T.push(n),f.AddChild(n)}function d(){function t(t){switch(t.data.keyCode){case 37:this.data.moveLeft=!0;break;case 39:this.data.moveRight=!0;break;case 32:this.data.fire=!0}}function e(t){switch(t.data.keyCode){case 37:this.data.moveLeft=!1;break;case 39:this.data.moveRight=!1;break;case 32:this.data.fire=!1}}f.keyboard.onDown.Add(t,S),f.keyboard.onUp.Add(e,S)}function l(){function t(){e(),m(1,W)===W&&o(),d(),O.Dump();for(var t,i=0;i<P.length;++i)(t=P[i])&&t.bounds&&O.Add(t.bounds);s(),n(),a(),this.ticker.GetTPS()<24&&console.log(this.ticker.GetTPS())}function e(){var t=.5*S.width;S.data.moveLeft&&S.x>0+t?S.data.velocity.x=-S.data.moveSpeed:S.data.moveRight&&S.x<u-t?S.data.velocity.x=S.data.moveSpeed:S.data.velocity.x=0,S.position.AddV(S.data.velocity),S.x<0+t?S.x=0+t:S.x>u-t&&(S.x=u-t),S.data.fire&&0===S.data.fireTimer&&(i(),S.data.fireTimer=S.data.fireRate),S.data.fireTimer>0&&S.data.fireTimer--}function n(){for(var t,e=0;e<E.length;++e)t=E[e],t.position.AddV(t.data.velocity),t.data.velocity.MultiplyV(t.data.acceleration),--t.data.lifeSpan<=0&&(t.Detach(),E.fickleSplice(e),C.Store(t))}function a(){for(var t,e=0;e<T.length;++e)t=T[e],t.animationController.Process()}function s(){for(var t,e=0;e<B.length;++e)(t=B[e])&&(t.position.AddV(t.data.velocity),(t.x>u-.5*t.width||t.x<0+.5*t.width)&&(t.data.velocity.x=-t.data.velocity.x),t.ComputeBounds(),--t.data.lifeSpan<=0?(t.Detach(),B.fickleSplice(e),b.Store(t)):l(t,e))}function d(){for(var t,e=0;e<P.length;++e)(t=P[e])&&(t.position.AddV(t.data.velocity),t.ComputeBounds(),t.data.health<=0||t.y>p+.5*t.height?(r(t.x,t.y,m(15,200)),t.Detach(),P.fickleSplice(e),A.Store(t)):c(t,e))}function l(t,e){if(t&&t.x>0&&t.x<u&&t.y>0&&t.y<p)for(var n,i=O.Converge(t.bounds),o=0;o<i.length;++o)if((n=i[o].belongsTo)&&v(t.data.body,n.data.body)){n.data.health--,t.Detach(),B.fickleSplice(e),b.Store(t);break}}function c(t,e){if(t&&!(t.y<N-t.height))for(var n,i=0;i<I.length;++i)if((n=I[i])&&v(t.data.body,n.data.body)){if(r(t.x,t.y,100),t.Detach(),P.fickleSplice(e),A.Store(t),--n.data.health<=0){n.Detach(),I.fickleSplice(i);break}n.clip.tl.x+=16,n.UpdateTextureTransform();break}}f.onProcess.Add(t,f)}var c=document.getElementsByTagName("canvas")[0];c.setAttribute("width",1024),c.setAttribute("height",800),c.style.border="2px solid black",c.style.display="initial",c.style.position="absolute",c.style.top="0",c.style.left="50%",c.style.transform="translateX(-50%)";var u=c.width,h=.5*u,p=c.height,m=nk.Utils.RandomInteger,y=nk.Utils.RandomFloat,v=nk.Math.Collision2D.AABB2DvsAABB2D.Relative.Collide,g=nk.Math.Spread,f=new nk.Stage2D(c,0,0,!0,!0);f.gl.clearColor(1,1,1,1);var w=new nk.GLTextureProgramController(f.gl),k=new nk.AABB2D;f.ComputeBounds(),k.SetC(f.bounds);var b=new nk.Pool,A=new nk.Pool,C=new nk.Pool,D=new nk.Pool,x=new nk.Vector2D(1.8),S=null,E=[],T=[],B=[],P=[],I=[],L=3,R=22,G=null,U=null,M=null,V=null,F=null,N=650,W=3,H=1.5,_=8,O=new nk.QuadtreeNode(k,0,5,5),j=new nk.SpritesheetLoader([{id:"sheet-default",image:{src:"./../assets/images/invaders/invaders-sheet.png"},data:{src:"./../assets/xhr/invaders.json",type:"json"}},{id:"sheet-red",image:{src:"./../assets/images/invaders/invaders-sheet-red.png"},data:{src:"./../assets/xhr/invaders.json",type:"json"}},{id:"sheet-blue",image:{src:"./../assets/images/invaders/invaders-sheet-blue.png"},data:{src:"./../assets/xhr/invaders.json",type:"json"}},{id:"sheet-green",image:{src:"./../assets/images/invaders/invaders-sheet-green.png"},data:{src:"./../assets/xhr/invaders.json",type:"json"}}],function(){U=j.GetSpritesheet("sheet-default"),U.GenerateFrames(),M=j.GetSpritesheet("sheet-red"),M.GenerateFrames(),V=j.GetSpritesheet("sheet-blue"),V.GenerateFrames(),F=j.GetSpritesheet("sheet-green"),F.GenerateFrames(),G=U,t()});document.body.removeChild(e)}var e=document.getElementById("buttons"),n=document.createElement("input");n.setAttribute("value","Invaders"),n.setAttribute("type","button"),n.addEventListener("click",t),e.appendChild(n)}},function(t,e){t.exports=function(){function t(){function t(){var t=new nk.Plaingraphic2D(nk.Utils.RandomInteger(0,i),nk.Utils.RandomInteger(0,a),new nk.Path.Circle(0,0,6));t.data.force={velocity:new nk.Vector2D,friction:new nk.Vector2D(.99,.99)},t.data.body={relative:t.position,anchor:new nk.Vector2D,shape:t.path,mass:1,velocity:t.data.force.velocity},s.AddChild(t),h.push(t),t.data.sepArr=h}var n=document.getElementsByTagName("canvas")[0];n.setAttribute("width",window.innerWidth),n.setAttribute("height",window.innerHeight),n.style.display="initial",n.style.position="absolute",n.style.top="0",n.style.left="0";var i=n.width,o=.5*i,a=n.height,r=.5*a,s=new nk.Stage2D(n,0,0),d=new nk.Plaingraphic2D(o,r,new nk.Path.Circle(0,0,30));d.data.body={relative:d.position,anchor:new nk.Vector2D,shape:d.path,mass:1,velocity:new nk.Vector2D};var l=!1,c=new nk.Vector2D,u=new nk.Vector2D,h=[];s.AddChild(d),function(){for(var e=500;e--;)t()}();var p=nk.Math.Collision2D.CirclevsCircle.Relative.Collide,m=new nk.Math.Collision2D.CirclevsCircle.Result;s.onProcess.Add(function(){h.forEach(function(t){var e=t.data.force.velocity;nk.Math.AttractRepel(t.position,d.position,e,3*d.path.radius,1),t.position.AddV(e),e.MultiplyV(t.data.force.friction),t.x+t.path.radius>=i?(e.x=-Math.abs(e.x),t.x=i-t.path.radius):t.x-t.path.radius<=0&&(e.x=Math.abs(e.x),t.x=0+t.path.radius),t.y+t.path.radius>=a?(e.y=-Math.abs(e.y),t.y=a-t.path.radius):t.y-t.path.radius<=0&&(e.y=Math.abs(e.y),t.y=0+t.path.radius),m.occured=!1,p(d.data.body,t.data.body,m),!0===m.occured&&(m.mtv.Multiply(m.mtd,m.mtd),t.position.AddV(m.mtv),e.Set(0,0))})}),s.mouse.onMove.Add(function(t){!0===l&&(d.x=t.data.position.x-c.x+u.x,d.y=t.data.position.y-c.y+u.y)}),s.mouse.onDown.Add(function(t){var e=t.data.position;d.IntersectsPoint(e)&&(c.SetV(e),u.SetV(d),l=!0),t.stopPropagation=!0}),s.mouse.onUp.Add(function(){l=!1}),document.body.removeChild(e)}var e=document.getElementById("buttons"),n=document.createElement("input");n.setAttribute("value","Magnet"),n.setAttribute("type","button"),n.addEventListener("click",t),e.appendChild(n)}},function(t,e){t.exports=function(){function t(){function t(){var t=document.getElementsByTagName("canvas")[0];t.setAttribute("width",window.innerWidth),t.setAttribute("height",window.innerHeight),t.style.display="initial",t.style.position="absolute",t.style.top="0",t.style.left="0";var e=t.width,n=.5*e,i=t.height,o=.5*i,a=new nk.Stage2D(t,n,o),r=new nk.Sprite(0,0);r.anchor.Set(.5),r.scale.Set(0,1),r.AttachTo(a);var s=new nk.MotionManager(r),d=s.Create("x","x"),l=s.Create("y","y");s.Create("sx","scale.x",1,10),s.Create("sy","scale.y",1,10),a.mouse.onUp.Add(function(t){d.running&&d.Stop(),l.running&&l.Stop(),s.ResetMultiple("sx sy"),d.Reconfigure(void 0,t.data.position.x,60),l.Reconfigure(void 0,t.data.position.y,60),s.StartMultiple("x y sx sy")},a),a.onProcess.Add(function(){s.Process()})}nk.Sprite.BUILD_DEFAULT_TEXTURE(t),document.body.removeChild(e)}var e=document.getElementById("buttons"),n=document.createElement("input");n.setAttribute("value","Motion"),n.setAttribute("type","button"),n.addEventListener("click",t),e.appendChild(n)}},function(t,e){t.exports=function(){function t(){function t(){n({x:-s,y:s},{x:-l,y:l},"staticStar",r/d*500,u,c,.01),c.onProcess.Add(function(){for(var t,e=0,n=u.length;e<n;++e)t=u[e],t.position.AddV(t.data.velocity),t.data.velocity.Rotate(nk.Math.DTR(t.data.torque))},c)}function n(t,e,n,i,o,a,r){for(var s=0;s<i;++s){var d=nk.Utils.RandomInteger(t.x,t.y),l=nk.Utils.RandomInteger(e.x,e.y),c=new nk.Sprite(d,l,h.GetBasicTexture(n));c.anchor.Set(.5),c.scale.Set(r),c.rotation=nk.Utils.RandomFloat(0,nk.Math.PII),c.data.velocity=new nk.Vector2D(d/500,l/500),c.data.torque=(d+l)/500*nk.Utils.RandomInteger(-1,1),o.push(c),a.AddChild(c)}console.log(s)}function i(){var t=new nk.Path.Polygon2D;t.style.fill.color="#FFF",t.style.stroke.color="#000",t.style.stroke.lineWidth=3,nk.Geom.Polygon2D.Construct.Butterfly(t,0,0,4e3,50);var e=t.aabb.br.AbsoluteCopy().SubtractVC(t.aabb.tl.AbsoluteCopy());return new nk.Graphic2D(.5*t.aabb.w-.5*e.x,.5*t.aabb.h-.5*e.y,t)}function o(){var t=new nk.Path.Polygon2D;t.style.fill.color="#FFF",t.style.stroke.color="#000",t.style.stroke.lineWidth=3,nk.Geom.Polygon2D.Construct.Star(t,0,0,800,400,5);var e=t.aabb.br.AbsoluteCopy().SubtractVC(t.aabb.tl.AbsoluteCopy());return new nk.Graphic2D(.5*t.aabb.w-.5*e.x,.5*t.aabb.h-.5*e.y,t)}var a=document.getElementsByTagName("canvas")[0];a.setAttribute("width",window.innerWidth),a.setAttribute("height",window.innerHeight),a.style.display="initial",a.style.position="absolute",a.style.top="0",a.style.left="0";var r=a.width,s=.5*r,d=a.height,l=.5*d,c=new nk.Stage2D(a,s,l,!0);c.ticker.StartAF();var u=[],h=new nk.ImageLoader([{id:"butterfly",src:nk.Utils.GenerateSimpleBase64Png(i)},{id:"staticStar",src:nk.Utils.GenerateSimpleBase64Png(o)}],!0);h.onComplete.Add(function(){t()}),document.body.removeChild(e)}var e=document.getElementById("buttons"),n=document.createElement("input");n.setAttribute("value","Nightsky"),n.setAttribute("type","button"),n.addEventListener("click",t),e.appendChild(n)}},function(t,e){t.exports=function(){function t(){var t=document.getElementsByTagName("canvas")[0];t.setAttribute("width",window.innerWidth),t.setAttribute("height",window.innerHeight),t.style.display="initial",t.style.position="absolute",t.style.top="0",t.style.left="0";var n=t.width,i=.5*n,o=t.height,a=.5*o,r=new nk.Stage2D(t,i,a);r.clear=!1,r.fill=!1,r.gco=nk.Style.GCO.COLOR_DODGE;var s=new nk.ImageLoader([{id:"particle",src:nk.Utils.GenerateSimpleBase64Png(function(){var t=new nk.Path.Circle(20,20,20);return t.style.fill.color="rgba(0, 0, 0, 0.01)",t.style.stroke.color="rgba(255, 200, 50, 0.1)",new nk.Graphic2D(0,0,t)})}],!0);s.onComplete.Add(function(){for(var t=250;t--;){r.AddChild(new nk.Plainsprite(0,0,s.GetBasicTexture("particle"))).data.velocity=new nk.Vector2D(nk.Utils.RandomFloat(-2,2),nk.Utils.RandomFloat(-2,2))}var e=new nk.Timer;e.Start(400),e.onFinish.Add(function(){r.ticker.Stop()}),r.onProcess.Add(function(){for(var t,n=this.children.length;n--;)t=this.children[n],t.position.AddV(t.data.velocity),t.data.velocity.Rotate(nk.Math.RADIAN*nk.Utils.RandomFloat(-12,12)),t.scale.Set((400-e.time)/400);e.Process()},r)}),document.body.removeChild(e)}var e=document.getElementById("buttons"),n=document.createElement("input");n.setAttribute("value","Particles"),n.setAttribute("type","button"),n.addEventListener("click",t),e.appendChild(n)}},function(t,e){t.exports=function(){function t(){function t(){i(),o(),c.ticker.SetDesiredRate(60),c.ticker.Start()}function n(){(p.position.x>s||p.position.x<-s)&&(p.position.x=0),(p.position.y>l||p.position.y<-l)&&(p.position.y=0),p.data.force.velocity.y>0?(p.data.state.falling=!0,p.data.state.onGround=!1,p.data.state.ascending=!1):p.data.force.velocity.y<0&&(p.data.state.falling=!1,p.data.state.onGround=!1,p.data.state.ascending=!0),p.position.AddV(p.data.force.velocity),p.data.force.velocity.AddV(p.data.force.gravity),!0===p.data.move.left?(p.position.SubtractV(p.data.force.move),p.data.state.moving=!0):!0===p.data.move.right?(p.position.AddV(p.data.force.move),p.data.state.moving=!0):p.data.state.moving=!1,!0===p.data.move.jump&&!0===p.data.state.onGround&&p.data.force.velocity.AddV(p.data.force.jump);for(var t=0,e=h.length;t<e;++t)m.occured=!1,nk.Math.Collision2D.AABB2DvsAABB2D.Relative.Collide(p.data.collisionData,h[t].data.collisionData,m),!0===m.occured&&(m.mtv.y<0&&p.data.force.velocity.y>0?(p.data.force.velocity.y=0,p.data.state.onGround=!0,p.data.state.falling=!1,p.data.state.ascending=!1):m.mtv.y>0&&p.data.force.velocity.y<0&&(p.data.force.velocity.y=0),p.position.AddV(m.mtv))}function i(){p=new nk.Sprite(0,0,u.GetBasicTexture("character")),p.anchor.Set(.5),p.data.move={left:!1,right:!1,jump:!1},p.data.force={move:new nk.Vector2D(2,0),jump:new nk.Vector2D(0,-10),gravity:new nk.Vector2D(0,.1982),velocity:new nk.Vector2D},p.data.state={onGround:!1,moving:!1,falling:!1,ascending:!1},p.data.collisionData={shape:p.shape,relative:p.position,anchor:p.anchor},c.AddChild(p),c.onProcess.Add(n,c),c.keyboard.onDown.Add(function(t){"a"===t.data.key?(p.data.move.left=!0,p.data.move.right=!1):"d"===t.data.key&&(p.data.move.right=!0,p.data.move.false=!1),"w"===t.data.key&&(p.data.move.jump=!0)}),c.keyboard.onUp.Add(function(t){"a"===t.data.key?p.data.move.left=!1:"d"===t.data.key&&(p.data.move.right=!1),"w"===t.data.key&&(p.data.move.jump=!1)})}function o(){for(var t=200;t--;){var e=new nk.Sprite(nk.Utils.RandomInteger(-s,s),nk.Utils.RandomInteger(-l,l),u.GetBasicTexture("platform"));e.data.collisionData={shape:e.shape,relative:e.position,anchor:e.anchor},h.push(e),c.AddChild(e)}}var a=document.getElementsByTagName("canvas")[0];a.setAttribute("width",window.innerWidth),a.setAttribute("height",window.innerHeight),a.style.display="initial",a.style.position="absolute",a.style.top="0",a.style.left="0";var r=a.width,s=.5*r,d=a.height,l=.5*d,c=new nk.Stage2D(a,s,l,!0),u=new nk.ImageLoader([{id:"character",src:nk.Utils.GenerateSimpleBase64Png(function(){var t=new nk.Path.AABB2D(0,0,20,20);return t.style.fill.applied=!1,t.style.stroke.color="#0F0",t.style.stroke.lineWidth=3,new nk.Graphic2D(0,0,t)})},{id:"platform",src:nk.Utils.GenerateSimpleBase64Png(function(){var t=new nk.Path.AABB2D(0,0,50,10);return t.style.fill.applied=!1,t.style.stroke.lineWidth=2,new nk.Graphic2D(0,0,t)})}],!0);u.onComplete.Add(function(){t()});var h=[],p=null,m=new nk.Math.Collision2D.AABB2DvsAABB2D.Result;document.body.removeChild(e)}var e=document.getElementById("buttons"),n=document.createElement("input");n.setAttribute("value","Platformer"),n.setAttribute("type","button"),n.addEventListener("click",t),e.appendChild(n)}},function(t,e){t.exports=function(){function t(){var t=document.getElementsByTagName("canvas")[0];t.setAttribute("width",window.innerWidth),t.setAttribute("height",window.innerHeight),t.style.display="initial",t.style.position="absolute",t.style.top="0",t.style.left="0",window.c=t;var n=new nk.Stage2D(t,.5*window.innerWidth,.5*window.innerHeight);window.stage=n;var i=new nk.Path.Line2D(100,0,360,0),o=new nk.Graphic2D(0,0,i),a=0;n.AddChild(o),n.onProcess.Add(function(){i.e.RotateAbsoluteAroundV(i.s,nk.Math.DTR(a)),a+=.1,i.s.Rotate(nk.Math.RADIAN)});var r=new nk.Vector2D(0,0);console.log(r),r.Assert(),document.body.removeChild(e)}var e=document.getElementById("buttons"),n=document.createElement("input");n.setAttribute("value","Playground"),n.setAttribute("type","button"),n.addEventListener("click",t),e.appendChild(n)}},function(t,e){t.exports=function(){function t(){function t(){var t=new nk.Path.Polygon2D;nk.Geom.Polygon2D.Construct.Cyclic(t,0,0,d(35,60),d(3,7));var e=new nk.Graphic2D(0,0,t);s.Mount(e),l.push({shape:t,relative:e.position,anchor:new nk.Vector2D})}var n=document.getElementsByTagName("canvas")[0];n.setAttribute("width",window.innerWidth),n.setAttribute("height",window.innerHeight),n.style.display="initial",n.style.position="absolute",n.style.top="0",n.style.left="0";var i=n.width,o=.5*i,a=n.height,r=.5*a,s=new nk.Stage2D(n,o,r,!0);s.ticker.SetDesiredRate(120),s.ticker.Start();var d=nk.Utils.RandomInteger,l=[],c=null,u=new nk.Vector2D,h=new nk.Vector2D;!function(){for(var e=50;e--;)t()}();var p=nk.Math.Collision2D.PolygonvsPolygon.Relative.Collide,m=new nk.Math.Collision2D.PolygonvsPolygon.Result;s.onProcess.Add(function(){for(var t=0,e=l.length;t<e;++t)for(var n=l[t],i=0;i<e;++i){var o=l[i];o!==n&&(m.Reset(),p(n,o,m)&&(c?(n.relative!==c.position&&n.relative.SubtractV(m.mtv),o.relative!==c.position&&o.relative.AddV(m.mtv)):(n.relative.SubtractV(m.mtv),o.relative.AddV(m.mtv))))}}),s.mouse.onMove.Add(function(t){null!==c&&(c.x=t.data.position.x+h.x-u.x,c.y=t.data.position.y+h.y-u.y)},s),s.mouse.onDown.Add(function(t){for(var e=t.data.position,n=s.children.length;n--;)if(s.children[n].IntersectsPoint(e)){u.SetV(e),c=s.children[n],h.SetV(c),t.stopPropagation=!0,c.SendToFront();break}},s),s.mouse.onUp.Add(function(){c&&(c=null)}),document.body.removeChild(e)}var e=document.getElementById("buttons"),n=document.createElement("input");n.setAttribute("value","PolygonCollision"),n.setAttribute("type","button"),n.addEventListener("click",t),e.appendChild(n)}},function(t,e){t.exports=function(){function t(){var t=document.getElementsByTagName("canvas")[0];t.setAttribute("width",window.innerWidth),t.setAttribute("height",window.innerHeight),t.style.display="initial",t.style.position="absolute",t.style.top="0",t.style.left="0";var n=t.getContext("2d"),i=new nk.Stage2D(t,0,0);i.ComputeBounds();var o=new nk.AABB2D;o.SetC(i.bounds);var a=new nk.QuadtreeNode(o,0,8,3),r=[],s=[];i.onProcess.Add(function(){s.forEach(function(t){nk.Debug.Draw.AABB2D(n,t.aabb)})}),i.mouse.onUp.Add(function(t){var e=new nk.Graphic2D(t.data.position.x,t.data.position.y,new nk.Path.AABB2D(0,0,10,10));e.ComputeBounds(e.anchor),i.AddChild(e),r.push(e),a.Dump(),r.forEach(function(t){a.Add(t.bounds)}),s=a.ConcatNodes()}),document.body.removeChild(e)}var e=document.getElementById("buttons"),n=document.createElement("input");n.setAttribute("value","Quadtree"),n.setAttribute("type","button"),n.addEventListener("click",t),e.appendChild(n)}},function(t,e){t.exports=function(){function t(){function t(){var t=c.Retrieve(),e=nk.Utils.RandomFloat(.2,1);t.position.Set(nk.Utils.RandomFloat(-o,o),-r-2*t.height),t.scale.Set(e),t.data.mass=10*e,t.data.velocity.Set(0),t.data.lifespan=280,t.AttachTo(s)}nk.Plainsprite.BUILD_DEFAULT_TEXTURE();var n=document.getElementsByTagName("canvas")[0];n.setAttribute("width",window.innerWidth),n.setAttribute("height",window.innerHeight),n.style.display="initial",n.style.position="absolute",n.style.top="0",n.style.left="0";var i=n.width,o=.5*i,a=n.height,r=.5*a,s=new nk.Stage2D(n,o,r),d=new nk.Vector2D(0,.0982),l=new nk.Vector2D,c=new nk.Pool(nk.Plainsprite),u=new nk.ImageLoader([{id:"raindrop",src:"./assets/images/raindrop.png"}],!0);u.onComplete.Add(function(){c.Flood(function(t){t.SetTexture(u.GetBasicTexture("raindrop")),t.data.velocity=new nk.Vector2D},1e3),s.onProcess.Add(function(){for(var e,n=this.children.length;n--;)e=this.children[n],e.position.AddV(e.data.velocity),e.data.velocity.Add(d.x,d.y+e.data.mass/100),e.data.velocity.Add(l.x/e.data.mass*4,l.y/e.data.mass*4),--e.data.lifespan||c.Store(e.Detach());l.Set(nk.Utils.RandomFloat(-.1,.1),0),t(),t(),t(),t()},s)}),document.body.removeChild(e)}var e=document.getElementById("buttons"),n=document.createElement("input");n.setAttribute("value","Rain"),n.setAttribute("type","button"),n.addEventListener("click",t),e.appendChild(n)}},function(t,e){t.exports=function(){function t(){var t=document.getElementsByTagName("canvas")[0];t.setAttribute("width",window.innerWidth),t.setAttribute("height",window.innerHeight),t.style.display="initial",t.style.position="absolute",t.style.top="0",t.style.left="0";var n=t.width,i=.5*n,o=t.height,a=.5*o,r=new nk.Stage2D(t,i,a),s=null,d=new nk.Vector2D,l=new nk.Vector2D,c=[],u=[];!function(){for(var t=15;t--;){var e=new nk.Path.Polygon2D;nk.Geom.Polygon2D.Construct.Cyclic(e,nk.Utils.RandomInteger(-i,i),nk.Utils.RandomInteger(-a,a),nk.Utils.RandomInteger(30,60),nk.Utils.RandomInteger(3,5)),e.Rotate(nk.Utils.RandomFloat(0,nk.Math.PII));var n=new nk.Graphic2D(0,0,e);c.push(n)}}(),function(){for(var t=360,e=2*Math.PI/t;t--;){var n=e*t,i=new nk.Path.Ray2D(0,0,0,0);i.style.stroke.lineWidth=1;var o=new nk.Graphic2D(0,0,i);o.interactive=!1,o.data.angle=n,o.data.r=180,u.push(o)}}(),r.Mount.apply(r,c.concat(u)),r.onProcess.Add(function(){u.forEach(function(t){t.path.s.SetV(r.mouse.position),t.path.e.SetV(t.path.s),t.path.e.Add(t.data.r,t.data.r),t.path.e.RotateAroundV(t.path.s,t.data.angle)});for(var t=0;t<u.length;++t)for(var e,n=u[t],i=0;i<c.length;++i){e=c[i].path;for(var o,a,s,d=0;d<e.vertices.length-1;++d)o=e.vertices[d],a=e.vertices[d+1],(s=nk.Math.LineLineIntersection(n.path.s,n.path.e,o,a))&&u[t].path.e.SetV(s);o=e.vertices[e.vertices.length-1],a=e.vertices[0],s=nk.Math.LineLineIntersection(n.path.s,n.path.e,o,a),s&&u[t].path.e.SetV(s)}}),r.mouse.onMove.Add(function(t){null!==s&&(s.x=t.data.position.x+l.x-d.x,s.y=t.data.position.y+l.y-d.y)},r),r.mouse.onDown.Add(function(t){for(var e=t.data.position,n=r.children.length;n--;)if(r.children[n].IntersectsPoint(e)){d.SetV(e),s=r.children[n],l.SetV(s),t.stopPropagation=!0,s.SendToFront();break}},r),r.mouse.onUp.Add(function(){s&&(s=null)}),document.body.removeChild(e)}var e=document.getElementById("buttons"),n=document.createElement("input");n.setAttribute("value","Raycasting"),n.setAttribute("type","button"),n.addEventListener("click",t),e.appendChild(n)}},function(t,e){t.exports=function(){function t(){function t(t,e,n){var i=new nk.Path.Circle(0,0,n),o=new nk.Graphic2D(t,e,i);o.data.body={shape:i,relative:o.position,velocity:new nk.Vector2D(p(-5,5),p(-5,5))},d.Mount(o),y.push(o)}function n(t,e,n,i,o){var a=new nk.Path.Line2D(.5*-n,0,.5*n,0);a.Rotate(nk.Math.RADIAN*i);var r=new nk.Graphic2D(t,e,a);r.data.body={shape:a,relative:r.position},m.push(r),d.Mount(r),!1===o&&(r.interactive=!1)}var i=document.getElementsByTagName("canvas")[0];i.setAttribute("width",window.innerWidth),i.setAttribute("height",window.innerHeight),i.style.display="initial",i.style.position="absolute",i.style.top="0",i.style.left="0";var o=i.width,a=.5*o,r=i.height,s=.5*r,d=new nk.Stage2D(i,a,s),l=null,c=new nk.Vector2D,u=new nk.Vector2D,h=nk.Utils.RandomInteger,p=nk.Utils.RandomFloat,m=[],y=[],v=nk.Math.Collision2D.CirclevsLine.Relative.Collide,g=nk.Math.Collision2D.CirclevsLine.Relative.ReflectingResponse,f=new nk.Math.Collision2D.CirclevsLine.Result;!function(){for(var t=25;t--;)n(h(-a,a),h(-s,s),100,h(0,360))}(),n(-a,0,r,90,!1),n(a,0,r,90,!1),n(0,-s,o,0,!1),n(0,s,o,0,!1),function(){for(var e=25;e--;)t(h(-a,a),h(-s,s),h(5,10))}(),d.onProcess.Add(function(){y.forEach(function(t){t.position.AddV(t.data.body.velocity),m.forEach(function(e){f.Reset(),v(t.data.body,e.data.body,f),f.occured&&g(t.data.body,e.data.body,f)})})}),d.mouse.onMove.Add(function(t){null!==l&&(l.x=t.data.position.x+u.x-c.x,l.y=t.data.position.y+u.y-c.y)},d),d.mouse.onDown.Add(function(t){for(var e=t.data.position,n=d.children.length;n--;)if(d.children[n].IntersectsPoint(e)){c.SetV(e),l=d.children[n],u.SetV(l),t.stopPropagation=!0,l.SendToFront();break}},d),d.mouse.onUp.Add(function(){l&&(l=null)}),document.body.removeChild(e)}var e=document.getElementById("buttons"),n=document.createElement("input");n.setAttribute("value","ReflectiveCollision"),n.setAttribute("type","button"),n.addEventListener("click",t),e.appendChild(n)}},function(t,e){t.exports=function(){function t(){function t(){var t=document.getElementsByTagName("canvas")[0];t.setAttribute("width",window.innerWidth),t.setAttribute("height",window.innerHeight),t.style.display="initial",t.style.position="absolute",t.style.top="0",t.style.left="0";var e=t.width,n=.5*e,i=t.height,o=.5*i,a=new nk.Stage2D(t,n,o,!0);a.ticker.StartAF();var r=null,s=null,d=null,l=null,c=null,u=new nk.ImageLoader;u.onComplete.Add(function(t){console.log(t.target,t.data,"complete"),r=new nk.Sprite(0,0,u.GetBasicTexture("4dots")),r.anchor.Set(.5),s=new nk.Sprite(100,50,u.GetBasicTexture("smudge")),s.anchor.Set(.5),d=new nk.Sprite(-100,100,u.GetBasicTexture("gobj")),d.anchor.Set(.5),d.clip.tl.Set(0,64),l=new nk.Sprite(100,100),l.anchor.Set(.5),c=new nk.Plainsprite(200,0),c.anchor.Set(.5),a.AddChildren(r,s,d,l,c)}),u.onImageLoaded.Add(function(t){console.log(t.target,t.data,"loaded")}),u.Load([{id:"smudge",src:"./assets/images/smudge.png"}],!0),u.Load([{id:"4dots",src:"./assets/images/4dots.png"},{id:"gobj",src:"./assets/images/glass-of-blueberryjuice.png"}],!0);var h=null;a.mouse.onMove.Add(function(t){null!==h&&(h.x=t.data.position.x,h.y=t.data.position.y)},a),a.mouse.onDown.Add(function(t){for(var e=t.data.position,n=a.children.length;n--;)if(a.children[n].IntersectsPoint(e)){h=a.children[n],t.stopPropagation=!0,h.SendToFront();break}},a),a.mouse.onUp.Add(function(){h&&(h=null)})}nk.Sprite.BUILD_DEFAULT_TEXTURE(function(){nk.Plainsprite.BUILD_DEFAULT_TEXTURE(t)}),document.body.removeChild(e)}var e=document.getElementById("buttons"),n=document.createElement("input");n.setAttribute("value","Sprite"),n.setAttribute("type","button"),n.addEventListener("click",t),e.appendChild(n)}},function(t,e){t.exports=function(){function t(){function t(){function t(){var t=new nk.Path.Polygon2D;t.style.stroke.lineWidth=3,nk.Geom.Polygon2D.Construct.Cyclic(t,0,0,30,12);var e=t.aabb.br.AbsoluteCopy().SubtractVC(t.aabb.tl.AbsoluteCopy());return new nk.Graphic2D(.5*t.aabb.w-.5*e.x,.5*t.aabb.h-.5*e.y,t)}function e(){i.setTransform(1,0,0,1,0,0),i.fillStyle="rgba(0, 0, 0, 1)",i.fillRect(0,0,o,r),d.Draw(i),v.Process()}var n=document.getElementsByTagName("canvas")[0];n.setAttribute("width",window.innerWidth),n.setAttribute("height",window.innerHeight),n.style.display="initial",n.style.position="absolute",n.style.top=0,n.style.left=0;var i=n.getContext("2d"),o=n.width,a=.5*o,r=n.height,s=.5*r,d=new nk.Container2D(a,s),l=null,c=new nk.Ticker(e,1e3,!0);c.Start();var u=20,h=0,p=35,m=[],y=new nk.Pool(nk.Sprite),v=new nk.Timer;v.onFinish.Add(function(){var t=p;for(p=p<3?3:p--;t--;){var e=y.Retrieve();e.transformAutomaticUpdate=!1,d.AddChild(e)}if(c.GetTPS()>40||h++<20)this.Start(1);else{var n=d.children.length;console.log(n,c.GetTPS()),d.children.forEach(function(t){y.Store(t)}),d.Dump(),h=0,m.push(n),u--,u>0?v.Start(120):(m.sort(function(t,e){return t-e}),console.log(m,"\nMIN: "+m[0],"MED: "+m[Math.round(m.length/2)],"MAX: "+m[m.length-1]))}},v);var g=new nk.ImageLoader([{id:"tex",src:nk.Utils.GenerateSimpleBase64Png(t)}],!0);g.onComplete.Add(function(){l=g.GetBasicTexture("tex"),y.Flood(function(t){t.x=Math.random()*o-a,t.y=Math.random()*r-s,t.SetTexture(l)},1e5),v.Start(120)})}nk.Sprite.BUILD_DEFAULT_TEXTURE(t),document.body.removeChild(e)}var e=document.getElementById("buttons"),n=document.createElement("input");n.setAttribute("value","Stresstest"),n.setAttribute("type","button"),n.addEventListener("click",t),e.appendChild(n)}},function(t,e){t.exports=function(){function t(){var t=document.getElementsByTagName("canvas")[0];t.setAttribute("width",window.innerWidth),t.setAttribute("height",window.innerHeight),t.style.display="initial",t.style.position="absolute",t.style.top="0",t.style.left="0";var n=t.width,i=.5*n,o=t.height,a=.5*o,r=new nk.Stage2D(t,i,a),s=new nk.Text(0,0,"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur.Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.");s.style.text.align=nk.Style.TEXT_ALIGN.CENTER,s.style.text.baseline=nk.Style.TEXT_BASELINE.MIDDLE,s.style.text.lineWidth=.3,s.style.text.font="40px Arial",r.Mount(s),s.rotation=24*nk.Math.RADIAN,document.body.removeChild(e)}var e=document.getElementById("buttons"),n=document.createElement("input");n.setAttribute("value","Text"),n.setAttribute("type","button"),n.addEventListener("click",t),e.appendChild(n)}},function(t,e){t.exports=function(){function t(){function t(){c.style.fill.color=l.value,l.IncreaseChannel(0,1);var t=nk.Math.DTR(y),e=nk.Math.DTR(g);u.x+=Math.cos(t)*v,u.y+=Math.sin(t)*v,h.x-=Math.cos(t)*v,h.y-=Math.sin(t)*v,p.x+=Math.cos(e)*f,p.y+=Math.sin(e)*f,m.x-=Math.cos(e)*f,m.y-=Math.sin(e)*f,u.rotation=-t,h.rotation=-t,p.rotation=-e,m.rotation=-e,y+=1,g-=1,v+=.01,f+=.01,v=nk.Utils.InverseClamp(v,-5,5),f=nk.Utils.InverseClamp(f,-5,5),y=nk.Utils.InverseClamp(y,0,359),g=nk.Utils.InverseClamp(g,-359,0),i.setTransform(1,0,0,1,0,0),i.fillStyle="rgba(255, 255, 255, 0.001)",i.fillRect(0,0,o,r),d.Draw(i)}var n=document.getElementsByTagName("canvas")[0];n.setAttribute("width",window.innerWidth),n.setAttribute("height",window.innerHeight),n.style.display="initial",n.style.position="absolute",n.style.top=0,n.style.left=0;var i=n.getContext("2d"),o=n.width,a=.5*o,r=n.height,s=.5*r,d=new nk.Container2D(a,s),l=new nk.Color(255,0,0);l.ConvertToHSLA();var c=new nk.Path.AABB2D(-50,-50,50,50);c.style.shadow.applied=!0;var u=new nk.Graphic2D(0,0,c),h=new nk.Graphic2D(0,0,c),p=new nk.Graphic2D(0,0,c),m=new nk.Graphic2D(0,0,c),y=0,v=0,g=0,f=0,w=new nk.Path.Line2D(-100,0,100,0);w.style.shadow.applied=!0,w.style.stroke.color="#000";var k=new nk.Graphic2D(0,0,w),b=new nk.Graphic2D(0,0,w),A=new nk.Graphic2D(0,0,w),C=new nk.Graphic2D(0,0,w);d.AddChildren(u,h,p,m),u.AddChild(k),h.AddChild(b),p.AddChild(A),m.AddChild(C),setInterval(t,1),document.body.removeChild(e)}var e=document.getElementById("buttons"),n=document.createElement("input");n.setAttribute("value","TheMask"),n.setAttribute("type","button"),n.addEventListener("click",t),e.appendChild(n)}},function(t,e){t.exports=function(){function t(){function t(){var t=document.getElementsByTagName("canvas")[0];t.setAttribute("width",window.innerWidth),t.setAttribute("height",window.innerHeight),t.style.display="initial",t.style.position="absolute",t.style.top="0",t.style.left="0";var e=t.width,n=t.height,i=new nk.Stage2D(t,0,0,!1,!1),o=new nk.Tilesprite(.5*e-.25*e,.5*n-.25*n);o.GeneratePattern(i.rc,.5*e,.5*n),i.AddChild(o),i.onProcess.Add(function(){o.OffsetPattern(1,1)}),console.log(o)}nk.Tilesprite.BUILD_DEFAULT_TEXTURE(t),document.body.removeChild(e)}var e=document.getElementById("buttons"),n=document.createElement("input");n.setAttribute("value","Tilesprite"),n.setAttribute("type","button"),n.addEventListener("click",t),e.appendChild(n)}},function(t,e){t.exports=function(){function t(){function t(){var t=document.getElementsByTagName("canvas")[0];t.setAttribute("width",window.innerWidth),t.setAttribute("height",window.innerHeight),t.style.display="initial",t.style.position="absolute",t.style.top="0",t.style.left="0";var e=t.width,n=t.height,i=.5*e,o=.5*n,a=new nk.Stage2D(t,0,0,!1,!0),r=null,s=null,d=null,l=new nk.ImageLoader;l.onComplete.Add(function(){var t=new nk.GLTextureProgramController(a.gl),e=new nk.GLTextureProgramController(a.gl),n=new nk.GLTextureProgramController(a.gl);t.BindBasicTexture(l.GetBasicTexture("1to8")),e.BindBasicTexture(l.GetBasicTexture("1to8f")),n.BindBasicTexture(nk.Sprite.DEFAULT_TEXTURE),d=new nk.Sprite(i,o,n),d.anchor.Set(.5),d.scale.Set(5),d.UpdateShape(),d.UpdateTextureTransform(),s=new nk.Sprite(i,o-200,e),s.anchor.Set(.5),s.UpdateTextureTransform(),r=new nk.Sprite(i,o,t),r.anchor.Set(.5),r.width=320,r.height=320,r.UpdateShape(),r.UpdateTextureTransform();var c=r.animationController=new nk.Animator.Controller(r),u=c.CreateAnimation("test",20);u.GenerateFrames(64,64,512,64,8,{5:120}),console.log(u),u.reverse=!0,u.onEnd.Add(function(){},u),c.PlayAnimation("test",7),a.AddChildren(r,s,d),a.onProcess.Add(function(){r.animationController.Process()},a)}),l.Load([{id:"1to8",src:"./assets/images/1to8.png"},{id:"1to8f",src:"./assets/images/1to8.png"}],!0);var c=null,u=new nk.Vector2D,h=new nk.Vector2D;a.mouse.onMove.Add(function(t){null!==c&&(c.x=t.data.position.x+h.x-u.x,c.y=t.data.position.y+h.y-u.y)},a),a.mouse.onDown.Add(function(t){for(var e=t.data.position,n=a.children.length;n--;)if(a.children[n].IntersectsPoint(e)){u.SetV(e),c=a.children[n],h.SetV(c),t.stopPropagation=!0,c.SendToFront();break}},a),a.mouse.onUp.Add(function(){c&&(c=null)})}nk.Sprite.BUILD_DEFAULT_TEXTURE(t),document.body.removeChild(e)}var e=document.getElementById("buttons"),n=document.createElement("input");n.setAttribute("value","WebGL Animation"),n.setAttribute("type","button"),n.addEventListener("click",t),e.appendChild(n)}},function(t,e){t.exports=function(){function t(){function t(){s>1&&(o.BindBasicTexture(r.GetBasicTexture("fontimg")),d=new nk.BitmapText(0,0,o,a.GetData("fontdataxml"),"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum."),console.log(d),d.maxWidth=window.innerWidth,i.AddChild(d),d.ComputeText())}var n=document.getElementsByTagName("canvas")[0];n.setAttribute("width",window.innerWidth),n.setAttribute("height",window.innerHeight),n.style.display="initial",n.style.position="absolute",n.style.top="0",n.style.left="0";var i=new nk.Stage2D(n,0,0,!1,!0);i.gl.clearColor(1,1,1,1);var o=new nk.GLTextureProgramController(i.gl),a=new nk.XHRLoader,r=new nk.ImageLoader,s=0;a.Load([{id:"fontdataxml",src:"./assets/xhr/font.fnt",type:"xml"},{id:"fontdatajson",src:"./assets/xhr/font.json",type:"json"}]),r.Load([{id:"fontimg",src:"./assets/images/font.png"}],!0),a.onComplete.Add(function(e){console.log(e.data),console.log(JSON.stringify(e.data.dataCache.items[0].data)===JSON.stringify(e.data.dataCache.items[1].data)),s++,t()}),r.onComplete.Add(function(e){console.log(e.data),s++,t()});var d=null;document.body.removeChild(e)}var e=document.getElementById("buttons"),n=document.createElement("input");n.setAttribute("value","WebGL BitmapFont"),n.setAttribute("type","button"),n.addEventListener("click",t),e.appendChild(n)}},function(t,e){t.exports=function(){function t(){function t(){this.path.LinkStyle()}var n=document.getElementsByTagName("canvas")[0];n.setAttribute("width",window.innerWidth),n.setAttribute("height",window.innerHeight),n.style.display="initial",n.style.position="absolute",n.style.top="0",n.style.left="0";var i=n.width,o=n.height,a=.5*i,r=.5*o,s=new nk.Stage2D(n,0,0,!1,!0),d=new nk.GLCircleProgramController(s.gl),l=new nk.GLLine2DProgramController(s.gl),c=nk.Utils.RandomFloat,u=nk.Utils.RandomInteger,h=new nk.Path.Line2D(a,0,a,o),p=new nk.Path.Line2D(0,r,i,r);h.LinkProgramController(l),p.UseProgramController(l),s.Mount(new nk.Graphic2D(0,0,h),new nk.Graphic2D(0,0,p)),s.children[0].interactive=!1,s.children[1].interactive=!1;for(var m=1e3;m--;){var y=new nk.Path.Circle(0,0,u(2,30));y.style.fill.color=new nk.Color(u(0,255),u(0,255),u(0,255)).ComputeValueHex(),y.LinkProgramController(d);var v=new nk.Graphic2D(c(0,i),c(0,o),y);v.GLPreDraw=t,v.AttachTo(s)}var g=null,f=new nk.Vector2D,w=new nk.Vector2D;s.mouse.onMove.Add(function(t){null!==g&&(g.x=t.data.position.x+w.x-f.x,g.y=t.data.position.y+w.y-f.y)},s),s.mouse.onDown.Add(function(t){for(var e=t.data.position,n=s.children.length;n--;)if(s.children[n].IntersectsPoint(e)){f.SetV(e),g=s.children[n],w.SetV(g),t.stopPropagation=!0,g.SendToFront();break}},s),s.mouse.onUp.Add(function(){g&&(g=null)}),document.body.removeChild(e)}var e=document.getElementById("buttons"),n=document.createElement("input");n.setAttribute("value","WebGL Circle"),n.setAttribute("type","button"),n.addEventListener("click",t),e.appendChild(n)}},function(t,e){t.exports=function(){function t(){function t(){l.SetV(s.mouse.position)}var n=document.getElementsByTagName("canvas")[0];n.setAttribute("width",window.innerWidth),n.setAttribute("height",window.innerHeight),n.style.display="initial",n.style.position="absolute",n.style.top="0",n.style.left="0";for(var i=n.width,o=n.height,a=i/45,r=o/45,s=new nk.Stage2D(n,0,0,!1,!0),d=new nk.GLLine2DProgramController(s.gl),l=new nk.Vector2D,c=nk.Math.SquareGrid(i+a,o+r,a,r,nk.Vector2D),u=c.length;u--;){var h=c[u],p=new nk.Path.Line2D(l,h);p.LinkProgramController(d);new nk.Graphic2D(0,0,p).AttachTo(s)}s.onProcess.Add(t,s),document.body.removeChild(e)}var e=document.getElementById("buttons"),n=document.createElement("input");n.setAttribute("value","WebGL Line2D"),n.setAttribute("type","button"),n.addEventListener("click",t),e.appendChild(n)}},function(t,e){t.exports=function(){function t(){var t=document.getElementsByTagName("canvas")[0];t.setAttribute("width",window.innerWidth),t.setAttribute("height",window.innerHeight),t.style.display="initial",t.style.position="absolute",t.style.top="0",t.style.left="0";var n=t.width,i=t.height,o=.5*n,a=.5*i,r=new nk.Stage2D(t,0,0,!0,!0);r.ticker.Start();var s=new nk.GLPixelBatchProgramController(r.gl);r.UseAsBatchParent(s);var d=nk.Utils.RandomFloat;!function(){for(var t=2e4;t--;){var e=new nk.Path.Pixel(0,0);e.colorObj.r=.4,e.colorObj.g=Math.random(),e.colorObj.b=.8,e.colorObj.a=d(.1,.6),e.style.pixel.size=d(1,2);var n=new nk.Graphic2D(o,a,e);n.data.velocity=new nk.Vector2D(d(-10,10),d(-1,10)),n.data.torque=d(10*-nk.Math.RADIAN,10*nk.Math.RADIAN),r.Mount(n),n.UpdateTransform()}r.ComputeBatchBuffer()}(),r.onProcess.Add(function(){this.children.forEach(function(t){t.data.velocity.Rotate(t.data.torque),t.position.AddV(t.data.velocity),t.UpdateInBuffer()}),r.ticker.GetTPS()<40&&console.log(r.ticker.GetTPS())},r),console.log(r.childDataBuffer),document.body.removeChild(e)}var e=document.getElementById("buttons"),n=document.createElement("input");n.setAttribute("value","WebGL PixelBatch"),n.setAttribute("type","button"),n.addEventListener("click",t),e.appendChild(n)}},function(t,e){t.exports=function(){function t(){var t=document.getElementsByTagName("canvas")[0];t.setAttribute("width",window.innerWidth),t.setAttribute("height",window.innerHeight),t.style.display="initial",t.style.position="absolute",t.style.top="0",t.style.left="0";var n=t.width,i=t.height,o=new nk.Stage2D(t,0,0,!1,!0),a=new nk.GLRectangleProgramController(o.gl),r=nk.Utils.RandomFloat,s=new nk.Path.AABB2D(-10,-10,10,10);s.LinkProgramController(a);for(var d=1e3;d--;){new nk.Graphic2D(r(0,n),r(0,i),s).AttachTo(o)}var l=null,c=new nk.Vector2D,u=new nk.Vector2D;o.mouse.onMove.Add(function(t){null!==l&&(l.x=t.data.position.x+u.x-c.x,l.y=t.data.position.y+u.y-c.y)},o),o.mouse.onDown.Add(function(t){for(var e=t.data.position,n=o.children.length;n--;)if(o.children[n].IntersectsPoint(e)){c.SetV(e),l=o.children[n],u.SetV(l),t.stopPropagation=!0,l.SendToFront();break}},o),o.mouse.onUp.Add(function(){l&&(l=null)}),document.body.removeChild(e)}var e=document.getElementById("buttons"),n=document.createElement("input");n.setAttribute("value","WebGL Rectangle"),n.setAttribute("type","button"),n.addEventListener("click",t),e.appendChild(n)}},function(t,e){t.exports=function(){function t(){function t(){function t(){var t=new nk.Path.Polygon2D;t.style.stroke.lineWidth=1,nk.Geom.Polygon2D.Construct.Cyclic(t,0,0,32,12);var e=t.aabb.br.AbsoluteCopy().SubtractVC(t.aabb.tl.AbsoluteCopy());return new nk.Graphic2D(.5*t.aabb.w-.5*e.x,.5*t.aabb.h-.5*e.y,t)}function e(){i.viewport(0,0,o,r),i.clear(i.COLOR_BUFFER_BIT),i.enable(i.BLEND),i.disable(i.DEPTH_TEST),i.blendFunc(i.SRC_ALPHA,i.ONE_MINUS_SRC_ALPHA),d.GLDraw(i),C.Process(),i.flush()}var n=document.getElementsByTagName("canvas")[0];n.setAttribute("width",window.innerWidth),n.setAttribute("height",window.innerHeight),n.style.display="initial",n.style.position="absolute",n.style.top=0,n.style.left=0;var i=n.getContext("webgl");i||(i=n.getContext("experimental-webgl"));var o=n.width,a=.5*o,r=n.height,s=.5*r,d=new nk.Container2D(0,0);d.scale.Set(2/o,-2/r),d.position.Add(0,0),d.UpdateTransform();var l=null,c=null,u=null,h=new nk.Path.Circle(0,0,25);c=new nk.GLCircleProgramController(i),h.LinkProgramController(c);var p=new nk.Path.AABB2D(-25,-25,25,25);u=new nk.GLRectangleProgramController(i),p.LinkProgramController(u);var m=p,y=new nk.Ticker(e,1e3,!0);y.Start();var v=20,g=0,f=35,w=[],k=new nk.Pool(nk.Sprite),b=new nk.Pool(nk.Graphic2D),A=k,C=new nk.Timer;C.onFinish.Add(function(){var t=f;for(f=f<3?3:f--;t--;){var e=A.Retrieve();d.AddChild(e)}if(y.GetTPS()>40||g++<20)this.Start(1);else{var n=d.children.length;console.log(n,y.GetTPS()),d.children.forEach(function(t){A.Store(t)}),d.Dump(),g=0,w.push(n),v--,v>0?C.Start(120):(w.sort(function(t,e){return t-e}),console.log(w,"\nMIN: "+w[0],"MED: "+w[Math.round(w.length/2)],"MAX: "+w[w.length-1]))}},C);var D=new nk.ImageLoader([{id:"tex",src:nk.Utils.GenerateSimpleBase64Png(t)}],!0);D.onComplete.Add(function(){l=new nk.GLTextureProgramController(i),l.BindBasicTexture(D.GetBasicTexture("tex")),k.Flood(function(t){t.x=Math.random()*o-a,t.y=Math.random()*r-s,t.programController=l,t.transformAutomaticUpdate=!1,t.SetTexture(l.originalTexture0)},1e5),b.Flood(function(t){t.x=Math.random()*o-a,t.y=Math.random()*r-s,t.transformAutomaticUpdate=!1,t.SetPath(m)},1e5),C.Start(120)})}nk.Sprite.BUILD_DEFAULT_TEXTURE(t),document.body.removeChild(e)}var e=document.getElementById("buttons"),n=document.createElement("input");n.setAttribute("value","WebGL Stresstest"),n.setAttribute("type","button"),n.addEventListener("click",t),e.appendChild(n)}},function(t,e){t.exports=function(){function t(){var t=document.getElementsByTagName("canvas")[0];t.setAttribute("width",window.innerWidth),t.setAttribute("height",window.innerHeight),t.style.display="initial",t.style.position="absolute",t.style.top="0",t.style.left="0";var n=t.width,i=t.height,o=.5*n,a=.5*i,r=nk.Utils.RandomFloat,s=nk.Utils.RandomInteger,d=window.stage=new nk.Stage2D(t,0,0,!1,!0),l=new nk.GLTextureBatchProgramController(d.gl);d.UseAsBatchParent(l);var c=new nk.ImageLoader;c.onComplete.Add(function(){var t=c.GetBasicTexture("colors");l.BindBasicTexture(t),function(){for(var e=1e4;e--;){var n=new nk.Sprite(o,a,t),i=n.animationController=new nk.Animator.Controller(n);i.CreateAnimation("test",s(5,40)).GenerateFrames(64,64,1024,64,16),i.PlayAnimation("test",s(0,15));var l=s(1,5);l=nk.Utils.ThisOrThat(l,-l);var c=s(1,5);c=nk.Utils.ThisOrThat(c,-c);var u=r(nk.Math.RADIAN,5*nk.Math.RADIAN);u=nk.Utils.ThisOrThat(u,-u),n.data.velocity=new nk.Vector2D(l,c),n.data.torque=u,n.scale.Set(r(.3,.4)),n.anchor.Set(.5),d.Mount(n),n.UpdateTransform()}d.ComputeBatchBuffer(),d.onProcess.Add(function(){for(var t,e=0;e<this.children.length;++e)t=this.children[e],t.animationController.Process(),t.data.velocity.Rotate(t.data.torque),t.position.AddV(t.data.velocity),t.UpdateInBuffer();d.ticker.GetTPS()<30&&console.log(d.ticker.GetTPS())},d)}()}),c.Load([{id:"colors",src:"./assets/images/colors.png"}],!0),document.body.removeChild(e)}var e=document.getElementById("buttons"),n=document.createElement("input");n.setAttribute("value","WebGL TextureBatch"),n.setAttribute("type","button"),n.addEventListener("click",t),e.appendChild(n)}},function(t,e){t.exports=function(){function t(){function t(){var t=document.getElementsByTagName("canvas")[0];t.setAttribute("width",window.innerWidth),t.setAttribute("height",window.innerHeight),t.style.display="initial",t.style.position="absolute",t.style.top="0",t.style.left="0";var e=t.width,n=t.height,i=new nk.Stage2D(t,0,0,!1,!0),o=nk.GLTextureProgramController(i.gl);o.BindBasicTexture(nk.Tilesprite.DEFAULT_TEXTURE);var a=new nk.Tilesprite(.5*e-.25*e,.5*n-.25*n,o);a.GeneratePattern(null,.5*e,.5*n),i.AddChild(a),i.onProcess.Add(function(){a.OffsetPattern(1,1)}),console.log(a)}nk.Tilesprite.BUILD_DEFAULT_TEXTURE(t),document.body.removeChild(e)}var e=document.getElementById("buttons"),n=document.createElement("input");n.setAttribute("value","WebGL Tilesprite"),n.setAttribute("type","button"),n.addEventListener("click",t),e.appendChild(n)}}]));
//# sourceMappingURL=tests.min.js.map