!function(t){function e(i){if(n[i])return n[i].exports;var o=n[i]={i:i,l:!1,exports:{}};return t[i].call(o.exports,o,o.exports,e),o.l=!0,o.exports}var n={};e.m=t,e.c=n,e.i=function(t){return t},e.d=function(t,n,i){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:i})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="./",e(e.s=83)}([,function(t,e,n){n(2),n(3),n(4),n(5),n(6),n(7);var i=[],o=n(54);o.keys().forEach(function(t){i.push(o(t))});for(var a=0,r=i.length;a<r;++a)i[a]()},function(t,e){},function(t,e,n){t.exports=n.p+"images/1to8.png"},function(t,e,n){t.exports=n.p+"images/4dots.png"},function(t,e,n){t.exports=n.p+"images/glass-of-blueberryjuice.png"},function(t,e,n){t.exports=n.p+"images/raindrop.png"},function(t,e,n){t.exports=n.p+"images/smudge.png"},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e,n){function i(t){return n(o(t))}function o(t){var e=a[t];if(!(e+1))throw new Error("Cannot find module '"+t+"'.");return e}var a={"./aabbcollision.test":55,"./animation.test":56,"./butterflyish.test":57,"./cli.test":58,"./clock.test":59,"./elasticcollision.test":60,"./field.test":61,"./fractree.test":62,"./grabndrag.test":63,"./grid.test":64,"./magnet.test":65,"./motion.test":66,"./nightsky.test":67,"./particles.test":68,"./performance.test":69,"./platformer.test":70,"./playground.test":71,"./rain.test":72,"./sprite.test":73,"./themask.test":74};i.keys=function(){return Object.keys(a)},i.resolve=o,t.exports=i,i.id=54},function(t,e){t.exports=function(){function t(){var t=document.getElementsByTagName("canvas")[0];t.setAttribute("width",window.innerWidth),t.setAttribute("height",window.innerHeight),t.style.display="initial",t.style.position="absolute",t.style.top="100px",t.style.left="100px";var n=(t.getContext("2d"),t.width,t.height,new nk.Stage2D(t,0,0));n.scale.Set(1,1),n.mouse.scale.SetV(n.scale);var i=new nk.Text(0,0,"Collide them!"),o=new nk.Graphic2D(300,100,new nk.Path.AABB2D(0,0,50,50)),a=new nk.Graphic2D(400,400,new nk.Path.AABB2D(0,0,400,100)),r=new nk.Graphic2D(0,0,new nk.Path.Line2D);n.AddChild(o),n.AddChild(a),n.AddChild(i),n.AddChild(r);var d=null,l={shape:o.path,relative:o.position,anchor:new nk.Vector2D},s={shape:a.path,relative:a.position,anchor:new nk.Vector2D};r.path.s.SetV(o.position),r.path.e.SetV(a.position),n.mouse.onMove.Add(function(t){if(null!==d){d.x=t.data.position.x,d.y=t.data.position.y;var e=nk.Math.Collision2D.AABB2DvsAABB2D.Relative.Collide(l,s);r.path.s.SetV(o.position),r.path.e.SetV(a.position),r.SendToFront(),null!==e?(i.text="Well done!",o.position.AddV(e)):i.text="Collide them!"}},n),n.mouse.onDown.Add(function(t){for(var e=t.data.position,i=n.children.length;i--;)if(n.children[i].IntersectsPoint(e)){d=n.children[i],t.stopPropagation=!0,d.SendToFront();break}},n),n.mouse.onUp.Add(function(t){d&&(d=null)}),n.mouse.onLeave.Add(function(t){d&&(d=null)}),document.body.removeChild(e)}var e=document.getElementById("buttons"),n=document.createElement("input");n.setAttribute("value","AABBCollision"),n.setAttribute("type","button"),n.addEventListener("click",t),e.appendChild(n)}},function(t,e){t.exports=function(){function t(){var t=document.getElementsByTagName("canvas")[0];t.setAttribute("width",window.innerWidth),t.setAttribute("height",window.innerHeight),t.style.display="initial",t.style.position="absolute",t.style.top="0",t.style.left="0";var n=(t.getContext("2d"),t.width),i=.5*n,o=t.height,a=.5*o,r=new nk.Stage2D(t,i,a,!0);r.ticker.StartAF();var d=null,l=null,s=new nk.Time.Timer,c=new nk.Load.TextureLoader;c.onComplete.Add(function(t){l=new nk.Sprite(0,-200,c.Get("1to8")),l.anchor.Set(.5),d=new nk.Sprite(0,0,t.data.cache[0].image),d.anchor.Set(.5),d.scale.Set(5);var e=d.animationController=new nk.Animator.Controller(d),n=e.AddAnimation("test",20);n.GenerateFrames(64,64,512,64,8,{5:120}),n.reverse=!0,n.onEnd.Add(function(){r.ticker.Stop()},n),e.PlayAnimation("test",7),r.AddChildren(d,l),s.onStop.Add(function(){d.animationController.StopCurrentAnimation()}),r.onProcess.Add(function(){d.animationController.Process(),s.Process()},r)}),c.Load([{id:"1to8",src:"./images/1to8.png"}]),document.body.removeChild(e)}var e=document.getElementById("buttons"),n=document.createElement("input");n.setAttribute("value","Animation"),n.setAttribute("type","button"),n.addEventListener("click",t),e.appendChild(n)}},function(t,e){t.exports=function(){function t(){function t(){s.IncreaseChannel(0,.1),u.style.stroke.color=s.value,y.style.text.fillColor=s.value;var t=nk.Math.DTR(m);h.x+=Math.cos(t)*g,h.y+=Math.sin(t)*g,y.y+=Math.sin(t)*g,h.rotation=t,m++,i.setTransform(1,0,0,1,0,0),i.fillStyle="rgba(255, 255, 255, 0.5)",i.fillRect(0,0,o,r),l.Draw(i)}var n=document.getElementsByTagName("canvas")[0];n.setAttribute("width",window.innerWidth),n.setAttribute("height",window.innerHeight),n.style.display="initial",n.style.position="absolute",n.style.top=0,n.style.left=0;var i=n.getContext("2d"),o=n.width,a=.5*o,r=n.height,d=.5*r,l=new nk.Container2D(a,d),s=new nk.Color(0,255,0);s.ConvertToHSLA();var c=new nk.Path.Polygon2D;nk.Geom.Polygon2D.Construct.Star(c,0,0,100,50,8);var u=new nk.Path.Polygon2D;u.style.stroke.lineWidth=.5,u.style.fill.applied=!1,nk.Geom.Polygon2D.Construct.Butterfly(u,0,0,150,40);var h=new nk.Graphic2D(0,.5*-d,c),p=new nk.Graphic2D(0,0,u);h.AddChild(p),h.visible=!1,l.AddChild(h);var m=0,g=3,y=new nk.Text(0,0,"Stop trying to hit me and hit me!");y.style.text.align=nk.Style.TEXT_ALIGN.CENTER,y.style.text.baseline=nk.Style.TEXT_BASELINE.MIDDLE,y.style.text.font="56px Arial",y.style.text.strokeColor="#000",l.AddChild(y),setInterval(t,1);var v={a:{},b:{b:{},c:{d:{e:{f:{g:{h:{i:{j:{k:{l:{m:{n:{o:{p:{q:10}}}}}}}}}}}}}}}};nk.Utils.Nested(v,"b.c.d.e.f..g.h.i.j.k.l.m.n.o.p.q"),nk.Utils.Nested(v,"b.c.d.e.f.g.h.i.j.k.l.m.n.o.p.q",!0,20),nk.Utils.Nested(v,"b.c.d.e.f.g.h.i.j.k.l.m.n.o.p.q"),document.body.removeChild(e)}var e=document.getElementById("buttons"),n=document.createElement("input");n.setAttribute("value","Butterflyish"),n.setAttribute("type","button"),n.addEventListener("click",t),e.appendChild(n)}},function(t,e){t.exports=function(){function t(){function t(t){var e=document.createElement("p");e.className="paragraph",e.innerHTML=t,r.insertBefore(e,d)}function n(e){var n=!1;if(13===e.keyCode){if(n=!0,""!==d.value){var i=y.Parse(d.value);m.push(d.value),p=m.length-1,null!==i&&t(o.UNKNOWN_COMMAND.replace(/DATA/g,i))}d.value="",r.scrollTop=r.scrollHeight}else 38===e.keyCode?p>-1&&(n=!0,d.value=m[p--]):40===e.keyCode&&p<m.length-1&&(n=!0,d.value=m[++p]);!0===n&&(e.preventDefault(),e.stopPropagation())}function i(t){d.focus()}var o={UNKNOWN_COMMAND:'<span style="color: red;">Unknown command: DATA</span>',OPTION_REQUIRED:'<span style="color: lightblue;">Option required for command: DATA</span>',DATA_MISSING:'<span style="color: pink;">Data required: DATA</span>'},a=document.createElement("style");a.innerHTML=["commandbox {"," width: 500px;"," height: auto;"," min-height: 50%;"," max-height: 100%;"," position: absolute;"," top: 0;"," left: 0;"," overflow-y: scroll;"," background-color: black;"," cursor: default;","","}","#input {"," width: 98%;"," height: 18px;"," border: none;"," outline: none;"," position: relative;"," border-bottom: 1px solid black;"," font-family: Arial;"," padding-left: 2%;"," font-size: 13px;"," font-weight: 300;"," background-color: black;"," color: white;"," cursor: default;","","}",".paragraph {"," margin: 0;"," padding: 0;"," font-family: Arial;"," color: white;"," padding-left: 2%;"," font-size: 13px;"," font-weight: 300;","","}",""].join(""),document.head.appendChild(a);var r=document.createElement("commandbox"),d=document.createElement("input");d.setAttribute("type","text"),d.setAttribute("id","input"),r.appendChild(d),document.body.appendChild(r),r.addEventListener("click",i),d.addEventListener("keydown",n);var l=document.getElementsByTagName("canvas")[0];l.setAttribute("width",window.innerWidth-500),l.setAttribute("height",window.innerHeight),l.style.display="initial",l.style.position="absolute",l.style.top=0,l.style.left="500px";var s=(l.getContext("2d"),l.width),c=.5*s,u=l.height,h=.5*u,p=-1,m=[],g=new nk.Stage2D(l,c,h,!0),y=nk.CP.Register();y.Add(nk.CP.Command("create crt",function(e,n){t(o.OPTION_REQUIRED.replace(/DATA/g,"create"))},"Create a graphics object",!0).AddOption("circle cir",function(e,n){if(void 0===n.radius)return void t(o.DATA_MISSING.replace(/DATA/g,"radius"));var i=new nk.Path.Circle(0,0,parseInt(n.radius)),a=new nk.Graphic2D(parseInt(n.x)||0,parseInt(n.y)||0,i);g.AddChild(a)},"Create a circle",0,!0).AddOption("rectangle rect rec",function(e,n){if(void 0===n.width||void 0===n.height)return void t(o.DATA_MISSING.replace(/DATA/g,"width & height"));var i=new nk.Path.AABB2D(0,0,n.width,n.height),a=new nk.Graphic2D(parseInt(n.x),parseInt(n.y),i);g.AddChild(a)},"Create a rectangle",0,!0).AddOption("help ?",function(){t(this.command.GenerateInfoString().replace(/\n/g,"<br/>"))},"Get help",999,!0)),y.Add(nk.CP.Command("tick t",function(e,n){t(o.OPTION_REQUIRED.replace(/DATA/g,"tick"))},"Handle ticker",!0).AddOption("start s",function(t,e){g.ticker.SetDesiredRate(e.rate),g.ticker.StartAF()},"Start the ticker",0,!0).AddOption("stop",function(t,e){g.ticker.Stop()},"Stop the ticker",0,!0).AddOption("help ?",function(){t(this.command.GenerateInfoString().replace(/\n/g,"<br/>"))},"Get help",999,!0)),y.Add(nk.CP.Command("print",function(e,n){t(e.join(" "))},"Print info",!0).AddOption("gobjects gobjs",function(t,e){},"Print all graphical objects",0,!0).AddOption("help ?",function(){t(this.command.GenerateInfoString().replace(/\n/g,"<br/>"))},"Get help",999,!0)),y.Add(nk.CP.Command("cch1",function(e,n){t(o.OPTION_REQUIRED.replace(/DATA/g,"cch1"))},"Encrypt some text",!0).AddOption("e",function(e,n){str=e.join(" "),t(nk.Utils.Cipher.CCH1(str))},"Encode",0,!0).AddOption("d",function(e,n){str=e.join(" "),t(nk.Utils.Decipher.CCH1(str))},"Decode",0,!0).AddOption("help ?",function(){t(this.command.GenerateInfoString().replace(/\n/g,"<br/>"))},"Get help",999,!0)),y.Add(nk.CP.Command("clear",function(t,e){r.innerHTML="",r.appendChild(d),d.focus()},'Clear the "terminal"',!0).AddOption("help ?",function(){t(this.command.GenerateInfoString().replace(/\n/g,"<br/>"))},"Get help",999,!0)),document.body.removeChild(e)}var e=document.getElementById("buttons"),n=document.createElement("input");n.setAttribute("value","Playground CLI"),n.setAttribute("type","button"),n.addEventListener("click",t),e.appendChild(n)}},function(t,e){t.exports=function(){function t(){var t=document.getElementsByTagName("canvas")[0];t.setAttribute("width",window.innerWidth),t.setAttribute("height",window.innerHeight),t.style.display="initial",t.style.position="absolute",t.style.top="0",t.style.left="0";var n=(t.getContext("2d"),t.width),i=.5*n,o=t.height,a=.5*o;new nk.Stage2D(t,i,a);document.body.removeChild(e)}var e=document.getElementById("buttons"),n=document.createElement("input");n.setAttribute("value","Clock"),n.setAttribute("type","button"),n.addEventListener("click",t),e.appendChild(n)}},function(t,e){t.exports=function(){function t(){function t(){var t,e,n,i,a,h,p=0,m=s.length;for(p;p<m;++p)e=s[p],h=e.data.body.velocity,e.position.AddV(h),e.x+e.path.radius>=o?h.x=-Math.abs(h.x):e.x-e.path.radius<=-o&&(h.x=Math.abs(h.x)),e.y+e.path.radius>=r?h.y=-Math.abs(h.y):e.y-e.path.radius<=-r&&(h.y=Math.abs(h.y));for(m=s.length,p=0;p<m;++p)for(e=s[p],i=e.data.body,t=0;t<m;++t)if(n=s[t],a=n.data.body,n!==e){var g=c(i,a);g&&u(i,a,g)}l.text=Math.round(d.ticker.GetTPS())}var n=document.getElementsByTagName("canvas")[0];n.setAttribute("width",window.innerWidth),n.setAttribute("height",window.innerHeight),n.style.backgroundColor="#FFF",n.style.display="initial",n.style.position="absolute",n.style.top="0",n.style.left="0";var i=(n.getContext("2d"),n.width),o=.5*i,a=n.height,r=.5*a,d=new nk.Stage2D(n,o,r,!0);d.backgroundColor="rgba(255,255,255,0)",d.ticker.StartAF();var l=new nk.Text(0,0,"");l.style.text.fillColor="#000",l.style.text.strokeColor="#000",l.style.text.font="60px Arial";var s=[],c=nk.Math.Collision2D.CirclevsCircle.Relative.Collide,u=nk.Math.Collision2D.CirclevsCircle.Relative.ElasticResponse;d.onProcess.Add(t,window);for(var h=20;h--;)!function(){var t=nk.Utils.RandomInteger(5,60),e=new nk.Path.Circle(0,0,t);e.style.fill.applied=!1,e.style.stroke.color=new nk.Color(nk.Utils.RandomInteger(100,255),0,nk.Utils.RandomInteger(100,255),1).value,e.style.stroke.lineWidth=t/5;var n=new nk.Graphic2D(nk.Utils.RandomInteger(-o,o),nk.Utils.RandomInteger(-r,r),e);n.data.mass=t,n.data.body={relative:n.position,anchor:new nk.Vector2D,shape:n.path,mass:t,velocity:new nk.Vector2D(nk.Utils.RandomInteger(-9,9),nk.Utils.RandomInteger(-9,9))},s.push(n),d.AddChild(n)}();d.AddChild(l),document.body.removeChild(e)}var e=document.getElementById("buttons"),n=document.createElement("input");n.setAttribute("value","ElasticCollision"),n.setAttribute("type","button"),n.addEventListener("click",t),e.appendChild(n)}},function(t,e){t.exports=function(){function t(){function t(t,e){var n=new nk.Path.Polygon2D;nk.Geom.Polygon2D.Construct.Supershape(n,0,0,nk.Utils.RandomInteger(5,30),20,nk.Utils.RandomFloat(0,20),nk.Utils.RandomFloat(0,3),nk.Utils.RandomFloat(0,3),nk.Utils.RandomFloat(0,3)),n.Rotate(nk.Utils.RandomFloat(-nk.Math.PII,nk.Math.PII),.5,.5,!0);var i=new nk.Plaingraphic2D(t,e,n);i.data.vel=new nk.Vector2D(nk.Utils.RandomFloat(-4,4),nk.Utils.RandomFloat(-4,4)),i.data.lifeSpan=600,d.AddChild(i),s.push(i)}var n=document.getElementsByTagName("canvas")[0];n.setAttribute("width",window.innerWidth),n.setAttribute("height",window.innerHeight),n.style.display="initial",n.style.position="absolute",n.style.top="0",n.style.left="0";var i=(n.getContext("2d"),n.width),o=.5*i,a=n.height,r=.5*a,d=new nk.Stage2D(n,o,r);d.clear=!1,d.backgroundColor="rgba(0,0,0,0.1)";var l=new nk.Plaingraphic2D(0,0,new nk.Path.Circle(0,0,200));l.path.style.fill.applied=!1,d.AddChild(l);var s=[],c=!1;d.onProcess.Add(function(){for(var e=0,n=s.length;e<n&&s[e];++e)nk.Math.Attract(s[e].position,l.position,s[e].data.vel,2*l.path.radius,.1),s[e].position.AddV(s[e].data.vel),--s[e].data.lifeSpan||(s[e].Destroy(),s.splice(e,1));if(c)for(var e=2;--e;)t(d.mouse.position.x,d.mouse.position.y)},d),d.mouse.onDown.Add(function(){c=!0}),d.mouse.onUp.Add(function(){c=!1}),document.body.removeChild(e)}var e=document.getElementById("buttons"),n=document.createElement("input");n.setAttribute("value","Field"),n.setAttribute("type","button"),n.addEventListener("click",t),e.appendChild(n)}},function(t,e){t.exports=function(){function t(){function t(e,n){if(!(this instanceof t))return new t(e,n);nk.Graphic2D.call(this,0,0,new nk.Path.Line2D(e,n)),this.path.style.stroke.color=new nk.Color(nk.Utils.RandomInteger(this.w,200),nk.Utils.RandomInteger(this.w,255),nk.Utils.RandomInteger(0,20),1).value,this.path.style.stroke.lineWidth=this.w/12,r.AddChild(this),this.x=nk.Utils.RandomFloat(-o,o),this.y=nk.Utils.RandomFloat(0,a),this.rotation=nk.Utils.RandomInteger(0,nk.Math.PII);var i=this.data.motionManager=new nk.MotionManager(this);i.Create("moveX","x",0,nk.Utils.RandomInteger(100,400),"QuadOut"),i.Create("moveY","y",0,nk.Utils.RandomInteger(100,400),"QuadIn"),i.Create("rotate","rotation",0,nk.Utils.RandomInteger(100,600),"QuadInOut"),i.StartMultiple("moveX moveY rotate"),this.w>12&&this.Grow()}var n=document.getElementsByTagName("canvas")[0];n.setAttribute("width",window.innerWidth),n.setAttribute("height",window.innerHeight),n.style.display="initial",n.style.position="absolute",n.style.top="0",n.style.left="0";var i=(n.getContext("2d"),n.width),o=.5*i,a=n.height,r=new nk.Stage2D(n,o,a);r.clear=!1,r.backgroundColor="rgba(0, 0, 0, 0.2)",r.scale.Set(1,-1),t.prototype=Object.create(nk.Graphic2D.prototype),t.prototype.constructor=t,t.prototype.Grow=function(){var e=this.path.e.SubtractVC(this.path.s),n=e.Copy();e.Rotate(20*nk.Math.RADIAN+nk.Utils.RandomFloat(20*-nk.Math.RADIAN,20*nk.Math.RADIAN)),n.Rotate(20*-nk.Math.RADIAN+nk.Utils.RandomFloat(20*-nk.Math.RADIAN,20*nk.Math.RADIAN)),e.Multiply(.67,.67),n.Multiply(.67,.67),e.AddV(this.path.e),n.AddV(this.path.e),t(this.path.e,e),t(this.path.e,n)},t(new nk.Vector2D(0,0),new nk.Vector2D(0,200));var d=new nk.Timer(1e3);d.onStop.Add(function(){r.ticker.Stop()}),d.Start(),r.onProcess.Add(function(){r.children.forEach(function(t){t.data.motionManager.Process()}),d.Process()}),document.body.removeChild(e)}var e=document.getElementById("buttons"),n=document.createElement("input");n.setAttribute("value","Fractree"),n.setAttribute("type","button"),n.addEventListener("click",t),e.appendChild(n)}},function(t,e){t.exports=function(){function t(){var t=document.getElementsByTagName("canvas")[0];t.setAttribute("width",window.innerWidth),t.setAttribute("height",window.innerHeight),t.style.display="initial",t.style.position="absolute",t.style.top=0,t.style.left=0;var n=(t.getContext("2d"),t.width),i=.5*n,o=t.height,a=.5*o,r=new nk.Stage2D(t),d=new nk.Text(100,100,"Grab and drag"),l=new nk.Graphic2D(350,150,new nk.Path.Circle(0,0,100)),s=new nk.Graphic2D(450,200,new nk.Path.AABB2D(-100,-100,100,100)),c=null;r.AddChild(d),r.AddChild(l),r.AddChild(s);for(var u=10;--u;)r.AddChild(new nk.Graphic2D(i,a,new nk.Path.AABB2D(-100,-100,100,100)));r.mouse.onMove.Add(function(t){null!==c&&(c.x=t.data.position.x,c.y=t.data.position.y)},r),r.mouse.onDown.Add(function(t){for(var e=t.data.position,n=r.children.length;n--;)if(r.children[n].IntersectsPoint(e)){c=r.children[n],t.stopPropagation=!0,c.SendToFront();break}},r),r.mouse.onUp.Add(function(t){c&&(c=null)}),document.body.removeChild(e)}var e=document.getElementById("buttons"),n=document.createElement("input");n.setAttribute("value","GrabnDrag"),n.setAttribute("type","button"),n.addEventListener("click",t),e.appendChild(n)}},function(t,e){t.exports=function(){function t(){var t=document.getElementsByTagName("canvas")[0];t.setAttribute("width",window.innerWidth),t.setAttribute("height",window.innerHeight),t.style.backgroundColor="#000",t.style.display="initial",t.style.position="absolute",t.style.top="0",t.style.left="0";var n=(t.getContext("2d"),t.width),i=t.height,o=new nk.Stage2D(t,0,0),a=new nk.Container2D;o.AddChild(a);var r=0,d=n/30,l=i/30,s=nk.Math.SquareGrid(n,i,d,l,nk.Vector2D);for(console.log(s),r=s.length;r--;)a.AddChild(new nk.Graphic2D(s[r].x,s[r].y,new nk.Path.AABB2D(0,0,d,l)));o.mouse.onDown.Add(function(t){for(var e=t.data.position.DivideVC(a.scale),n=a.children.length;n--;)if(a.children[n].IntersectsPoint(e)){a.children[n].Destroy();break}},o),o.mouse.onWheel.Add(function(t){t.data.native.deltaY<0?a.scale.Add(.1,.1):a.scale.Subtract(.1,.1)}),document.body.removeChild(e)}var e=document.getElementById("buttons"),n=document.createElement("input");n.setAttribute("value","Grid"),n.setAttribute("type","button"),n.addEventListener("click",t),e.appendChild(n)}},function(t,e){t.exports=function(){function t(){var t=document.getElementsByTagName("canvas")[0];t.setAttribute("width",window.innerWidth),t.setAttribute("height",window.innerHeight),t.style.display="initial",t.style.position="absolute",t.style.top="0",t.style.left="0";var n=(t.getContext("2d"),t.width),i=.5*n,o=t.height,a=.5*o,r=new nk.Stage2D(t,i,a),d=new nk.Plaingraphic2D(0,0,new nk.Path.AABB2D(-50,-50,50,50));console.log(d.width,d.height),d.data.pole=new nk.Vector2D(40,0),d.data.radius=15,d.data.dragging=!1,d.data.body={shape:d.path,relative:d.position,anchor:new nk.Vector2D(0,0)};var l=[],s=nk.Math.Collision2D.AABB2DvsAABB2D.Relative.Collide;r.AddChildren(d),r.onProcess.Add(function(){for(var t=0,e=l.length;t<e;++t){var n=s(d.data.body,l[t].data.body);n&&l[t].position.SubtractV(n)}}),r.mouse.onDown.Add(function(t){d.IntersectsPoint(t.data.position)&&(d.data.dragging=!0,t.stopPropagation=!0)}),r.mouse.onMove.Add(function(){d.data.dragging&&d.position.SetV(r.mouse.position)}),r.mouse.onUp.Add(function(){d.data.dragging=!1}),document.body.removeChild(e)}var e=document.getElementById("buttons"),n=document.createElement("input");n.setAttribute("value","Magnet"),n.setAttribute("type","button"),n.addEventListener("click",t),e.appendChild(n)}},function(t,e){t.exports=function(){function t(){var t=document.getElementsByTagName("canvas")[0];t.setAttribute("width",window.innerWidth),t.setAttribute("height",window.innerHeight),t.style.display="initial",t.style.position="absolute",t.style.top="0",t.style.left="0";var n=(t.getContext("2d"),t.width),i=.5*n,o=t.height,a=.5*o,r=new nk.Stage2D(t,i,a),d=new nk.Sprite(0,0);d.anchor.Set(.5),d.scale.Set(0,1),d.AttachTo(r);var l=new nk.MotionManager(d),s=l.Create("x","x"),c=l.Create("y","y");l.Create("sx","scale.x",1,10),l.Create("sy","scale.y",1,10);r.mouse.onUp.Add(function(t){s.running&&s.Stop(),c.running&&c.Stop(),l.ResetMultiple("sx sy"),s.Reconfigure(void 0,t.data.position.x,60),c.Reconfigure(void 0,t.data.position.y,60),l.StartMultiple("x y sx sy")},r),r.onProcess.Add(function(){l.Process()}),document.body.removeChild(e)}var e=document.getElementById("buttons"),n=document.createElement("input");n.setAttribute("value","Motion"),n.setAttribute("type","button"),n.addEventListener("click",t),e.appendChild(n)}},function(t,e){t.exports=function(){function t(){function t(){n({x:-d,y:d},{x:-s,y:s},"staticStar",r/l*500,u,c,.01),c.onProcess.Add(function(){for(var t,e=0,n=u.length;e<n;++e)t=u[e],t.position.AddV(t.data.velocity),t.data.velocity.Rotate(nk.Math.DTR(t.data.torque))},c)}function n(t,e,n,i,o,a,r){for(var d=0;d<i;++d){var l=nk.Utils.RandomInteger(t.x,t.y),s=nk.Utils.RandomInteger(e.x,e.y),c=new nk.Sprite(l,s,h.Get(n));c.anchor.Set(.5),c.scale.Set(r),c.rotation=nk.Utils.RandomFloat(0,nk.Math.PII),c.data.velocity=new nk.Vector2D(l/500,s/500),c.data.torque=(l+s)/500*nk.Utils.RandomInteger(-1,1),o.push(c),a.AddChild(c)}console.log(d)}function i(){var t=new nk.Path.Polygon2D;t.style.fill.color="#FFF",t.style.stroke.color="#000",t.style.stroke.lineWidth=3,nk.Geom.Polygon2D.Construct.Butterfly(t,0,0,4e3,50);var e=t.aabb.br.AbsoluteCopy().SubtractVC(t.aabb.tl.AbsoluteCopy());return new nk.Graphic2D(.5*t.aabb.w-.5*e.x,.5*t.aabb.h-.5*e.y,t)}function o(){var t=new nk.Path.Polygon2D;t.style.fill.color="#FFF",t.style.stroke.color="#000",t.style.stroke.lineWidth=3,nk.Geom.Polygon2D.Construct.Star(t,0,0,800,400,5);var e=t.aabb.br.AbsoluteCopy().SubtractVC(t.aabb.tl.AbsoluteCopy());return new nk.Graphic2D(.5*t.aabb.w-.5*e.x,.5*t.aabb.h-.5*e.y,t)}var a=document.getElementsByTagName("canvas")[0];a.setAttribute("width",window.innerWidth),a.setAttribute("height",window.innerHeight),a.style.display="initial",a.style.position="absolute",a.style.top="0",a.style.left="0";var r=(a.getContext("2d"),a.width),d=.5*r,l=a.height,s=.5*l,c=new nk.Stage2D(a,d,s,!0);c.ticker.StartAF();var u=[],h=new nk.Load.TextureLoader([{id:"butterfly",src:nk.Utils.GenerateSimpleBase64Png(i)},{id:"staticStar",src:nk.Utils.GenerateSimpleBase64Png(o)}]);h.onComplete.Add(function(){t()}),document.body.removeChild(e)}var e=document.getElementById("buttons"),n=document.createElement("input");n.setAttribute("value","Nightsky"),n.setAttribute("type","button"),n.addEventListener("click",t),e.appendChild(n)}},function(t,e){t.exports=function(){function t(){var t=document.getElementsByTagName("canvas")[0];t.setAttribute("width",window.innerWidth),t.setAttribute("height",window.innerHeight),t.style.display="initial",t.style.position="absolute",t.style.top="0",t.style.left="0";var n=(t.getContext("2d"),t.width),i=.5*n,o=t.height,a=.5*o,r=new nk.Stage2D(t,i,a);r.clear=!1,r.fill=!1,imageCache=new nk.Load.TextureLoader([{id:"particle",src:nk.Utils.GenerateSimpleBase64Png(function(){var t=new nk.Path.Circle(20,20,20);return t.style.fill.color="rgba(0, 0, 0, 0.01)",t.style.stroke.color="rgba(255, 200, 50, 0.1)",new nk.Graphic2D(0,0,t)})}]),imageCache.onComplete.Add(function(){for(var t=400;t--;){r.AddChild(new nk.Plainsprite(0,0,imageCache.Get("particle"))).data.velocity=new nk.Vector2D(nk.Utils.RandomFloat(-2,2),nk.Utils.RandomFloat(-2,2))}var e=new nk.Timer;e.Start(400),e.onStop.Add(function(){r.ticker.Stop()}),r.onProcess.Add(function(){for(var t,n=this.children.length;n--;)t=this.children[n],t.position.AddV(t.data.velocity),t.data.velocity.Rotate(nk.Math.RADIAN*nk.Utils.RandomFloat(-12,12)),t.scale.Set((400-e.time)/400);e.Process()},r)}),document.body.removeChild(e)}var e=document.getElementById("buttons"),n=document.createElement("input");n.setAttribute("value","Particles"),n.setAttribute("type","button"),n.addEventListener("click",t),e.appendChild(n)}},function(t,e){t.exports=function(){function t(){function t(){var t=new nk.Path.Polygon2D;t.style.stroke.lineWidth=3,nk.Geom.Polygon2D.Construct.Cyclic(t,0,0,30,12);var e=t.aabb.br.AbsoluteCopy().SubtractVC(t.aabb.tl.AbsoluteCopy());return new nk.Graphic2D(.5*t.aabb.w-.5*e.x,.5*t.aabb.h-.5*e.y,t)}function n(){o.setTransform(1,0,0,1,0,0),o.fillStyle="rgba(0, 0, 0, 1)",o.fillRect(0,0,a,d),s.Draw(o),y.Process()}var i=document.getElementsByTagName("canvas")[0];i.setAttribute("width",window.innerWidth),i.setAttribute("height",window.innerHeight),i.style.display="initial",i.style.position="absolute",i.style.top=0,i.style.left=0;var o=i.getContext("2d"),a=i.width,r=.5*a,d=i.height,l=.5*d,s=new nk.Container2D(r,l),c=null,u=new nk.Ticker(n,1e3,!0);u.Start();var h=20,p=0,m=35,g=[],y=new nk.Timer;y.onStop.Add(function(){var t=m;for(m=m<3?3:m--;t--;){var e=new nk.Sprite(Math.random()*a-r,Math.random()*d-l,c);e.transformAutomaticUpdate=!1,s.AddChild(e)}if(u.GetTPS()>40||p++<20)this.Start(1);else{var n=s.children.length;console.log(n,u.GetTPS()),s.Dump(),p=0,g.push(n),h--,h>0?y.Start(120):(g.sort(function(t,e){return t-e}),console.log(g,"\nMIN: "+g[0],"MED: "+g[Math.round(g.length/2)],"MAX: "+g[g.length-1]))}},y);var v=new nk.Load.TextureLoader([{id:"tex",src:nk.Utils.GenerateSimpleBase64Png(t)}]);v.onComplete.Add(function(){c=v.Get("tex"),y.Start(120)}),document.body.removeChild(e)}var e=document.getElementById("buttons"),n=document.createElement("input");n.setAttribute("value","Performance"),n.setAttribute("type","button"),n.addEventListener("click",t),e.appendChild(n)}},function(t,e){t.exports=function(){function t(){function t(){i(),o(),c.ticker.SetDesiredRate(60),c.ticker.Start()}function n(){(p.position.x>d||p.position.x<-d)&&(p.position.x=0),(p.position.y>s||p.position.y<-s)&&(p.position.y=0),p.data.force.velocity.y>0?(p.data.state.falling=!0,p.data.state.onGround=!1,p.data.state.ascending=!1):p.data.force.velocity.y<0&&(p.data.state.falling=!1,p.data.state.onGround=!1,p.data.state.ascending=!0),p.position.AddV(p.data.force.velocity),p.data.force.velocity.AddV(p.data.force.gravity),!0===p.data.move.left?(p.position.SubtractV(p.data.force.move),p.data.state.moving=!0):!0===p.data.move.right?(p.position.AddV(p.data.force.move),p.data.state.moving=!0):p.data.state.moving=!1,!0===p.data.move.jump&&!0===p.data.state.onGround&&p.data.force.velocity.AddV(p.data.force.jump);for(var t=0,e=h.length;t<e;++t){var n=nk.Math.Collision2D.AABB2DvsAABB2D.Relative.Collide(p.data.collisionData,h[t].data.collisionData);n&&(n.y<0&&p.data.force.velocity.y>0?(p.data.force.velocity.y=0,p.data.state.onGround=!0,p.data.state.falling=!1,p.data.state.ascending=!1):n.y>0&&p.data.force.velocity.y<0&&(p.data.force.velocity.y=0),p.position.AddV(n))}}function i(){p=new nk.Sprite(0,0,u.Get("character")),p.anchor.Set(.5),p.data.move={left:!1,right:!1,jump:!1},p.data.force={move:new nk.Vector2D(2,0),jump:new nk.Vector2D(0,-10),gravity:new nk.Vector2D(0,.1982),velocity:new nk.Vector2D},p.data.state={onGround:!1,moving:!1,falling:!1,ascending:!1},p.data.collisionData={shape:p.shape,relative:p.position,anchor:p.anchor},c.AddChild(p),c.onProcess.Add(n,c),c.keyboard.onDown.Add(function(t){"a"===t.data.key?(p.data.move.left=!0,p.data.move.right=!1):"d"===t.data.key&&(p.data.move.right=!0,p.data.move.false=!1),"w"===t.data.key&&(p.data.move.jump=!0)}),c.keyboard.onUp.Add(function(t){"a"===t.data.key?p.data.move.left=!1:"d"===t.data.key&&(p.data.move.right=!1),"w"===t.data.key&&(p.data.move.jump=!1)})}function o(){for(var t=100;t--;){var e=new nk.Sprite(nk.Utils.RandomInteger(-d,d),nk.Utils.RandomInteger(-s,s),u.Get("platform"));e.data.collisionData={shape:e.shape,relative:e.position,anchor:e.anchor},h.push(e),c.AddChild(e)}}var a=document.getElementsByTagName("canvas")[0];a.setAttribute("width",window.innerWidth),a.setAttribute("height",window.innerHeight),a.style.display="initial",a.style.position="absolute",a.style.top="0",a.style.left="0";var r=(a.getContext("2d"),a.width),d=.5*r,l=a.height,s=.5*l,c=new nk.Stage2D(a,d,s,!0),u=new nk.Load.TextureLoader([{id:"character",src:nk.Utils.GenerateSimpleBase64Png(function(){var t=new nk.Path.AABB2D(0,0,20,20);return t.style.fill.applied=!1,t.style.stroke.color="#0F0",t.style.stroke.lineWidth=3,new nk.Graphic2D(0,0,t)})},{id:"platform",src:nk.Utils.GenerateSimpleBase64Png(function(){var t=new nk.Path.AABB2D(0,0,100,20);return t.style.fill.applied=!1,t.style.stroke.lineWidth=5,new nk.Graphic2D(0,0,t)})}]);u.onComplete.Add(function(){t()});var h=[],p=null;document.body.removeChild(e)}var e=document.getElementById("buttons"),n=document.createElement("input");n.setAttribute("value","Platformer"),n.setAttribute("type","button"),n.addEventListener("click",t),e.appendChild(n)}},function(t,e){t.exports=function(){function t(){var t=document.getElementsByTagName("canvas")[0];t.setAttribute("width",window.innerWidth),t.setAttribute("height",window.innerHeight),t.style.display="initial",t.style.position="absolute",t.style.top="0",t.style.left="0";var n=(t.getContext("2d"),t.width),i=.5*n,o=t.height,a=.5*o,r=new nk.Stage2D(t,i,a),d=new nk.Vector2D(400,-400),l=new nk.Vector2D(2e3,0),s=d.ProjectOnto(l);r.AddChild(new nk.Plaingraphic2D(0,0,new nk.Path.Line2D(0,0,d.x,d.y))),r.AddChild(new nk.Plaingraphic2D(0,0,new nk.Path.Line2D(0,0,l.x,l.y))),r.AddChild(new nk.Plaingraphic2D(0,0,new nk.Path.Line2D(0,0,s.x,s.y))).path.style.stroke.lineWidth=10,document.body.removeChild(e)}var e=document.getElementById("buttons"),n=document.createElement("input");n.setAttribute("value","Playground"),n.setAttribute("type","button"),n.addEventListener("click",t),e.appendChild(n)}},function(t,e){t.exports=function(){function t(){function t(){var t=c.Retrieve(),e=nk.Utils.RandomFloat(.5,1);t.position.Set(nk.Utils.RandomFloat(-o,o),-r-t.height),t.scale.Set(e),t.data.mass=e,t.data.velocity.Set(0),t.data.lifespan=240,t.AttachTo(d)}var n=document.getElementsByTagName("canvas")[0];n.setAttribute("width",window.innerWidth),n.setAttribute("height",window.innerHeight),n.style.display="initial",n.style.position="absolute",n.style.top="0",n.style.left="0";var i=(n.getContext("2d"),n.width),o=.5*i,a=n.height,r=.5*a,d=new nk.Stage2D(n,o,r);d.clear=!1,d.fill=!0,d.backgroundColor="rgba(0,0,0,0.3)";var l=new nk.Vector2D(0,.0982),s=new nk.Vector2D,c=new nk.Pool(nk.Plainsprite);imageCache=new nk.Load.TextureLoader([{id:"raindrop",src:"./images/raindrop.png"}]),imageCache.onComplete.Add(function(){c.Flood(function(t){t.SetTexture(imageCache.Get("raindrop")),t.data.velocity=new nk.Vector2D},1e3),d.onProcess.Add(function(){for(var e,n=this.children.length;n--;)e=this.children[n],e.position.AddV(e.data.velocity),e.data.velocity.AddV(l),e.data.velocity.Add(s.x/e.data.mass,s.y/e.data.mass),e.data.lifespan--||e.Detach(c);s.Set(nk.Utils.RandomFloat(-.1,.1),0),t(),t(),t(),t()},d)}),document.body.removeChild(e)}var e=document.getElementById("buttons"),n=document.createElement("input");n.setAttribute("value","Rain"),n.setAttribute("type","button"),n.addEventListener("click",t),e.appendChild(n)}},function(t,e){t.exports=function(){function t(){var t=document.getElementsByTagName("canvas")[0];t.setAttribute("width",window.innerWidth),t.setAttribute("height",window.innerHeight),t.style.display="initial",t.style.position="absolute",t.style.top="0",t.style.left="0";var n=(t.getContext("2d"),t.width),i=.5*n,o=t.height,a=.5*o,r=new nk.Stage2D(t,i,a,!0);r.ticker.StartAF();var d=null,l=null,s=null,c=null,u=null,h=new nk.Load.TextureLoader;h.onComplete.Add(function(t){console.log(t.target,t.data,"complete"),d=new nk.Sprite(0,0,h.Get("4dots")),d.anchor.Set(.5),l=new nk.Sprite(100,50,h.Get("smudge")),l.anchor.Set(.5),s=new nk.Sprite(-100,100,h.Get("gobj")),s.anchor.Set(.5),s.clip.tl.Set(0,64),c=new nk.Sprite(100,100),c.anchor.Set(.5),u=new nk.Plainsprite(200,0),u.anchor.Set(.5),r.AddChildren(d,l,s,c,u)}),h.onTextureLoaded.Add(function(t){console.log(t.target,t.data,"loaded")}),h.Load([{id:"smudge",src:"./images/smudge.png"}]),h.Load([{id:"4dots",src:"./images/4dots.png"},{id:"gobj",src:"./images/glass-of-blueberryjuice.png"}]);var p=null;r.mouse.onMove.Add(function(t){null!==p&&(p.x=t.data.position.x,p.y=t.data.position.y)},r),r.mouse.onDown.Add(function(t){for(var e=t.data.position,n=r.children.length;n--;)if(r.children[n].IntersectsPoint(e)){p=r.children[n],t.stopPropagation=!0,p.SendToFront();break}},r),r.mouse.onUp.Add(function(t){p&&(p=null)}),document.body.removeChild(e)}var e=document.getElementById("buttons"),n=document.createElement("input");n.setAttribute("value","Sprite"),n.setAttribute("type","button"),n.addEventListener("click",t),e.appendChild(n)}},function(t,e){t.exports=function(){function t(){function t(){c.style.fill.color=s.value,s.IncreaseChannel(0,1);var t=nk.Math.DTR(g),e=nk.Math.DTR(v);u.x+=Math.cos(t)*y,u.y+=Math.sin(t)*y,h.x-=Math.cos(t)*y,h.y-=Math.sin(t)*y,p.x+=Math.cos(e)*k,p.y+=Math.sin(e)*k,m.x-=Math.cos(e)*k,m.y-=Math.sin(e)*k,u.rotation=-t,h.rotation=-t,p.rotation=-e,m.rotation=-e,g+=1,v-=1,y+=.01,k+=.01,y=nk.Utils.InverseClamp(y,-5,5),k=nk.Utils.InverseClamp(k,-5,5),g=nk.Utils.InverseClamp(g,0,359),v=nk.Utils.InverseClamp(v,-359,0),i.setTransform(1,0,0,1,0,0),i.fillStyle="rgba(255, 255, 255, 0.001)",i.fillRect(0,0,o,r),l.Draw(i)}var n=document.getElementsByTagName("canvas")[0];n.setAttribute("width",window.innerWidth),n.setAttribute("height",window.innerHeight),n.style.display="initial",n.style.position="absolute",n.style.top=0,n.style.left=0;var i=n.getContext("2d"),o=n.width,a=.5*o,r=n.height,d=.5*r,l=new nk.Container2D(a,d),s=new nk.Color(255,0,0);s.ConvertToHSLA();var c=new nk.Path.AABB2D(-50,-50,50,50);c.style.shadow.applied=!0;var u=new nk.Graphic2D(0,0,c),h=new nk.Graphic2D(0,0,c),p=new nk.Graphic2D(0,0,c),m=new nk.Graphic2D(0,0,c),g=0,y=0,v=0,k=0,f=new nk.Path.Line2D(-100,0,100,0);f.style.shadow.applied=!0,f.style.stroke.color="#000";var w=new nk.Graphic2D(0,0,f),A=new nk.Graphic2D(0,0,f),b=new nk.Graphic2D(0,0,f),C=new nk.Graphic2D(0,0,f);l.AddChildren(u,h,p,m),u.AddChild(w),h.AddChild(A),p.AddChild(b),m.AddChild(C),setInterval(t,1),document.body.removeChild(e)}var e=document.getElementById("buttons"),n=document.createElement("input");n.setAttribute("value","The Mask"),n.setAttribute("type","button"),n.addEventListener("click",t),e.appendChild(n)}},,,,,,,,,function(t,e,n){t.exports=n(1)}]);