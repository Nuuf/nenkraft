/**
* @package     Nenkraft
* @author      Gustav 'Nuuf' Åberg <gustavrein@gmail.com>
* @version     0.5.5 (Alpha)
* @copyright   (C) 2017-2018 Gustav 'Nuuf' Åberg
* @license     {@link https://github.com/Nuuf/nenkraft/blob/master/LICENSE}
*/
!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.nk=e():t.nk=e()}("undefined"!=typeof self?self:this,function(){return function(t){function e(n){if(o[n])return o[n].exports;var r=o[n]={i:n,l:!1,exports:{}};return t[n].call(r.exports,r,r.exports,e),r.l=!0,r.exports}var o={};return e.m=t,e.c=o,e.d=function(t,o,n){e.o(t,o)||Object.defineProperty(t,o,{configurable:!1,enumerable:!0,get:n})},e.n=function(t){var o=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(o,"a",o),o},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="./",e(e.s=81)}([function(t,e){var o;o=function(){return this}();try{o=o||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(o=window)}t.exports=o},function(t,e){t.exports=function(){Array.prototype.indexPop=function(t){var e=this.length-1;if(e>1&&t<=e&&t>=0){var o=this[e];return this[e]=this[t],this[t]=o,this.pop()}return this.pop()},Array.prototype.indexShift=function(t){if(this.length>1&&t<=this.length-1&&t>=0){var e=this[0];return this[0]=this[t],this[t]=e,this.shift()}return this.shift()},Array.prototype.popSplice=function(t){var e=this.length-1;if(!(e<1)){for(var o=this[t];t<e;)this[t]=this[t+1],t++;return this.pop(),o}},Array.prototype.shiftSplice=function(t){if(!(this.length<1)){for(var e=this[t];t>0;)this[t]=this[t-1],t--;return this.shift(),e}},Array.prototype.fickleSplice=function(t){return t>.5*this.length|0?this.popSplice(t):this.shiftSplice(t)}}},function(t,e){t.exports=function(t){"use strict";t.Math.PII=2*Math.PI,t.Math.DEGREES_TO_RADIANS=Math.PI/180,t.Math.RADIANS_TO_DEGREES=180/Math.PI,t.Math.RADIAN=t.Math.DEGREES_TO_RADIANS,t.Math.DegreesToRadians=function(e){return e*t.Math.DEGREES_TO_RADIANS},t.Math.DTR=t.Math.DegreesToRadians,t.Math.RadiansToDegrees=function(e){return e*t.Math.RADIANS_TO_DEGREES},t.Math.RTD=t.Math.RadiansToDegrees,t.Math.PrecisionRound=function(t,e){var o=Math.pow(10,e);return Math.round(o*t)/o},t.Math.PR=t.Math.PrecisionRound,t.Math.Spread=function(t,e,o,n){return t-o*(e-1)*.5+n*o},t.Math.AttractRepel=function(t,e,o,n,r){var i=e.SubtractVC(t);if(i.GetMagnitudeSquared()<n*n){var s=i.GetAngle();o.Add(Math.cos(s)*r,Math.sin(s)*r)}},t.Math.LineLineIntersection=function(t,e,o,n){var r=e.SubtractVC(t),i=n.SubtractVC(o),s=-i.x*r.y+r.x*i.y,a=t.x-o.x,h=t.y-o.y,p=(-r.y*a+r.x*h)/s,u=(i.x*h-i.y*a)/s;return p>=0&&p<=1&&u>=0&&u<=1&&(r.Set(t.x+u*r.x,t.y+u*r.y),r)},t.Math.ClosestPointOnLine=function(t,e,o){var n=e.SubtractVC(t),r=((o.x-t.x)*n.x+(o.y-t.y)*n.y)/n.GetMagnitudeSquared();return r<0?t:r>1?e:(n.Set(t.x+r*n.x,t.y+r*n.y),n)},t.Math.LikeASquareGrid=function(t,e,o,n){for(var r=0,i=t.length,s=e/o|0;r<i;++r)t[r].Set(r%s*o,(r/s|0)*n)},t.Math.SquareGrid=function(t,e,o,n,r){for(var i=[],s=0,a=t/o|0,h=e/n|0,p=a*h;s<p;++s)i.push(new r(s%a*o,(s/a|0)*n));return i},t.Math.TriRectArray=function(t,e,o,n,r){return null!=r?(r[0]=t,r[1]=e,r[2]=t+o,r[3]=e,r[4]=t,r[5]=e+n,r[6]=t,r[7]=e+n,r[8]=t+o,r[9]=e,r[10]=t+o,r[11]=e+n,r):[t,e,t+o,e,t,e+n,t,e+n,t+o,e,t+o,e+n]},Object.defineProperty(t.Math,"PII",{writable:!1}),Object.defineProperty(t.Math,"DEGREES_TO_RADIANS",{writable:!1}),Object.defineProperty(t.Math,"RADIANS_TO_DEGREES",{writable:!1}),Object.defineProperty(t.Math,"RADIAN",{writable:!1})}},function(t,e,o){(function(e){t.exports=function(t){"use strict";function o(t,e,f,y){if(void 0==y||"function"!=typeof t.Assert)switch(e){case o.IS:return void n(t,f,e);case o.IS_NOT:return void r(t,f,e);case o.IS_SAME_TYPE:return void i(t,f,e);case o.IS_NOT_SAME_TYPE:return void s(t,f,e);case o.IS_INSTANCE_OF:return void a(t,f,e);case o.IS_NOT_INSTANCE_OF:return void h(t,f,e);case o.IS_LESS_THAN:return void p(t,f,e);case o.IS_GREATER_THAN:return void u(t,f,e);case o.IS_LESS_THAN_OR_EQUAL:return void c(t,f,e);case o.IS_GREATER_THAN_OR_EQUAL:return void l(t,f,e);default:throw new Error("No comparison: "+e)}else t.Assert(e,f)}function n(t,e,o){var n=!1;t!==e&&(n=!0),f(n,t,e,o)}function r(t,e,o){var n=!1;t===e&&(n=!0),f(n,t,e,o)}function i(t,e,o){var n=!1;Array.isArray(t)||Array.isArray(e)?!Array.isArray(t)!=!Array.isArray(e)&&(n=!0):null===t||null===e?t!==e&&(n=!0):typeof t!=typeof e&&(n=!0),f(n,t,e,o)}function s(t,e,o){var n=!1;Array.isArray(t)||Array.isArray(e)?Array.isArray(t)&&Array.isArray(e)&&(n=!0):null===t||null===e?e===t&&(n=!0):typeof t==typeof e&&(n=!0),f(n,t,e,o)}function a(t,e,o){var n=!1;t instanceof e||(n=!0),f(n,t,e.name,o)}function h(t,e,o){var n=!1;t instanceof e&&(n=!0),f(n,t,e.name,o)}function p(t,e,o){var n=!1;t>=e&&(n=!0),f(n,t,e,o)}function u(t,e,o){var n=!1;t<=e&&(n=!0),f(n,t,e,o)}function c(t,e,o){var n=!1;t>e&&(n=!0),f(n,t,e,o)}function l(t,e,o){var n=!1;t<e&&(n=!0),f(n,t,e,o)}function f(t,e,n,r){if(t)throw y(e,n,r),new Error("Assertion failed: "+r);o.LOG&&window&&d(e,n,r)}function y(t,e,n){switch(n){case o.IS:n=o.IS_NOT;break;case o.IS_NOT:n=o.IS;break;case o.IS_SAME_TYPE:n=o.IS_NOT_SAME_TYPE;break;case o.IS_NOT_SAME_TYPE:n=o.IS_SAME_TYPE;break;case o.IS_INSTANCE_OF:n=o.IS_NOT_INSTANCE_OF;break;case o.IS_NOT_INSTANCE_OF:n=o.IS_INSTANCE_OF;break;case o.IS_LESS_THAN:n=o.IS_GREATER_THAN_OR_EQUAL;break;case o.IS_GREATER_THAN:n=o.IS_LESS_THAN_OR_EQUAL;break;case o.IS_LESS_THAN_OR_EQUAL:n=o.IS_GREATER_THAN;break;case o.IS_GREATER_THAN_OR_EQUAL:n=o.IS_LESS_THAN;break;default:throw new Error("Unexpected error")}console.error(t,n,e)}function d(t,e,o){console.log("%c<<||-?START?-||>>","background-color: black; color: #0FF; padding: 0px 25px;"),console.log("%cAssertion success: ","background-color: #333; color: #0F0; padding: 0px 25px;"),console.log(t),console.log(o),console.log(e),console.log("%c>>||-?END?-||<<","background-color: black; color: #FF0; padding: 0px 25px;")}o.IS="IS",o.IS_NOT="IS NOT",o.IS_SAME_TYPE="IS SAME TYPE",o.IS_NOT_SAME_TYPE="IS NOT SAME TYPE",o.IS_INSTANCE_OF="IS INSTANCE OF",o.IS_NOT_INSTANCE_OF="IS NOT INSTANCE OF",o.IS_LESS_THAN="IS LESS THAN",o.IS_GREATER_THAN="IS GREATER THAN",o.IS_LESS_THAN_OR_EQUAL="IS LESS THAN OR EQUAL",o.IS_GREATER_THAN_OR_EQUAL="IS GREATER THAN OR EQUAL",o.Assign=function(t){if(window&&!t?t=window:e&&t&&(t=e),!t)throw new Error("No global namespace");t.IS=o.IS,t.IS_NOT=o.IS_NOT,t.IS_SAME_TYPE=o.IS_SAME_TYPE,t.IS_NOT_SAME_TYPE=o.IS_NOT_SAME_TYPE,t.IS_INSTANCE_OF=o.IS_INSTANCE_OF,t.IS_NOT_INSTANCE_OF=o.IS_NOT_INSTANCE_OF,t.IS_LESS_THAN=o.IS_LESS_THAN,t.IS_GREATER_THAN=o.IS_GREATER_THAN,t.IS_LESS_THAN_OR_EQUAL=o.IS_LESS_THAN_OR_EQUAL,t.IS_GREATER_THAN_OR_EQUAL=o.IS_GREATER_THAN_OR_EQUAL},o.LOG=!1,t.Utils.Assert=o,t.Assert=o}}).call(e,o(0))},function(t,e){t.exports=function(t){"use strict";function e(t){if(!(this instanceof e))return new e(t);this.class=t,this.objects=[]}e.prototype=Object.create(null),e.prototype.constructor=e,e.prototype.class=null,e.prototype.objects=null,e.prototype.floodFunction=null,e.prototype.floodAmount=100,e.prototype.context=null,e.prototype.Store=function(t){this.objects.push(t)},e.prototype.Retrieve=function(){return 0===this.objects.length&&this.Flood(),this.objects.pop()},e.prototype.Flood=function(t,e,o){t&&(this.floodFunction=t),e&&(this.floodAmount=e),o&&(this.context=o);for(var n=0;n<this.floodAmount;++n)if(null!=this.class){var r=new this.class;this.Store(r),this.floodFunction.call(this.context,r)}else this.Store(this.floodFunction.call(this.context))},e.prototype.Flush=function(){this.objects.length=0},e.prototype.Clean=function(){var t=this.objects.length;this.Flush(),this.Flood(void 0,t)},t.Utils.Pool=e,t.Pool=e}},function(t,e){t.exports=function(t){"use strict";function e(t){if(!(this instanceof e))return new e(t);null!=t&&(this.type=t),this.items=[]}var o=t.Utils.Assert,n=Object.create(null);e.prototype=Object.create(null),e.prototype.constructor=e,e.prototype.type=null,e.prototype.Store=function(t){var e=!1;return null==t?(console.warn("Item is null. Cannot store null item."),null):(null!=t.id&&""!==t.id?e=!this.Contains(t,t.id):t.data&&null!=t.data.id&&""!==t.data.id&&(e=!this.Contains(t,t.data.id)),!1===e?(console.warn("Item is not valid. Check the item id. The item has not been stored"),!1):(this.items.push(t),!0))},e.prototype.StoreSafe=function(t){return null!=this.type&&o(t,o.IS_INSTANCE_OF,this.type),o(t,o.IS_SAME_TYPE,n),t.id?(o(t.id,o.IS_SAME_TYPE,""),o(t.id,o.IS_NOT,"")):(o(t.data,o.IS_SAME_TYPE,n),o(t.data.id,o.IS_SAME_TYPE,""),o(t.data.id,o.IS_NOT,"")),this.Store(t)},e.prototype.Get=function(t){for(var e=0,o=this.items,n=o.length;e<n;++e)if(o[e]===t)return t;return null},e.prototype.GetById=function(t){for(var e=0,o=this.items,n=o.length,r=o[e];e<n;r=o[++e])if(null!=r&&(r.id===t||null!=r.data&&r.data.id===t))return r;return null},e.prototype.PerformOnAll=function(t,e,o){for(var n=0,r=this.items,i=r.length,s=r[n];n<i;s=r[++n])null!=s&&s[t]&&s[t].apply(o||s,e);return null},e.prototype.Contains=function(t,e){for(var o=0,n=this.items,r=n.length,i=n[o];o<r;i=n[++o])if(null!=i){if(i===t)return!0;if(i.id===e)return!0;if(null!=i.data&&i.data.id===e)return!0}return!1},t.Utils.Cache=e}},function(t,e){t.exports=function(t){"use strict";var e=Math.random,o=null,n=null,r=null,i=t.Utils.RandomInteger=function(t,o){return e()*(o-t+1)+t|0};t.Utils.RandomFloat=function(t,o){return e()*(o-t)+t};var s=t.Utils.IsInteger=function(t){return Number(t)===t&&t%1==0};t.Utils.IsFloat=function(t){return Number(t)===t&&t%1!=0},t.Utils.Clamp=function(t,e,o){return t<e?e:t>o?o:t},t.Utils.InverseClamp=function(t,e,o){return t<e?o:t>o?e:t},t.Utils.ThisOrThat=function(t,e){return 1===i(1,2)?t:e},t.Utils.IntegerNotation=function(t,e,o){var n=t%e,r=t/e;return Math.ceil(0===n?r+1:r)+o+(1+n)},t.Utils.UUID=function(e,o,n,r){e=null==e?32:e,o=null==o?4:o,n=null==n?0:n,r=null==r?"-":r;for(var a,h,p="",u=0,c=e/o|0,l=t.Utils.CharacterSets[n];u<e;++u)a=u/c,0!==a&&s(a)?p+=r:(h=i(1,l.length-1),p+=l.charAt(h));return p},t.Utils.CharacterSets=["0123456789ABCDEFGHJIKLMNOPQRSTUWVXYZabcdefghijklmnopqrstuwvxyz","0123456789ABCDEFGHJIKLMNOPQRSTUWVXYZabcdefghijklmnopqrstuwvxyz!?#$%@&","0123456789","ABCDEFGHJIKLMNOPQRSTUWVXYZabcdefghijklmnopqrstuwvxyz","ABCDEFGHJIKLMNOPQRSTUWVXYZ","abcdefghijklmnopqrstuwvxyz","0123456789abcdefghijklmnopqrstuwvxyz","0123456789ABCDEFGHJIKLMNOPQRSTUWVXYZ"],t.Utils.ApplyProperties=function(t,e){if(void 0!==e){var o;for(o in e)void 0!==t[o]&&(t[o]=e[o])}};var a=t.Utils.Nested=function(t,e,o,n,r,i){"string"==typeof e&&(i=null==i?".":i,e=e.split(i));var s;if(e.length>1){if(s=e.shift(),void 0!==t[s])return a(t[s],e,o,n,r,i)}else{if(s=e.shift(),void 0!==t[s])return!0===n?void(t[s]=r):!0===o?t:t[s];if(!0===n)return void(t[s]=r)}};t.Utils.ArrayGetRandom=function(t,o){for(var n=[],r={},i=t.length,s=0,a=o;s<a;++s){var h=e()*i|0;void 0===r[h]?(r[h]=null,n.push(t[h])):s--}return n},t.Utils.ArrayShuffle=function(t){for(var o,n,r=t.length-1;r>=0;--r)n=e()*r|0,o=t[r],t[r]=t[n],t[n]=o},t.Utils.Cipher={},t.Utils.Decipher={},t.Utils.Cipher.CCH1=function(t,e){var o=[];e=void 0===e?1:e;for(var n,r,s=0,a=t.split(""),h=a.length;s<h;++s)n=a[s],n=(n.charCodeAt(0)+e).toString(2),r=i(1,9),o.push(r+"x"+n.replace(/1/g,r));return o.join(" ")},t.Utils.Decipher.CCH1=function(t,e){var o=[];e=void 0===e?1:e;for(var n,r=0,i=t.split(" "),s=i.length;r<s;++r)n=i[r],n=n.slice(2-n.length),o.push(String.fromCharCode(parseInt(n.replace(/[2-9]/g,"1"),2)-e));return o.join("")},t.Utils.GenerateSimpleBase64Png=function(t){var e=t();return null==o&&(o=document.createElement("canvas"),n=o.getContext("2d")),n.clearRect(0,0,o.width,o.height),o.width=e.w,o.height=e.h,n.setTransform(1,0,0,1,0,0),e.Draw(n),o.toDataURL("image/png")},t.Utils.ImageFromDataURL=function(t,e,o){var n=new Image;return n.src=t,n.width=e,n.height=o,n},t.Utils.Base16ToBase10=function(t){return parseInt(t,16)},t.Utils.Base2ToBase10=function(t){return parseInt(t,2)},t.Utils.IsObjectEmpty=function(t){for(var e in t)if(t.hasOwnProperty(e))return!1;return JSON.stringify(t)===JSON.stringify({})},t.Utils.ParsedXMLToJSON=function(e,o){var n,r,i,s,a,h,p,u={},c=e.childNodes;if(1===e.nodeType){if(i=e.attributes,(r=i.length)>0)for(u.attributes={},n=0,s=i.item(n);n<r;s=i.item(++n))u.attributes[s.nodeName]=s.nodeValue}else 3===e.nodeType&&(/^\s*$/g.exec(e.nodeValue)||(u=e.nodeValue,!0===o&&(u=u.replace(/^\s+|\s+&|\n/gim,""))));if(null!=c)for(r=c.length,n=0,a=c.item(n);n<r;a=c.item(++n))void 0===u[a.nodeName]?u[a.nodeName]=t.Utils.ParsedXMLToJSON(a,o):(void 0===u[a.nodeName].push&&(p=u[a.nodeName],u[a.nodeName]=[],t.Utils.IsObjectEmpty(p)||u[a.nodeName].push(p)),h=t.Utils.ParsedXMLToJSON(a,o),t.Utils.IsObjectEmpty(h)||u[a.nodeName].push(h));return u["#text"]&&0===u["#text"].length&&delete u["#text"],u},t.Utils.XMLToJSON=function(e,o){return null==r&&(r=new DOMParser),t.Utils.ParsedXMLToJSON(r.parseFromString(e,"text/xml"),o)};var h=t.Utils.DeepClone=function(t){var e=null,o=!1;if("function"==typeof t)throw new TypeError("Object was of type: function. Not acceptable.");if(Array.isArray(t))e=[],o=!0;else{if("object"!=typeof obj)return t;e={}}if(o)for(var n=0;n<t.length;++n)e[n]=h(t[n]);else for(var r in t)t.hasOwnProperty(r)&&(e[r]=h(t[r]));return e}}},function(t,e){t.exports=function(t){"use strict";function e(){if(!(this instanceof e))return new e}e.prototype=Object.create(null),e.prototype.constructor=e,e.prototype.value=0,e.prototype.Add=function(t){this.value|=t},e.prototype.Remove=function(t){this.value=this.value&~t},e.prototype.Compare=function(t){return 0!=(this.value&t)},e.prototype.Holds=function(t){return(this.value&t)===t},e.prototype.Toggle=function(t){this.value^=t},t.Utils.FlagList=e}},function(t,e){t.exports=function(t){"use strict";function e(){if(!(this instanceof e))return new e}e.prototype=Object.create(null),e.prototype.constructor=e,e.prototype.NONE=0,e.prototype.next=1,e.prototype.Add=function(t){t=t.toUpperCase(),void 0===this[t]&&(this[t]=this.next,this.next=this.next<<1)},t.Utils.FlagEnum=e}},function(t,e){t.exports=function(t){"use strict";function e(t,o,n,r){if(!(this instanceof e))return new e(t,o,n,r);this.context=o,this.holderContext=t,this.handle=n,this.removeOnNextCall=r}e.prototype=Object.create(null),e.prototype.constructor=e,e.prototype.Execute=function(){this.handle.apply(this.context,arguments),!0===this.removeOnNextCall&&this.Remove()},e.prototype.Remove=function(){this.holderContext.Remove(this.handle,this.context)},t.Event.LocalListener=e,t.LocalListener=e}},function(t,e){t.exports=function(t){"use strict";function e(){if(!(this instanceof e))return new e;this.listeners=[]}e.prototype=Object.create(null),e.prototype.constructor=e,e.prototype.stopPropagation=!1,e.prototype.target=null,e.prototype.data=null,e.prototype.GetListenerIndex=function(t,e){var o=this.listeners;if(0===o.length)return-1;for(var n,r=0,i=o.length;r<i;++r)if(n=o[r],n.context===e&&n.handle===t)return r;return-1},e.prototype.Add=function(e,o,n){var r=new t.LocalListener(this,o,e,n);this.listeners.push(r)},e.prototype.Remove=function(t,e){var o=this.GetListenerIndex(t,e);-1!==o&&this.listeners.fickleSplice(o)},e.prototype.Dump=function(t){var e=this.listeners;if(0!==e.length)if(void 0!==t)for(var o,n=0,r=e.length;n<r;++n)o=e[n],o.context===t&&this.listeners.fickleSplice(n);else this.listeners.length=0},e.prototype.Dispatch=function(t,e){var o=this.listeners;if(0!==o.length){o=o.slice(),this.stopPropagation=!1,this.target=t,this.data=e;for(var n,r=0,i=o.length;r<i&&(n=o[r],n.Execute(this),!0!==this.stopPropagation);++r);delete this.target,delete this.data}},t.Event.LocalEvent=e,t.LocalEvent=e}},function(t,e){t.exports=function(t){"use strict";function e(o){if(!(this instanceof e))return new e(o);null!=o&&(this.stopTime=o),this.onStop=new t.LocalEvent,this.onFinish=new t.LocalEvent,this.onStart=new t.LocalEvent,this.onReset=new t.LocalEvent,this.onPause=new t.LocalEvent,this.onResume=new t.LocalEvent}e.prototype=Object.create(null),e.prototype.constructor=e,e.prototype.time=0,e.prototype.stopTime=0,e.prototype.isRunning=!1,e.prototype.canResume=!1,e.prototype.count=0,e.prototype.Reset=function(){this.onReset.Dispatch(this,null),this.count=0,this.time=0,this.isRunning=!1,this.canResume=!1,this.stopTime=null},e.prototype.Start=function(t){this.stopTime=Math.round(null==t?this.stopTime:t),this.stopTime>0&&(this.time=0,this.isRunning=!0,this.canResume=!1,this.onStart.Dispatch(this,{stopTime:this.stopTime}))},e.prototype.Stop=function(){!0===this.isRunning&&(this.isRunning=!1,this.onStop.Dispatch(this,null))},e.prototype.Pause=function(){!0===this.isRunning&&!1===this.canResume&&(this.isRunning=!1,this.canResume=!0,this.onPause.Dispatch(this,null))},e.prototype.Resume=function(){!0===this.canResume&&(this.isRunning=!0,this.canResume=!1,this.onResume.Dispatch(this,null))},e.prototype.Process=function(){this.time<this.stopTime&&!0===this.isRunning&&++this.time>=this.stopTime&&(this.isRunning=!1,this.count++,this.onFinish.Dispatch(this,null))},t.Time.Timer=e,t.Timer=e}},function(t,e){t.exports=function(t){"use strict";function e(t,o){if(!(this instanceof e))return new e(t,o);void 0!=t&&void 0!=t.x&&void 0!=t.y?(this.x=t.x,this.y=t.y):void 0!=t&&(void 0==o?(this.x=t,this.y=t):(this.x=t,this.y=o))}e.prototype=Object.create(null),e.prototype.constructor=e,e.TranslateMultiple=function(t,e){for(var o=0,n=t.length;o<n;++o)t[o].AddV(e)},e.GetMinMaxDot=function(t,e){for(var o=1/0,n=-o,r=0,i=e.Copy(),s=0,a=t.length;s<a;++s)r=t[s].GetDotV(e),r>n&&(n=r),r<o&&(o=r);return i.Set(o,n),i},e.Pool=new t.Utils.Pool(e),e.Pool.Retrieve=function(t,e){0===this.objects.length&&this.Flood();var o=this.objects.pop();return o.Set(t,e),o},e.USE_POOL=!0,e.prototype.x=0,e.prototype.y=0,e.prototype.Copy=function(){return!0===e.USE_POOL?e.Pool.Retrieve(this.x,this.y):new e(this)},e.prototype.FromStore=function(t,o){return!0===e.USE_POOL?e.Pool.Retrieve(t,o):new e(t,o)},e.prototype.AbsoluteCopy=function(){var t=this.Copy();return t.Positive(),t},e.prototype.SetV=function(t){this.x=t.x,this.y=t.y},e.prototype.Set=function(t,e){void 0!=t&&void 0==e?(this.x=t,this.y=t):(this.x=t,this.y=e)},e.prototype.Is0=function(){return 0===this.x&&0===this.y},e.prototype.AddV=function(t){this.x+=t.x,this.y+=t.y},e.prototype.AddVC=function(t){var e=this.Copy();return e.AddV(t),e},e.prototype.Add=function(t,e){this.x+=t,this.y+=e},e.prototype.SubtractV=function(t){this.x-=t.x,this.y-=t.y},e.prototype.SubtractVC=function(t){var e=this.Copy();return e.SubtractV(t),e},e.prototype.Subtract=function(t,e){this.x-=t,this.y-=e},e.prototype.MultiplyV=function(t){this.x*=t.x,this.y*=t.y},e.prototype.MultiplyVC=function(t){var e=this.Copy();return e.MultiplyV(t),e},e.prototype.Multiply=function(t,e){this.x*=t,this.y*=e},e.prototype.DivideV=function(t){this.x/=t.x,this.y/=t.y},e.prototype.DivideVC=function(t){var e=this.Copy();return e.DivideV(t),e},e.prototype.Divide=function(t,e){this.x/=t,this.y/=e},e.prototype.Normalize=function(){var t=this.GetMagnitude();this.Divide(t,t)},e.prototype.Positive=function(){this.x=Math.abs(this.x),this.y=Math.abs(this.y)},e.prototype.Negative=function(){this.x=-Math.abs(this.x),this.y=-Math.abs(this.y)},e.prototype.Invert=function(){this.x=-1*this.x,this.y=-1*this.y},e.prototype.Rotate=function(t){var e=Math.sin(t),o=Math.cos(t),n=this.x,r=this.y;this.x=n*o-r*e,this.y=n*e+r*o},e.prototype.RotateBy=function(t){var e=this.GetAngle()+t,o=Math.sin(e),n=Math.cos(e),r=this.x,i=this.y;this.x=r*n-i*o,this.y=r*o+i*n},e.prototype.RotateAroundV=function(t,e){this.SubtractV(t),this.Rotate(e),this.AddV(t)},e.prototype.RotateAround=function(t,e,o){this.Subtract(t,e),this.Rotate(o),this.Add(t,e)},e.prototype.RotateAroundByV=function(t,e){this.SubtractV(t),this.RotateBy(e),this.AddV(t)},e.prototype.RotateAroundBy=function(t,e,o){this.Subtract(t,e),this.RotateBy(o),this.Add(t,e)},e.prototype.PushFromV=function(t,e){var o=this.Copy();o.SubtractV(t),o.Normalize(),o.Multiply(e,e),this.AddV(o)},e.prototype.PushFrom=function(t,e,o){var n=this.Copy();n.Subtract(t,e),n.Normalize(),n.Multiply(o,o),this.AddV(n)},e.prototype.GetAngle=function(){return Math.atan2(this.y,this.x)},e.prototype.GetAngleBetweenV=function(t){return Math.atan2(this.y-t.y,this.x-t.x)},e.prototype.GetAngleBetween=function(t,e){return Math.atan2(this.y-e,this.x-t)},e.prototype.GetDotV=function(t){return this.x*t.x+this.y*t.y},e.prototype.GetDot=function(t,e){return this.x*t+this.y*e},e.prototype.GetCrossV=function(t){return this.x*t.y+this.y*t.x},e.prototype.GetCross=function(t,e){return this.x*e+this.y*t},e.prototype.GetMagnitudeSquared=function(){return this.x*this.x+this.y*this.y},e.prototype.GetMagnitude=function(){return Math.sqrt(this.GetMagnitudeSquared())},e.prototype.GetDistanceV=function(t){var e=this.Copy();return e.SubtractV(t),e.GetMagnitude()},e.prototype.GetDistance=function(t,e){var o=this.Copy();return o.Subtract(t,e),o.GetMagnitude()},e.prototype.GetDistanceSquaredV=function(t){var e=this.Copy();return e.SubtractV(t),e.GetMagnitudeSquared()},e.prototype.GetDistanceSquared=function(t,e){var o=this.Copy();return o.Subtract(t,e),o.GetMagnitudeSquared()},e.prototype.GetPerpendicularCCWV=function(t){return this.FromStore(-(t.y-this.y),t.x-this.x)},e.prototype.GetPerpendicularCCW=function(t,e){return this.FromStore(-(e-this.y),t-this.x)},e.prototype.GetPerpendicularCWV=function(t){return this.FromStore(t.y-this.y,-(t.x-this.x))},e.prototype.GetPerpendicularCW=function(t,e){return this.FromStore(e-this.y,-(t-this.x))},e.prototype.GetNormalAV=function(t){var e=this.GetPerpendicularCCWV(t);return e.Normalize(),e},e.prototype.GetNormalA=function(t,e){var o=this.GetPerpendicularCCW(t,e);return o.Normalize(),o},e.prototype.GetNormalBV=function(t){var e=this.GetPerpendicularCWV(t);return e.Normalize(),e},e.prototype.GetNormalB=function(t,e){var o=this.GetPerpendicularCW(t,e);return o.Normalize(),o},e.prototype.GetMidPointV=function(t){var e=this.Copy();return e.AddV(t),e.Divide(2,2),e},e.prototype.GetMidPoint=function(t,e){var o=this.Copy();return o.Add(t,e),o.Multiply(.5,.5),o},e.prototype.IsEqualTo=function(t,e){return this.x===t&&this.y===e},e.prototype.IsEqualToV=function(t){return this.x===t.x&&this.y===t.y},e.prototype.GetProjectionOntoV=function(t){var e=this.GetDotV(t);if(0===e)return this.FromStore(0);var o=t.GetMagnitude(),n=e/(o*o),r=t.Copy();return r.Multiply(n,n),r},e.prototype.GetProjectionOnto=function(t,e){var o=this.Copy();o.Set(t,e);var n=this.GetDotV(o);if(0===n)return this.FromStore(0);var r=o.GetMagnitude(),i=n/(r*r);return o.Multiply(i,i),o},e.prototype.GetReflectionV=function(t){var e=t.Copy(),o=this.GetDotV(e);return e.Multiply(2,2),e.Multiply(o,o),this.SubtractVC(e)},e.prototype.GetReflection=function(t,e){var o=this.Copy();o.Set(t,e);var n=this.GetDotV(o);return o.Multiply(2,2),o.Multiply(n,n),this.SubtractVC(o)},e.prototype.Assert=function(){var e=t.Utils.Assert;e(this.x,e.IS_SAME_TYPE,0),e(this.y,e.IS_SAME_TYPE,0)},e.prototype.Store=function(){e.Pool.Store(this)},e.prototype.GetLength=e.prototype.GetMagnitude,e.prototype.GetLengthSquared=e.prototype.GetMagnitudeSquared,t.Math.Vector2D=e,t.Vector2D=e,e.Pool.Flood(function(){},1e5)}},function(t,e){t.exports=function(t){"use strict";function e(){if(!(this instanceof e))return new e;this.array=new Float32Array(9)}e.prototype=Object.create(null),e.prototype.constructor=e,e.EPSILON=1e-5,e.prototype.array=null,e.prototype.a=1,e.prototype.b=0,e.prototype.c=0,e.prototype.d=1,e.prototype.e=0,e.prototype.f=0,e.prototype.Identity=function(){this.a=1,this.b=0,this.c=0,this.d=1,this.e=0,this.f=0},e.prototype.Copy=function(){var t=new e;return t.Set(this.a,this.b,this.c,this.d,this.e,this.f),t},e.prototype.Set=function(t,e,o,n,r,i){return this.a=t,this.b=e,this.c=o,this.d=n,this.e=r,this.f=i,this},e.prototype.SetTransform=function(t,e,o,n,r,i,s,a,h){t=null==t?0:t,e=null==e?0:e,o=null==o?1:o,n=null==n?1:n,r=null==r?0:r,i=null==i?0:i,s=null==s?0:s,a=null==a?0:a,h=null==h?0:h;var p=Math.sin(r),u=Math.cos(r),c=-Math.sin(i),l=Math.cos(i),f=Math.sin(s),y=Math.cos(s),d=u*o,v=p*o,S=-p*n,T=u*n;return this.a=y*d+f*S,this.b=y*v+f*T,this.c=c*d+l*S,this.d=c*v+l*T,this.e=t+a*d+h*S,this.f=e+a*v+h*T,this},e.prototype.Translate=function(t,e){this.e+=t,this.f+=e},e.prototype.TranslateTo=function(t,e){this.e=t,this.f=e},e.prototype.ApplyTranslation=function(t,e){this.e=t*this.a+e*this.c+this.e,this.f=t*this.b+e*this.d+this.f},e.prototype.ApplyScale=function(t,e){this.a*=t,this.b*=e,this.c*=t,this.d*=e},e.prototype.Scale=function(t,e){this.a*=t,this.b*=e,this.c*=t,this.d*=e,this.e*=t,this.f*=e},e.prototype.Rotate=function(t){var e=Math.sin(t),o=Math.cos(t),n=this.a,r=this.c,i=this.e;this.a=n*o-this.b*e,this.b=n*e+this.b*o,this.c=r*o-this.d*e,this.d=r*e+this.d*o,this.e=i*o-this.f*e,this.f=i*e+this.f*o},e.prototype.Decompose=function(t){var o=this.a,n=this.b,r=this.c,i=this.d,s=-Math.atan2(-r,i),a=Math.atan2(n,o);Math.abs(s+a)<e.EPSILON?(t.rotation=a,o<0&&i>=0&&(t.rotation+=Math.PI),t.skew.Set(0)):t.skew.Set(s,a),t.scale.Set(Math.sqrt(o*o+n*n),Math.sqrt(r*r+i*i)),t.position.Set(this.e,this.f)},e.prototype.ApplyToContext=function(t){t.setTransform(this.a,this.b,this.c,this.d,this.e,this.f)},e.prototype.AsArray=function(t){var e=this.array;return!0===t?(e[0]=this.a,e[1]=this.b,e[2]=0,e[3]=this.c,e[4]=this.d,e[5]=0,e[6]=this.e,e[7]=this.f,e[8]=1):(e[0]=this.a,e[1]=this.c,e[2]=this.e,e[3]=this.b,e[4]=this.d,e[5]=this.f,e[6]=0,e[7]=0,e[8]=1),e},t.Math.Matrix2D=e,t.Matrix2D=e}},function(t,e){t.exports=function(t){"use strict";function e(o,n){if(!(this instanceof e))return new e;this.position=new t.Vector2D(o,n),this.scale=new t.Vector2D(1,1),this.localTransform=new t.Vector2D(0,0),this.worldTransform=new t.Vector2D(0,0)}e.prototype=Object.create(null),e.prototype.constructor=e,e.prototype.UpdateLocal=function(){this.localTransform.SetV(this.position)},e.prototype.UpdateWorld=function(t){var e=this.localTransform;e.SetV(this.position),this.worldTransform.Set(t.e+e.x,t.f+e.y)},e.prototype.ApplyWorld=function(t){t.setTransform(this.scale.x,0,0,this.scale.y,this.worldTransform.x,this.worldTransform.y)},t.Math.Basetransform2D=e}},function(t,e){t.exports=function(t){"use strict";function e(o,n){if(!(this instanceof e))return new e(o,n);this.position=t.Vector2D(o,n),this.scale=new t.Vector2D(1,1),this.skew=new t.Vector2D(0,0),this.pivot=new t.Vector2D(0,0),this.localTransform=new t.Matrix2D,this.worldTransform=new t.Matrix2D}e.prototype=Object.create(null),e.prototype.constructor=e,e.prototype.rotation=0,e.prototype.skewCX=1,e.prototype.skewSX=0,e.prototype.skewCY=0,e.prototype.skewSY=1,e.prototype.Set=function(t){t.Decompose(this),this.UpdateSkew()},e.prototype.UpdateLocal=function(){var t=this.localTransform,e=this.position,o=this.scale,n=this.pivot;t.a=this.skewCX*o.x,t.b=this.skewSX*o.x,t.c=this.skewCY*o.y,t.d=this.skewSY*o.y,t.e=e.x-n.x*t.a+n.y*t.c,t.f=e.y-n.y*t.b+n.y*t.d},e.prototype.UpdateWorld=function(t){var e=this.localTransform,o=this.worldTransform,n=this.position,r=this.scale,i=this.pivot;e.a=this.skewCX*r.x,e.b=this.skewSX*r.x,e.c=this.skewCY*r.y,e.d=this.skewSY*r.y,e.e=n.x-i.x*e.a+i.y*e.c,e.f=n.y-i.y*e.b+i.y*e.d,o.a=e.a*t.a+e.b*t.c,o.b=e.a*t.b+e.b*t.d,o.c=e.c*t.a+e.d*t.c,o.d=e.c*t.b+e.d*t.d,o.e=e.e*t.a+e.f*t.c+t.e,o.f=e.e*t.b+e.f*t.d+t.f},e.prototype.UpdateSkew=function(){var t=this.skew,e=this.rotation;this.skewCX=Math.cos(e+t.y),this.skewSX=Math.sin(e+t.y),this.skewCY=-Math.sin(e-t.x),this.skewSY=Math.cos(e-t.x)},e.prototype.ApplyWorld=function(t){this.worldTransform.ApplyToContext(t)},t.Math.Transform2D=e}},function(t,e){t.exports=function(t){"use strict";function e(o,n,r,i){if(!(this instanceof e))return new e(o,n,r,i);void 0!==o&&null!=o.x&&null!=o.y&&void 0!==n&&null!=n.x&&null!=n.y?(this.s=o,this.e=n):void 0!==o&&void 0!==n&&void 0!==r&&void 0!==i?(this.s=new t.Vector2D(o,n),this.e=new t.Vector2D(r,i)):(this.s=new t.Vector2D,this.e=new t.Vector2D)}var o=t.Math.LineLineIntersection,n=t.Math.ClosestPointOnLine;e.prototype=Object.create(null),e.prototype.constructor=e,e.TYPE=0,e.prototype.TYPE=e.TYPE,e.prototype.epsilon=1e3,e.prototype.belongsTo=null,e.prototype.Stretch=function(t){var e=.5*t;this.s.PushFromV(this.e,e),this.e.PushFromV(this.s,e)},e.prototype.Rotate=function(t,e,o){e=void 0==e?.5:e;var n=this.s.Copy();n.AddV(this.e),n.Multiply(e,void 0==o?e:o),this.s.RotateAroundV(n,t),this.e.RotateAroundV(n,t)},e.prototype.GetLength=function(){return this.s.GetDistanceV(this.e)},e.prototype.GetLengthSquared=function(){return this.s.GetDistanceSquaredV(this.e)},e.prototype.IntersectsPoint=function(t){var e=this.s,o=this.e,n=(t.y-e.y)*(o.x-e.x)-(t.x-e.x)*(o.y-e.y);if(Math.abs(n)>this.epsilon)return!1;var r=(t.x-e.x)*(o.x-e.x)+(t.y-e.y)*(o.y-e.y);return!(r<0)&&!(r>this.GetLengthSquared())},e.prototype.IntersectsLine=function(t){return o(this.s,this.e,t.s,t.e)},e.prototype.GetClosestPointTo=function(t){return n(this.s,this.e,t)},e.prototype.GetNormalA=function(){return this.s.GetNormalAV(this.e)},e.prototype.GetNormalB=function(){return this.s.GetNormalBV(this.e)},t.Geom.Line2D=e,t.Geom.Ray2D=e}},function(t,e){t.exports=function(t){"use strict";function e(o,n,r,i){if(!(this instanceof e))return new e(o,n,r,i);o instanceof t.Vector2D&&n instanceof t.Vector2D?(this.tl=o,this.br=n):void 0!==o&&void 0!==n&&void 0!==o.x&&void 0!==o.y&&void 0!==n.x&&void 0!==n.y?(this.tl=new t.Vector2D(o.x,o.y),this.br=new t.Vector2D(n.x,n.y)):void 0!==o&&void 0!==n&&void 0!==r&&void 0!==i?(this.tl=new t.Vector2D(o,n),this.br=new t.Vector2D(r,i)):(this.tl=new t.Vector2D,this.br=new t.Vector2D),this.ComputeWH()}e.prototype=Object.create(null),e.prototype.constructor=e,e.TYPE=1,e.TOP_LEFT="TL",e.TOP_RIGHT="TR",e.BOTTOM_LEFT="BL",e.BOTTOM_RIGHT="BR",e.prototype.TYPE=e.TYPE,e.prototype.w=0,e.prototype.h=0,e.prototype.hw=0,e.prototype.hh=0,e.prototype.area=0,e.prototype.belongsTo=null,e.prototype.Set=function(t,e,o,n){this.tl.x=t,this.tl.y=e,this.br.x=o,this.br.y=n,this.ComputeWH()},e.prototype.SetC=function(t){this.Set(t.tl.x,t.tl.y,t.br.x,t.br.y)},e.prototype.Scale=function(t,e){this.tl.Multiply(t,e),this.br.Multiply(t,e),this.ComputeWH()},e.prototype.ComputeWH=function(){this.w=this.br.x-this.tl.x,this.h=this.br.y-this.tl.y,this.hw=.5*this.w,this.hh=.5*this.h,this.area=this.w*this.h},e.prototype.GetQuadrant=function(t){var o=this.tl,n=this.br;switch(t){case e.TOP_LEFT:return new e(o.x,o.y,o.x+this.hw,o.y+this.hh);case e.TOP_RIGHT:return new e(o.x+this.hw,o.y,n.x,o.y+this.hh);case e.BOTTOM_LEFT:return new e(o.x,o.y+this.hh,o.x+this.hw,n.y);case e.BOTTOM_RIGHT:return new e(o.x+this.hw,o.y+this.hh,n.x,n.y);default:return null}},e.prototype.IntersectsPoint=function(t){return!(t.x<this.tl.x||t.x>this.br.x||t.y<this.tl.y||t.y>this.br.y)},e.prototype.ContainsPoint=function(t){return t.x>this.tl.x&&t.x<this.br.x&&t.y>this.tl.y&&t.y<this.br.y},e.prototype.IntersectsAABB2D=function(t){var e=this.tl,o=this.br,n=t.tl,r=t.br;return!(n.x>=o.x||n.y>=o.y||r.x<=e.x||r.y<=e.y)},e.prototype.ContainsAABB2D=function(t){if(t.area>this.area)return!1;var e=this.tl,o=this.br,n=t.tl,r=t.br;return n.x>=e.x&&n.y>=e.y&&r.x<=o.x&&r.y<=o.y},t.Geom.AABB2D=e,t.AABB2D=e}},function(t,e){t.exports=function(t){"use strict";function e(o){if(!(this instanceof e))return new e(o);this.vertices=[],this.normals=[],this.perimeterMidPoints=[],this.centroid=new t.Vector2D,null!=o&&(o[0]instanceof t.Vector2D?this.AddPoints(o):this.PushPoints(o))}e.prototype=Object.create(null),e.prototype.constructor=e,e.TYPE=3,e.CreateCopy=function(t){for(var o=new e,n=0,r=t.vertices,i=r.length;n<i;++n)o.AddPoint(r[n].Copy());return o},e.Construct=Object.create(null),e.Construct.Rectangular=function(e,o,n,r,i){var s=new t.Vector2D(o,n),a=new t.Vector2D(o+r,n),h=new t.Vector2D(o+r,n+i),p=new t.Vector2D(o,n+i);return e.Recreate([s,a,h,p]),e.ComputeBounds(),e.GetNormalsA(),e},e.Construct.Isosceles=function(e,o,n,r,i){var s=new t.Vector2D(o,n),a=new t.Vector2D(o+.5*r,n+i),h=new t.Vector2D(o-.5*r,n+i);return e.Recreate([s,a,h]),e.ComputeBounds(),e.GetNormalsA(),e},e.Construct.Cyclic=function(e,o,n,r,i){var s,a,h,p=0,u=i,c=2*Math.PI/u;for(e.Recreate([]),p;p<u;++p)h=c*p,s=Math.cos(h)*r,a=Math.sin(h)*r,e.AddPoint(new t.Vector2D(o+s,n+a));return e.ComputeBounds(),e.GetNormalsA(),e},e.Construct.Equilateral=function(e,o,n,r){var i,s,a=2.0943951023931953;return e.Recreate([]),i=Math.cos(0)*r,s=Math.sin(0)*r,e.AddPoint(new t.Vector2D(o+i,n+s)),i=Math.cos(a)*r,s=Math.sin(a)*r,e.AddPoint(new t.Vector2D(o+i,n+s)),i=Math.cos(2*a)*r,s=Math.sin(2*a)*r,e.AddPoint(new t.Vector2D(o+i,n+s)),e.Rotate(-90*t.Math.RADIAN),e.ComputeBounds(),e.GetNormalsA(),e},e.Construct.Star=function(e,o,n,r,i,s){var a,h,p,u,c=0,l=2*s,f=2*Math.PI/l;for(e.Recreate([]),c;c<l;++c)u=0==(1&c)?r:i,p=f*c,a=Math.cos(p)*u,h=Math.sin(p)*u,e.AddPoint(new t.Vector2D(o+a,n+h));return e.ComputeBounds(),e.GetNormalsA(),e},e.Construct.Butterfly=function(o,n,r,i,s){var a,h,p,u=0,c=e.Construct.Butterfly.C;for(o.Recreate([]),u;u<i;++u)p=u*c._1*Math.PI/i,a=Math.cos(p)*(Math.exp(Math.cos(p))-c._2*Math.cos(c._3*p)-Math.pow(Math.sin(p/c._4),c._5))*s,h=Math.sin(p)*(Math.exp(Math.cos(p))-c._2*Math.cos(c._3*p)-Math.pow(Math.sin(p/c._4),c._5))*s,o.AddPoint(new t.Vector2D(n+a,r+h));return o.ComputeBounds(),o.GetNormalsA(),o},e.Construct.Butterfly.C={_1:24,_2:2,_3:4,_4:12,_5:5,Reset:function(){this._1=24,this._2=2,this._3=4,this._4=12,this._5=5}},e.Construct.Supershape=function(o,n,r,i,s,a,h,p,u){h=void 0===h?1:h,p=void 0===p?1:p,u=void 0===u?1:u;var c,l,f,y,d,v,S=0,T=s,m=e.Construct.Supershape.C;for(o.Recreate([]),S;S<T;++S)f=S*Math.PI*2/s,d=Math.cos(a*f/4)/m._A,d=Math.abs(d),d=Math.pow(d,p),v=Math.sin(a*f/4)/m._B,v=Math.abs(v),v=Math.pow(v,u),y=Math.pow(d+v,1/h),0===Math.abs(y)?(c=0,l=0):(y=1/y,c=Math.cos(f)*y*i,l=Math.sin(f)*y*i),o.AddPoint(new t.Vector2D(n+c,r+l));return o.ComputeBounds(),o.GetNormalsA(),o},e.Construct.Supershape.C={_A:1,_B:1},e.prototype.TYPE=e.TYPE,e.prototype.aabb=null,e.prototype.dirtyBounds=!0,e.prototype.belongsTo=null,e.prototype.AddPoint=function(t){this.vertices.push(t)},e.prototype.AddPoints=function(t){this.vertices.push.apply(this.vertices,t)},e.prototype.PushPoint=function(e,o){this.vertices.push(new t.Vector2D(e,o))},e.prototype.PushPoints=function(t){for(var e=0,o=t.length;e<o;e+=2)this.PushPoint(t[e],t[e+1])},e.prototype.Recreate=function(t){this.vertices.length=0,void 0!=t&&this.vertices.push.apply(this.vertices,t)},e.prototype.ComputeBounds=function(){null===this.aabb&&(this.aabb=new t.Geom.AABB2D);for(var e,o=1/0,n=-o,r=o,i=-o,s=0,a=this.vertices,h=a.length;s<h;++s)e=a[s],e.x<o&&(o=e.x),e.x>n&&(n=e.x),e.y<r&&(r=e.y),e.y>i&&(i=e.y);this.aabb.Set(o,r,n,i),this.dirtyBounds=!1},e.prototype.Rotate=function(t,e,o,n){!0===this.dirtyBounds&&!0===n?this.ComputeBounds():null===this.aabb&&this.ComputeBounds(),e=void 0===e?.5:e;var r=this.aabb,i=r.tl.Copy();i.AddV(r.br),i.Multiply(e,void 0===o?e:o);var s,a=0,h=this.vertices,p=h.length;for(a;a<p;++a)s=h[a],s.RotateAroundV(i,t);this.dirtyBounds=!0},e.prototype.GetCentroid=function(){var t=this.centroid;t.Set(0,0);for(var e,o=0,n=this.vertices,r=n.length;o<r;++o)e=n[o],t.AddV(e);return t.Divide(r,r),t},e.prototype.GetNormalsA=function(){var t=this.normals;t.length=0;for(var e=0,o=this.vertices,n=o[e],r=this.vertices.length-1;e<r;n=o[++e])t.push(n.GetNormalAV(o[e+1]));return t.push(o[r].GetNormalAV(o[0])),t},e.prototype.GetNormalsB=function(){var t=this.normals;t.length=0;for(var e=0,o=this.vertices,n=o[e],r=this.vertices.length-1;e<r;n=o[++e])t.push(n.GetNormalBV(o[e+1]));return t.push(o[r].GetNormalBV(o[0])),t},e.prototype.GetPerimeterMidPoints=function(){var t=this.perimeterMidPoints;t.length=0;for(var e=0,o=this.vertices,n=o[e],r=this.vertices.length-1;e<r;n=o[++e])t.push(n.GetMidPointV(o[e+1]));return t.push(o[r].GetMidPointV(o[0])),t},e.prototype.IntersectsPoint=function(t){if(!0===this.dirtyBounds&&this.ComputeBounds(),!1===this.aabb.IntersectsPoint(t))return!1;var e,o,n,r,i=t.x,s=t.y,a=!1,h=this.vertices,p=h.length;for(e=0,o=p-1;e<p;o=e++)n=h[e],r=h[o],n.y>s!=r.y>s&&i<(r.x-n.x)*(s-n.y)/(r.y-n.y)+n.x&&(a=!a);return a},t.Geom.Polygon2D=e}},function(t,e){t.exports=function(t){"use strict";function e(o,n,r){if(!(this instanceof e))return new e(o,n,r);this.center=new t.Vector2D(o,n),this.radius=void 0===r?32:r}e.prototype=Object.create(null),e.prototype.constructor=e,e.TYPE=2,e.prototype.TYPE=e.TYPE,e.prototype.diameter=0,e.prototype.w=0,e.prototype.h=0,e.prototype.radiusSquared=0,e.prototype.radiusUnsquared=0,e.prototype.area=0,e.prototype.belongsTo=null,e.prototype.Set=function(t,e,o){this.center.Set(t,e),this.radius=o},e.prototype.SetC=function(t){this.center.SetV(t),this.radius=t.radius},e.prototype.Scale=function(t){this.radius*=t},e.prototype.IntersectsCircle=function(t){var e=this.radius+t.radius;return e*e>=this.center.GetDistanceSquaredV(t.center)},e.prototype.IntersectsPoint=function(t){return this.radiusSquared>=this.center.GetDistanceSquaredV(t)},Object.defineProperty(e.prototype,"x",{set:function(t){this.center.x=t},get:function(){return this.center.x}}),Object.defineProperty(e.prototype,"y",{set:function(t){this.center.y=t},get:function(){return this.center.y}}),Object.defineProperty(e.prototype,"radius",{set:function(t){this.radiusUnsquared=t,this.radiusSquared=t*t,this.diameter=this.w=this.h=2*t,this.area=Math.PI*t*t},get:function(){return this.radiusUnsquared}}),t.Geom.Circle=e}},function(t,e){t.exports=function(t){"use strict";var e=Object.create(null);e.AABB2DvsAABB2D=Object.create(null),e.AABB2DvsAABB2D.Relative=Object.create(null),e.CirclevsCircle=Object.create(null),e.CirclevsCircle.Relative=Object.create(null),e.PolygonvsPolygon=Object.create(null),e.PolygonvsPolygon.Relative=Object.create(null),e.CirclevsLine=Object.create(null),e.CirclevsLine.Relative=Object.create(null),e.VectorSortMinMag=function(t,e){return t.GetMagnitudeSquared()-e.GetMagnitudeSquared()};var o=t.Vector2D.GetMinMaxDot,n=t.Math.ClosestPointOnLine;e.AABB2DvsAABB2D.Result=function(){this.mtv=new t.Vector2D},e.AABB2DvsAABB2D.Result.prototype.occured=!1,e.AABB2DvsAABB2D.Result.prototype.Reset=function(){this.mtv.Set(0,0),this.occured=!1},e.AABB2DvsAABB2D.Relative.Collide=function(o,n,r){var i=o.shape,s=i.w,a=i.h,h=o.anchor,p=n.shape,u=p.w,c=p.h,l=n.anchor,f=i.tl.SubtractVC(o.relative),y=p.tl.SubtractVC(n.relative);void 0!=h&&(f.x+=h.x*s,f.y+=h.y*a),void 0!=l&&(y.x+=l.x*u,y.y+=l.y*c);var d=y.x+s,v=f.x+u,S=y.y+a,T=f.y+c;if(f.x<d&&y.x<v&&f.y<S&&y.y<T){if(void 0!=r){var m=[new t.Vector2D(f.x-d,0),new t.Vector2D(v-y.x,0),new t.Vector2D(0,f.y-S),new t.Vector2D(0,T-y.y)];m.sort(e.VectorSortMinMag),r.mtv.SetV(m[0]),r.occured=!0}return!0}return!1},e.CirclevsCircle.Result=function(){this.mtv=new t.Vector2D(0,0),this.poc={a:null,b:null,c:null}},e.CirclevsCircle.Result.prototype.mtd=0,e.CirclevsCircle.Result.prototype.delta=null,e.CirclevsCircle.Result.prototype.occured=!1,e.CirclevsCircle.Result.prototype.Reset=function(){this.poc.a=null,this.poc.b=null,this.poc.c=null,this.mtv.Set(0,0),this.mtd=0,this.delta=null,this.occured=!1},e.CirclevsCircle.Relative.Collide=function(e,o,n){var r=e.shape,i=o.shape,s=r.radius,a=i.radius,h=s+a,p=e.anchor,u=o.anchor,c=e.relative.Copy(),l=o.relative.Copy();void 0!=p&&(c.x+=p.x*r.diameter,c.y+=p.y*r.diameter),void 0!=u&&(l.x+=u.x*i.diameter,l.y+=u.y*i.diameter);var f=l.SubtractVC(c),y=f.GetMagnitudeSquared();if(h*h>y){if(void 0!=n){var d=Math.sqrt(y),v=(r.radiusSquared-i.radiusSquared+y)/(d+d),S=new t.Vector2D(c.x+f.x*v/d,c.y+f.y*v/d),T=Math.sqrt(r.radiusSquared-v*v)/d,m=-f.y*T,A=f.x*T,x=new t.Vector2D(S.x+m,S.y+A),g=new t.Vector2D(S.x-m,S.y-A),b=c.SubtractVC(l);b.Divide(h,h);var O=d-s-a;n.poc.a=S,n.poc.b=x,n.poc.c=g,n.mtv.SetV(b),n.mtd=O,n.delta=f,n.occured=!0}return!0}return!1},e.CirclevsCircle.Relative.ElasticResponse=function(t,e,o){var n=o.delta.Copy(),r=o.mtv.Copy();n.Normalize();var i=t.mass,s=e.mass,a=t.velocity,h=e.velocity,p=a.GetDotV(n),u=h.GetDotV(n),c=2*(p-u)/(i+s);a.Set(a.x-c*s*n.x,a.y-c*s*n.y),h.Set(h.x+c*i*n.x,h.y+c*i*n.y),r.Multiply(o.mtd,o.mtd),r.Divide(2,2),t.relative.SubtractV(r),e.relative.AddV(r)},e.PolygonvsPolygon.Result=function(){this.mtv=new t.Vector2D(0,0),this.olAxis=new t.Vector2D(0,0)},e.PolygonvsPolygon.Result.prototype.occured=!1,e.PolygonvsPolygon.Result.prototype.mtd=1/0,e.PolygonvsPolygon.Result.prototype.Reset=function(){this.occured=!1,this.mtv.Set(0,0),this.mtd=1/0,this.olAxis.Set(0,0)};var r=e.PolygonvsPolygon.Relative.AxisSeparates=function(t,e,n,r){var i=o(t.shape.vertices,n),s=o(e.shape.vertices,n),a=e.relative.SubtractVC(t.relative).GetDotV(n);if(s.Add(a,a),i.x>s.y||s.x>i.y)return!0;if(void 0!=r){var h=0,p=i.x,u=i.y,c=s.x,l=s.y,f=0,y=0;p<c?u<l?h=u-c:(f=u-c,y=l-p,h=f<y?f:-y):u>l?h=p-l:(f=u-c,y=l-p,h=f<y?f:-y);var d=Math.abs(h);d<r.mtd&&(r.mtd=d,r.olAxis.SetV(n),h<0&&r.olAxis.Invert())}return!1};e.PolygonvsPolygon.Relative.Collide=function(t,e,o){var n=t.shape,i=e.shape,s=n.normals,a=i.normals,h=0,p=s.length,u=a.length;for(h;h<p;++h)if(!0===r(t,e,s[h],o))return!1;for(h=0;h<u;++h)if(!0===r(t,e,a[h],o))return!1;return void 0!=o&&(o.mtv.SetV(o.olAxis),o.mtv.Multiply(o.mtd,o.mtd),o.occured=!0),!0},e.CirclevsLine.Result=function(){this.mtv=new t.Vector2D(0,0),this.cp=new t.Vector2D(0,0)},e.CirclevsLine.Result.prototype.occured=!1,e.CirclevsLine.Result.prototype.sore=0,e.CirclevsLine.Result.prototype.Reset=function(){this.mtv.Set(0,0),this.cp.Set(0,0),this.occured=!1,this.sore=0},e.CirclevsLine.Relative.Collide=function(t,e,o){var r=e.shape,i=t.shape,s=e.relative,a=t.relative,h=r.s.AddVC(s),p=r.e.AddVC(s),u=n(h,p,a),c=a.SubtractVC(u),l=c.GetMagnitudeSquared();if(l<i.radiusSquared){if(o){var f=c,y=i.radius-Math.sqrt(l);f.Normalize(),f.Multiply(y,y),o.mtv.SetV(f),o.cp.SetV(u),o.occured=!0,u===h?o.sore=1:u===p&&(o.sore=2)}return!0}return!1},e.CirclevsLine.Relative.ReflectingResponse=function(t,e,o){var n,r,i=e.shape,s=t.velocity,a=t.relative,h=o.cp;0!==o.sore?(n=h.SubtractVC(a),n.Normalize()):n=i.GetNormalA(),r=s.GetReflectionV(n),s.SetV(r),a.AddV(o.mtv)},t.Math.Collision2D=e}},function(t,e){t.exports=function(t){"use strict";t.Math.Ease=Object.create(null),t.Math.Ease.Linear=function(t,e,o,n){return o*t/n+e},t.Math.Ease.QuadIn=function(t,e,o,n){return t/=n,o*t*t+e},t.Math.Ease.QuadOut=function(t,e,o,n){return t/=n,-o*t*(t-2)+e},t.Math.Ease.QuadInOut=function(t,e,o,n){return(t/=.5*n)<1?.5*o*t*t+e:(t--,.5*-o*(t*(t-2)-1)+e)},t.Math.Ease.SineIn=function(t,e,o,n){return-o*Math.cos(t/n*(.5*Math.PI))+o+e},t.Math.Ease.SineOut=function(t,e,o,n){return o*Math.sin(t/n*(.5*Math.PI))+e},t.Math.Ease.SineInOut=function(t,e,o,n){return.5*-o*(Math.cos(Math.PI*t/n)-1)+e}}},function(t,e){t.exports=function(t){"use strict";function e(o,n,r,i,s,a){if(!(this instanceof e))return new e(o,n,r,i,s,a);this.id=o,this.target=n,this.propertyString=r,void 0!==i&&(this.value=i),void 0!==s&&(this.duration=s),this.easing=t.Math.Ease[void 0===a?e.DEFAULT_EASING:a],this.onStart=new t.Event.LocalEvent,this.onEnd=new t.Event.LocalEvent,this.onStop=new t.Event.LocalEvent,this.onReconfigure=new t.Event.LocalEvent,this.onReset=new t.Event.LocalEvent}e.prototype=Object.create(null),e.prototype.constructor=e,e.DEFAULT_EASING="Linear",e.prototype.id=null,e.prototype.target=null,e.prototype.easing=null,e.prototype.duration=1e3,e.prototype.time=0,e.prototype.value=1,e.prototype.startValue=0,e.prototype.propertyString=null,e.prototype.change=0,e.prototype.property=null,e.prototype.propertyObject=null,e.prototype.running=!1,e.prototype.Start=function(){var e=this.propertyString.split(".");this.property=e[e.length-1],this.propertyObject=t.Utils.Nested(this.target,this.propertyString,!0),this.startValue=this.propertyObject[this.property],this.change=this.value-this.startValue,this.time=0,this.running=!0,this.onStart.Dispatch(this,null)},e.prototype.Stop=function(){delete this.property,delete this.propertyObject,delete this.startValue,delete this.change,delete this.time,delete this.running,this.onStop.Dispatch(this,null)},e.prototype.Process=function(){!0===this.running&&(this.propertyObject[this.property]=this.easing(this.time,this.startValue,this.change,this.duration),++this.time>=this.duration&&(this.running=!1,this.propertyObject[this.property]=this.value,this.onEnd.Dispatch(this,null)))},e.prototype.Reconfigure=function(o,n,r,i){void 0!==o&&(this.propertyString=o),this.value=n,this.duration=r,this.easing=t.Math.Ease[void 0===i?e.DEFAULT_EASING:i],this.onReconfigure.Dispatch(this,null)},e.prototype.Reset=function(){if(null===this.propertyObject||null===this.property)return!1;this.propertyObject[this.property]=this.startValue,delete this.property,delete this.propertyObject,delete this.startValue,delete this.change,delete this.time,delete this.running,this.onReset.Dispatch(this,null)},t.Motion=e}},function(t,e){t.exports=function(t){"use strict";function e(t){if(!(this instanceof e))return new e(t);this.motions=[],this.target=t}e.prototype=Object.create(null),e.prototype.constructor=e,e.prototype.target=null,e.prototype.motions=null,e.prototype.Create=function(e,o,n,r,i){if(null===this.GetMotion(e)){var s=new t.Motion(e,this.target,o,n,r,i);return this.motions.push(s),s}return null},e.prototype.Add=function(t){null===this.GetMotion(t.id)&&this.motions.push(t)},e.prototype.Start=function(t){var e=this.GetMotion(t);return null!==e&&e.Start(),e},e.prototype.StartMultiple=function(t){t=t.split(" ");for(var e=0,o=t.length;e<o;++e)this.Start(t[e])},e.prototype.Stop=function(t){var e=this.GetMotion(t);return null!==e&&e.Stop(),e},e.prototype.StopMultiple=function(t){t=t.split(" ");for(var e=0,o=t.length;e<o;++e)this.Stop(t[e])},e.prototype.Reset=function(t){var e=this.GetMotion(t);return null!==e&&e.Reset(),e},e.prototype.ResetMultiple=function(t){t=t.split(" ");for(var e=0,o=t.length;e<o;++e)this.Reset(t[e])},e.prototype.Process=function(){for(var t,e=0,o=this.motions,n=o.length;e<n;++e)t=o[e],t.Process()},e.prototype.GetMotion=function(t){for(var e,o=0,n=this.motions,r=n.length;o<r;++o)if(e=n[o],e.id===t)return e;return null},t.MotionManager=e}},function(t,e){t.exports=function(t){"use strict";function e(t,o,n,r){if(!(this instanceof e))return new e(t,o,n,r);this.Set(t,o,n,r),this.nodes={},this.objects=[],this.convergence=[]}e.prototype=Object.create(null),e.prototype.constructor=e,e.TOP_LEFT="TL",e.TOP_RIGHT="TR",e.BOTTOM_LEFT="BL",e.BOTTOM_RIGHT="BR",e.Pool=new t.Utils.Pool(e),e.Pool.Retrieve=function(t,e,o,n){0===this.objects.length&&this.Flood();var r=this.objects.pop();return r.Set(t,e,o,n),r},e.USE_POOL=!0,e.prototype.objectCap=0,e.prototype.levelCap=0,e.prototype.level=0,e.prototype.nodes=null,e.prototype.objects=null,e.prototype.convergence=null,e.prototype.aabb=null,e.prototype.hasSplit=!1,e.prototype.Set=function(t,e,o,n){this.aabb=t,this.level=e,this.objectCap=o,this.levelCap=n},e.prototype.FromStore=function(t,o,n,r){return!0===e.USE_POOL?e.Pool.Retrieve(t,o,n,r):new e(t,o,n,r)},e.prototype.Add=function(t){var e="",o=this.objects,n=this.nodes,r=0;if(!0===this.hasSplit&&null!==(e=this.Marking(t)))return void n[e].Add(t);if(o.push(t),this.level<this.levelCap&&o.length>this.objectCap)for(!1===this.hasSplit&&this.Split();r<o.length;)e=this.Marking(o[r]),null!==e?n[e].Add(o.fickleSplice(r)):++r},e.prototype.Converge=function(t){var o=this.convergence;o.length=0,o.push.apply(o,this.objects);var n=null,r=this.nodes;return!0===this.hasSplit&&(n=this.Marking(t),null!==n?o.push.apply(o,r[n].Converge(t)):(o.push.apply(o,r[e.TOP_LEFT].Converge(t)),o.push.apply(o,r[e.TOP_RIGHT].Converge(t)),o.push.apply(o,r[e.BOTTOM_LEFT].Converge(t)),o.push.apply(o,r[e.BOTTOM_RIGHT].Converge(t)))),o},e.prototype.Split=function(){var t=this.level+1,o=this.objectCap,n=this.levelCap,r=this.nodes,i=this.aabb;r[e.TOP_LEFT]=this.FromStore(i.GetQuadrant(e.TOP_LEFT),t,o,n),r[e.TOP_RIGHT]=this.FromStore(i.GetQuadrant(e.TOP_RIGHT),t,o,n),r[e.BOTTOM_LEFT]=this.FromStore(i.GetQuadrant(e.BOTTOM_LEFT),t,o,n),r[e.BOTTOM_RIGHT]=this.FromStore(i.GetQuadrant(e.BOTTOM_RIGHT),t,o,n),this.hasSplit=!0},e.prototype.Dump=function(){var t=this.nodes;this.objects.length=0,!0===this.hasSplit&&(t[e.TOP_LEFT].Dump(),t[e.TOP_RIGHT].Dump(),t[e.BOTTOM_LEFT].Dump(),t[e.BOTTOM_RIGHT].Dump(),!0===e.USE_POOL&&(t[e.TOP_LEFT].Store(),t[e.TOP_RIGHT].Store(),t[e.BOTTOM_LEFT].Store(),t[e.BOTTOM_RIGHT].Store())),this.nodes={},this.hasSplit=!1},e.prototype.Marking=function(t){var o=this.nodes;return!0===o[e.TOP_LEFT].aabb.ContainsAABB2D(t)?e.TOP_LEFT:!0===o[e.TOP_RIGHT].aabb.ContainsAABB2D(t)?e.TOP_RIGHT:!0===o[e.BOTTOM_LEFT].aabb.ContainsAABB2D(t)?e.BOTTOM_LEFT:!0===o[e.BOTTOM_RIGHT].aabb.ContainsAABB2D(t)?e.BOTTOM_RIGHT:null},e.prototype.ConcatNodes=function(t){void 0===t&&(t=[]),t.push(this);var o=this.nodes;return!1===this.hasSplit?t:(o[e.TOP_LEFT].ConcatNodes(t),o[e.TOP_RIGHT].ConcatNodes(t),o[e.BOTTOM_LEFT].ConcatNodes(t),o[e.BOTTOM_RIGHT].ConcatNodes(t),t)},e.prototype.Store=function(){e.Pool.Store(this)},t.Utils.QuadtreeNode=e,t.QuadtreeNode=e,e.Pool.Flood(function(){},1e3)}},function(t,e){t.exports=function(t){"use strict";function e(o,n){if(!(this instanceof e))return new e(o,n);this.transform=new t.Math.Transform2D(o,n),this.data=Object.create(null)}e.prototype=Object.create(null),e.prototype.constructor=e,e.NULL_TRANSFORM=new t.Math.Transform2D,e.prototype.parent=null,e.prototype.transform=null,e.prototype.data=null,e.prototype.w=0,e.prototype.h=0,e.prototype.bounds=null,e.prototype.boundsDirty=!0,e.prototype.UpdateTransform=function(){this.parent?this.transform.UpdateWorld(this.parent.transform.worldTransform):this.transform.UpdateWorld(e.NULL_TRANSFORM.worldTransform)},e.prototype.GetWorldPosition=function(){var e=this.transform.worldTransform;return new t.Vector2D(e.e,e.f)},e.prototype.ComputeBounds=function(e){var o=e&&e.x?e.x:0,n=e&&e.y?e.y:0;return null===this.bounds?(this.bounds=new t.Geom.AABB2D(this.x-this.width*o,this.y-this.height*n,this.x+this.width,this.y+this.height),this.bounds.belongsTo=this):this.bounds.Set(this.x-this.width*o,this.y-this.height*n,this.x+this.width,this.y+this.height),this.boundsDirty=!1,this.bounds},Object.defineProperty(e.prototype,"rotation",{get:function(){return this.transform.rotation},set:function(t){this.transform.rotation=t,this.transform.UpdateSkew()}}),Object.defineProperty(e.prototype,"scale",{get:function(){return this.transform.scale}}),Object.defineProperty(e.prototype,"position",{get:function(){return this.transform.position}}),Object.defineProperty(e.prototype,"pivot",{get:function(){return this.transform.pivot}}),Object.defineProperty(e.prototype,"x",{get:function(){return this.transform.position.x},set:function(t){this.transform.position.x=t}}),Object.defineProperty(e.prototype,"y",{get:function(){return this.transform.position.y},set:function(t){this.transform.position.y=t}}),Object.defineProperty(e.prototype,"width",{get:function(){return this.w*this.scale.x},set:function(t){this.w=t}}),Object.defineProperty(e.prototype,"height",{get:function(){return this.h*this.scale.y},set:function(t){this.h=t}}),t.Entity.CoreEntity2D=e}},function(t,e){t.exports=function(t){"use strict";function e(t,n){if(!(this instanceof e))return new e(t,n);o.call(this,t,n),this.children=[]}var o=t.Entity.CoreEntity2D;e.prototype=Object.create(o.prototype),e.prototype.constructor=e,e.prototype.children=null,e.prototype.render=!0,e.prototype.display=!0,e.prototype.transformShouldUpdate=!0,e.prototype.transformAutomaticUpdate=!0,e.prototype.isBatchParent=!1,e.prototype.childDataBuffer=null,e.prototype.bufferData=null,e.prototype.programController=null,e.prototype.bufferStartIndex=0,e.prototype.bufferEndIndex=0,e.prototype.PreDraw=function(){},e.prototype.GLPreDraw=function(){},e.prototype.Draw=function(t){this.PreDraw(t),!0===this.render&&(!0===this.transformShouldUpdate&&(this.UpdateTransform(),!1===this.transformAutomaticUpdate&&(this.transformShouldUpdate=!1)),this.children.length>0&&!0===this.display&&this.DrawChildren(t))},e.prototype.GLDraw=function(t){this.GLPreDraw(t),!0===this.render&&(!0===this.transformShouldUpdate&&(this.UpdateTransform(),!1===this.transformAutomaticUpdate&&(this.transformShouldUpdate=!1)),this.children.length>0&&!0===this.display&&(!0===this.isBatchParent?this.GLBatchDrawChildren():this.GLDrawChildren(t)))},e.prototype.RequestTransformUpdate=function(){this.transformShouldUpdate=!0},e.prototype.DrawChildren=function(t){for(var e,o=0,n=this.children,r=n.length;o<r;++o)e=n[o],e.Draw&&e.Draw(t)},e.prototype.GLDrawChildren=function(t){for(var e,o=0,n=this.children,r=n.length;o<r;++o)e=n[o],e.GLDraw&&e.GLDraw(t)},e.prototype.GLBatchDrawChildren=function(){null!=this.childDataBuffer&&null!=this.programController&&this.programController.Execute(this.childDataBuffer,this.children.length)},e.prototype.ComputeBatchBuffer=function(t){for(var e,o,n=[],r=0,i=this.children,s=i.length;r<s;++r)e=i[r],o=null!=t?t(e):e.GetBufferData(),e.bufferStartIndex=n.length,e.bufferEndIndex=n.length+o.length,n.push.apply(n,o);this.childDataBuffer=new Float32Array(n)},e.prototype.UpdateInBuffer=function(){throw new Error("Cannot update buffer data directly on Container2D object!")},e.prototype.GetBufferData=function(){throw new Error("Cannot access buffer data directly on Container2D object!")},e.prototype.AddChild=function(t){var e=t.parent;return null!==e&&e.RemoveChild(t),this.children.push(t),t.parent=this,t},e.prototype.AddChildren=function(){var t=arguments;Array.isArray(t[0])&&(t=t[0]);for(var e=0,o=t.length;e<o;++e)this.AddChild(t[e])},e.prototype.Mount=function(){this.AddChildren.apply(this,arguments)},e.prototype.AddSibling=function(t){var e=this.parent;return null!==e&&e.AddChild(t),t},e.prototype.RemoveChild=function(t){var e=this.children,o=e.indexOf(t);if(-1!==o)return t.parent=null,e.fickleSplice(o)},e.prototype.RemoveChildren=function(){for(var t,e,o=this.children,n=arguments[0].length?arguments[0]:arguments,r=[],i=0,s=n.length;i<s;++i)t=n[i],-1!==(e=o.indexOf(t))&&(r.push(o.fickleSplice(e)),t.parent=null);return r},e.prototype.SendToFront=function(){if(null!==this.parent){var t=this.parent.children,e=t.indexOf(this);-1!==e&&t.push(t.fickleSplice(e))}},e.prototype.SendToBack=function(){if(null!==this.parent){var t=this.parent.children,e=t.indexOf(this);-1!==e&&t.unshift(t.fickleSplice(e))}},e.prototype.Dump=function(){this.children.length=0},e.prototype.Destroy=function(){this.Dump(),null!==this.parent&&this.parent.RemoveChild(this)},e.prototype.AttachTo=function(t){t.AddChild(this)},e.prototype.Detach=function(){return null!==this.parent?this.parent.RemoveChild(this):null},e.prototype.GetChildClosestTo=function(t,e){var o=this.children,n=null;if(0!==o.length){for(var r,i,s=0,a=o.length,h=1/0;s<a;++s)r=o[s],void 0!==e&&!1===e(r)||(i=Math.abs(r.position.GetDistanceSquared(t.x,t.y)))<h&&(h=i,n=r);return n}return null},e.prototype.GetChildFurthestFrom=function(t,e){var o=this.children,n=null;if(0!==o.length){for(var r,i,s=0,a=o.length,h=0;s<a;++s)r=o[s],void 0!==e&&!1===e(r)||(i=Math.abs(r.position.GetDistanceSquared(t.x,t.y)))>h&&(h=i,n=r);return n}return null},e.prototype.UseAsBatchParent=function(t){this.isBatchParent=!0,this.programController=t},t.Entity.Container2D=e,t.Container2D=e}},function(t,e){t.exports=function(t){"use strict";function e(t,n){if(!(this instanceof e))return new e(t,n);o.call(this,t,n)}var o=t.Entity.Container2D;e.prototype=Object.create(o.prototype),e.prototype.constructor=e,e.prototype.Render=function(){!0===this.render&&(!0===this.transformShouldUpdate&&(this.UpdateTransform(),!1===this.transformAutomaticUpdate&&(this.transformShouldUpdate=!1)),this.children.length>0&&this.RenderChildren())},e.prototype.RenderChildren=function(){for(var t,e=0,o=this.children,n=o.length;e<n;++e)t=o[e],t.Render&&t.Render()},t.Entity.Case2D=e,t.Case2D=e}},function(t,e){t.exports=function(t){"use strict";function e(t,o,n,r,i){if(!(this instanceof e))return new e(t,o,n,r,i);this.id=t.split(" "),this.handle=o,this.info=n,void 0!==r&&(this.priority=r),void 0!==i&&(this.breakIfExecuted=i),this.data={}}e.prototype=Object.create(null),e.prototype.constructor=e,e.prototype.command=null,e.prototype.priority=0,e.prototype.breakIfExecuted=!1,e.prototype.Execute=function(t,e){return this.handle(t,e),this.breakIfExecuted},t.CP.Option=e}},function(t,e){t.exports=function(t){"use strict";function e(t,o,n,r,i){if(!(this instanceof e))return new e(t,o,n,r,i);this.id=t.split(" "),this.handle=o,this.info=n,this.data={},this.optionPrefix=void 0===i?e.OPTION_PREFIX:i,this.dsCopy=[],void 0!==r&&(this.continueToPrime=r)}e.prototype=Object.create(null),e.prototype.constructor=e,e.OPTION_PREFIX="",e.prototype.dataSeparator="=",e.prototype.options=null,e.prototype.allOptionIds=null,e.prototype.fullInfo=null,e.prototype.optionPrefix=null,e.prototype.continueToPrime=!0,e.prototype.dsCopy=null,e.prototype.Execute=function(t,e){this.HandleData(t,e),!0===this.HandleOptions(t,e)&&this.handle(t,e)},e.prototype.AddOption=function(e,o,n,r,i,s){s=void 0===s?this.optionPrefix:s,null!==s&&(e=e.replace(/\S+/g,s+"$&")),null===this.options&&(this.options=[]),r=void 0===r?0:r;var a=new t.CP.Option(e,o,n,r,i);a.command=this;for(var h,p=0,u=this.options,c=u.length;p<c;++p)if(h=u[p],h.priority<=r)return u.splice(p,0,a),this.allOptionIds=this.GetAllOptionIds(),this;return this.options.push(a),this.allOptionIds=this.GetAllOptionIds(),this},e.prototype.HandleData=function(t,e){var o=this.dsCopy;o.push.apply(o,t);for(var n,r,i=0,s=o.length,a=this.dataSeparator;i<s;++i)n=o[i],r=n.split(a),2===r.length&&(t.fickleSplice(i),e[r[0]]=r[1]);o.length=0},e.prototype.HandleOptions=function(t,e){if(0===t.length)return this.continueToPrime;var o=this.GetAndRemoveMatchingOptionIds(t);if(null===o)return this.continueToPrime;for(var n,r=0,i=o.length;r<i;++r)if(n=this.GetOptionById(o[r]),!0===n.Execute(t,e))return!1;return this.continueToPrime},e.prototype.GetOptionById=function(t){for(var e,o=0,n=this.options,r=n.length;o<r;++o)if(e=n[o],-1!==e.id.indexOf(t))return e;return null},e.prototype.GetAllOptionIds=function(){for(var t=[],e=0,o=this.options,n=o.length;e<n;++e)t.push.apply(t,o[e].id);return t},e.prototype.GetAndRemoveMatchingOptionIds=function(t){var e=this.allOptionIds;if(null===e)return null;for(var o=[],n=0,r=e.length;n<r;++n){var i=t.indexOf(e[n]);-1!==i&&o.push(t.fickleSplice(i))}return o},e.prototype.GenerateInfoString=function(){for(var t,e="COMMAND: "+this.id.join(", ")+" -> "+this.info+"\n",o=0,n=this.options,r=n.length;o<r;++o)t=n[o],e+="OPTION: "+t.id.join(", ")+" -> "+t.info+"\n";return e},t.CP.Command=e}},function(t,e){t.exports=function(t){"use strict";function e(t){if(!(this instanceof e))return new e(t);this.commands=[]}e.prototype=Object.create(null),e.prototype.constructor=e,e.prototype.splitter=" ",e.prototype.Add=function(t){this.commands.push(t)},e.prototype.Get=function(t){for(var e,o=0,n=this.commands,r=n.length;o<r;++o)if(e=this.commands[o])for(var i=0,s=e.id.length;i<s;++i)if(e.id[i]===t)return e;return null},e.prototype.Parse=function(t){var e=String(t).split(this.splitter),o=e.shift(),n=this.Get(o);return n?(n.Execute(e,{}),null):o},t.CP.Register=e}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e,o){t.exports=o(82)},function(t,e,o){var n=Object.create(null);o(1)(),o(83)(n),o(2)(n),o(3)(n),o(4)(n),o(5)(n),o(6)(n),o(7)(n),o(8)(n),o(9)(n),o(10)(n),o(11)(n),o(12)(n),o(13)(n),o(14)(n),o(15)(n),o(21)(n),o(22)(n),o(23)(n),o(16)(n),o(17)(n),o(18)(n),o(19)(n),o(20)(n),o(24)(n),o(25)(n),o(26)(n),o(27)(n),o(28)(n),o(29)(n),o(30)(n),t.exports=n},function(t,e){t.exports=function(t){t.Geom=Object.create(null),t.Math=Object.create(null),t.Utils=Object.create(null),t.Entity=Object.create(null),t.Event=Object.create(null),t.Time=Object.create(null),t.CP=Object.create(null),t.VERSION="0.5.5 (Alpha)",t.PRINT_VERSION=function(){console.log("nenkraft-behind version "+t.VERSION)}}}])});
//# sourceMappingURL=nkb.min.js.map